(()=>{"use strict";var e,r,a,t,n,o,s,l,i,d,u,g,p,m,c,f,h,y,w,b,M,I,v,G,E,B,k,S,_,A,U,T,R,N={409:e=>{e.exports=e=>!!e&&("symbol"==typeof Symbol.observable&&"function"==typeof e[Symbol.observable]?e===e[Symbol.observable]():"function"==typeof e["@@observable"]&&e===e["@@observable"]())},278:(e,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.serialize=r.deserialize=r.registerSerializer=void 0;const t=a(914);let n=t.DefaultSerializer;r.registerSerializer=function(e){n=t.extendSerializer(n,e)},r.deserialize=function(e){return n.deserialize(e)},r.serialize=function(e){return n.serialize(e)}},914:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.DefaultSerializer=r.extendSerializer=void 0,r.extendSerializer=function(e,r){const a=e.deserialize.bind(e),t=e.serialize.bind(e);return{deserialize:e=>r.deserialize(e,a),serialize:e=>r.serialize(e,t)}};const a=e=>Object.assign(Error(e.message),{name:e.name,stack:e.stack}),t=e=>({__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack});r.DefaultSerializer={deserialize(e){return(r=e)&&"object"==typeof r&&"__error_marker"in r&&"$$error"===r.__error_marker?a(e):e;var r},serialize:e=>e instanceof Error?t(e):e}},682:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.$worker=r.$transferable=r.$terminate=r.$events=r.$errors=void 0,r.$errors=Symbol("thread.errors"),r.$events=Symbol("thread.events"),r.$terminate=Symbol("thread.terminate"),r.$transferable=Symbol("thread.transferable"),r.$worker=Symbol("thread.worker")},712:(e,r,a)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.Transfer=r.isTransferDescriptor=void 0;const t=a(682);r.isTransferDescriptor=function(e){return e&&"object"==typeof e&&e[t.$transferable]},r.Transfer=function(e,r){if(!r){if(!(a=e)||"object"!=typeof a)throw Error();r=[e]}var a;return{[t.$transferable]:!0,send:e,transferables:r}}},781:(e,r)=>{var a,t;Object.defineProperty(r,"__esModule",{value:!0}),r.WorkerMessageType=r.MasterMessageType=void 0,(t=r.MasterMessageType||(r.MasterMessageType={})).cancel="cancel",t.run="run",(a=r.WorkerMessageType||(r.WorkerMessageType={})).error="error",a.init="init",a.result="result",a.running="running",a.uncaughtError="uncaughtError"},304:(e,r)=>{Object.defineProperty(r,"__esModule",{value:!0}),r.default={isWorkerRuntime:function(){const e="undefined"!=typeof self&&"undefined"!=typeof Window&&self instanceof Window;return!("undefined"==typeof self||!self.postMessage||e)},postMessageToMaster:function(e,r){self.postMessage(e,r)},subscribeToMasterMessages:function(e){const r=r=>{e(r.data)};return self.addEventListener("message",r),()=>{self.removeEventListener("message",r)}}}},854:function(e,r,a){var t=this&&this.__awaiter||function(e,r,a,t){return new(a||(a=Promise))((function(n,o){function s(e){try{i(t.next(e))}catch(e){o(e)}}function l(e){try{i(t.throw(e))}catch(e){o(e)}}function i(e){var r;e.done?n(e.value):(r=e.value,r instanceof a?r:new a((function(e){e(r)}))).then(s,l)}i((t=t.apply(e,r||[])).next())}))},n=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(r,"__esModule",{value:!0}),r.expose=r.isWorkerRuntime=r.Transfer=r.registerSerializer=void 0;const o=n(a(409)),s=a(278),l=a(712),i=a(781),d=n(a(304));var u=a(278);Object.defineProperty(r,"registerSerializer",{enumerable:!0,get:function(){return u.registerSerializer}});var g=a(712);Object.defineProperty(r,"Transfer",{enumerable:!0,get:function(){return g.Transfer}}),r.isWorkerRuntime=d.default.isWorkerRuntime;let p=!1;const m=new Map,c=e=>e&&e.type===i.MasterMessageType.run,f=e=>o.default(e)||function(e){return e&&"object"==typeof e&&"function"==typeof e.subscribe}(e);function h(e){return l.isTransferDescriptor(e)?{payload:e.send,transferables:e.transferables}:{payload:e,transferables:void 0}}function y(e,r){const{payload:a,transferables:t}=h(r),n={type:i.WorkerMessageType.error,uid:e,error:s.serialize(a)};d.default.postMessageToMaster(n,t)}function w(e,r,a){const{payload:t,transferables:n}=h(a),o={type:i.WorkerMessageType.result,uid:e,complete:!!r||void 0,payload:t};d.default.postMessageToMaster(o,n)}function b(e){try{const r={type:i.WorkerMessageType.uncaughtError,error:s.serialize(e)};d.default.postMessageToMaster(r)}catch(r){console.error("Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.\nLatest error:",r,"\nOriginal error:",e)}}function M(e,r,a){return t(this,void 0,void 0,(function*(){let t;try{t=r(...a)}catch(r){return y(e,r)}const n=f(t)?"observable":"promise";if(function(e,r){const a={type:i.WorkerMessageType.running,uid:e,resultType:r};d.default.postMessageToMaster(a)}(e,n),f(t)){const r=t.subscribe((r=>w(e,!1,s.serialize(r))),(r=>{y(e,s.serialize(r)),m.delete(e)}),(()=>{w(e,!0),m.delete(e)}));m.set(e,r)}else try{const r=yield t;w(e,!0,s.serialize(r))}catch(r){y(e,s.serialize(r))}}))}r.expose=function(e){if(!d.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(p)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(p=!0,"function"==typeof e)d.default.subscribeToMasterMessages((r=>{c(r)&&!r.method&&M(r.uid,e,r.args.map(s.deserialize))})),function(){const e={type:i.WorkerMessageType.init,exposed:{type:"function"}};d.default.postMessageToMaster(e)}();else{if("object"!=typeof e||!e)throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${e}`);d.default.subscribeToMasterMessages((r=>{c(r)&&r.method&&M(r.uid,e[r.method],r.args.map(s.deserialize))})),function(e){const r={type:i.WorkerMessageType.init,exposed:{type:"module",methods:e}};d.default.postMessageToMaster(r)}(Object.keys(e).filter((r=>"function"==typeof e[r])))}d.default.subscribeToMasterMessages((e=>{if((r=e)&&r.type===i.MasterMessageType.cancel){const r=e.uid,a=m.get(r);a&&(a.unsubscribe(),m.delete(r))}var r}))},"undefined"!=typeof self&&"function"==typeof self.addEventListener&&d.default.isWorkerRuntime()&&(self.addEventListener("error",(e=>{setTimeout((()=>b(e.error||e)),250)})),self.addEventListener("unhandledrejection",(e=>{const r=e.reason;r&&"string"==typeof r.message&&setTimeout((()=>b(r)),250)}))),"undefined"!=typeof process&&"function"==typeof process.on&&d.default.isWorkerRuntime()&&(process.on("uncaughtException",(e=>{setTimeout((()=>b(e)),250)})),process.on("unhandledRejection",(e=>{e&&"string"==typeof e.message&&setTimeout((()=>b(e)),250)})))}},F={},C=Object.defineProperty,O=Object.getOwnPropertyDescriptor,P=Object.getOwnPropertyNames,x=Object.prototype.hasOwnProperty,L=(e=function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')},typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(e,r)=>(typeof require<"u"?require:e)[r]}):e),$=(e,r)=>()=>(e&&(r=e(e=0)),r),z=(e,r)=>{for(var a in r)C(e,a,{get:r[a],enumerable:!0})},j=e=>((e,r,a,t)=>{if(r&&"object"==typeof r||"function"==typeof r)for(let a of P(r))!x.call(e,a)&&undefined!==a&&C(e,a,{get:()=>r[a],enumerable:!(t=O(r,a))||t.enumerable});return e})(C({},"__esModule",{value:!0}),e),D=$((()=>{r=new Map,a=[],t=(e,t,n)=>{if(!t||"function"!=typeof t.init||"function"!=typeof t.createInferenceSessionHandler)throw new TypeError("not a valid backend");{let o=r.get(e);if(void 0===o)r.set(e,{backend:t,priority:n});else{if(o.priority>n)return;if(o.priority===n&&o.backend!==t)throw new Error(`cannot register backend "${e}" using priority ${n}`)}if(n>=0){let t=a.indexOf(e);-1!==t&&a.splice(t,1);for(let t=0;t<a.length;t++)if(r.get(a[t]).priority<=n)return void a.splice(t,0,e);a.push(e)}}},n=async e=>{let a=r.get(e);if(!a)return"backend not found.";if(a.initialized)return a.backend;if(a.aborted)return a.error;{let r=!!a.initPromise;try{return r||(a.initPromise=a.backend.init(e)),await a.initPromise,a.initialized=!0,a.backend}catch(e){return r||(a.error=`${e}`,a.aborted=!0),a.error}finally{delete a.initPromise}}},o=async e=>{let r,t=e.executionProviders||[],o=t.map((e=>"string"==typeof e?e:e.name)),s=0===o.length?a:o,l=[],i=new Set;for(let e of s){let a=await n(e);"string"==typeof a?l.push({name:e,err:a}):(r||(r=a),r===a&&i.add(e))}if(!r)throw new Error(`no available backend found. ERR: ${l.map((e=>`[${e.name}] ${e.err}`)).join(", ")}`);for(let{name:e,err:r}of l)o.includes(e)&&console.warn(`removing requested execution provider "${e}" from session options because it is not available: ${r}`);let d=t.filter((e=>i.has("string"==typeof e?e:e.name)));return[r,new Proxy(e,{get:(e,r)=>"executionProviders"===r?d:Reflect.get(e,r)})]}})),H=$((()=>{D()})),W=$((()=>{s="1.19.2"})),Y=$((()=>{W(),l="warning",i={wasm:{},webgl:{},webgpu:{},versions:{common:s},set logLevel(e){if(void 0!==e){if("string"!=typeof e||-1===["verbose","info","warning","error","fatal"].indexOf(e))throw new Error(`Unsupported logging level: ${e}`);l=e}},get logLevel(){return l}},Object.defineProperty(i,"logLevel",{enumerable:!0})})),V=$((()=>{Y(),d=i})),q=$((()=>{u=(e,r)=>{let a=typeof document<"u"?document.createElement("canvas"):new OffscreenCanvas(1,1);a.width=e.dims[3],a.height=e.dims[2];let t=a.getContext("2d");if(null!=t){let n,o;void 0!==r?.tensorLayout&&"NHWC"===r.tensorLayout?(n=e.dims[2],o=e.dims[3]):(n=e.dims[3],o=e.dims[2]);let s,l,i=void 0!==r?.format?r.format:"RGB",d=r?.norm;void 0===d||void 0===d.mean?s=[255,255,255,255]:"number"==typeof d.mean?s=[d.mean,d.mean,d.mean,d.mean]:(s=[d.mean[0],d.mean[1],d.mean[2],0],void 0!==d.mean[3]&&(s[3]=d.mean[3])),void 0===d||void 0===d.bias?l=[0,0,0,0]:"number"==typeof d.bias?l=[d.bias,d.bias,d.bias,d.bias]:(l=[d.bias[0],d.bias[1],d.bias[2],0],void 0!==d.bias[3]&&(l[3]=d.bias[3]));let u=o*n,g=0,p=u,m=2*u,c=-1;"RGBA"===i?(g=0,p=u,m=2*u,c=3*u):"RGB"===i?(g=0,p=u,m=2*u):"RBG"===i&&(g=0,m=u,p=2*u);for(let r=0;r<o;r++)for(let a=0;a<n;a++){let n=(e.data[g++]-l[0])*s[0],o=(e.data[p++]-l[1])*s[1],i=(e.data[m++]-l[2])*s[2],d=-1===c?255:(e.data[c++]-l[3])*s[3];t.fillStyle="rgba("+n+","+o+","+i+","+d+")",t.fillRect(a,r,1,1)}if("toDataURL"in a)return a.toDataURL();throw new Error("toDataURL is not supported")}throw new Error("Can not access image data")},g=(e,r)=>{let a,t=typeof document<"u"?document.createElement("canvas").getContext("2d"):new OffscreenCanvas(1,1).getContext("2d");if(null==t)throw new Error("Can not access image data");{let n,o,s;void 0!==r?.tensorLayout&&"NHWC"===r.tensorLayout?(n=e.dims[2],o=e.dims[1],s=e.dims[3]):(n=e.dims[3],o=e.dims[2],s=e.dims[1]);let l,i,d=void 0!==r&&void 0!==r.format?r.format:"RGB",u=r?.norm;void 0===u||void 0===u.mean?l=[255,255,255,255]:"number"==typeof u.mean?l=[u.mean,u.mean,u.mean,u.mean]:(l=[u.mean[0],u.mean[1],u.mean[2],255],void 0!==u.mean[3]&&(l[3]=u.mean[3])),void 0===u||void 0===u.bias?i=[0,0,0,0]:"number"==typeof u.bias?i=[u.bias,u.bias,u.bias,u.bias]:(i=[u.bias[0],u.bias[1],u.bias[2],0],void 0!==u.bias[3]&&(i[3]=u.bias[3]));let g=o*n;if(void 0!==r&&(void 0!==r.format&&4===s&&"RGBA"!==r.format||3===s&&"RGB"!==r.format&&"BGR"!==r.format))throw new Error("Tensor format doesn't match input tensor dims");let p=4,m=0,c=1,f=2,h=3,y=0,w=g,b=2*g,M=-1;"RGBA"===d?(y=0,w=g,b=2*g,M=3*g):"RGB"===d?(y=0,w=g,b=2*g):"RBG"===d&&(y=0,b=g,w=2*g),a=t.createImageData(n,o);for(let r=0;r<o*n;m+=p,c+=p,f+=p,h+=p,r++)a.data[m]=(e.data[y++]-i[0])*l[0],a.data[c]=(e.data[w++]-i[1])*l[1],a.data[f]=(e.data[b++]-i[2])*l[2],a.data[h]=-1===M?255:(e.data[M++]-i[3])*l[3]}return a}})),J=$((()=>{X(),p=(e,r)=>{if(void 0===e)throw new Error("Image buffer must be defined");if(void 0===r.height||void 0===r.width)throw new Error("Image height and width must be defined");if("NHWC"===r.tensorLayout)throw new Error("NHWC Tensor layout is not supported yet");let a,t,{height:n,width:o}=r,s=r.norm??{mean:255,bias:0};a="number"==typeof s.mean?[s.mean,s.mean,s.mean,s.mean]:[s.mean[0],s.mean[1],s.mean[2],s.mean[3]??255],t="number"==typeof s.bias?[s.bias,s.bias,s.bias,s.bias]:[s.bias[0],s.bias[1],s.bias[2],s.bias[3]??0];let l=void 0!==r.format?r.format:"RGBA",i=void 0!==r.tensorFormat&&void 0!==r.tensorFormat?r.tensorFormat:"RGB",d=n*o,u="RGBA"===i?new Float32Array(4*d):new Float32Array(3*d),g=4,p=0,m=1,c=2,f=3,h=0,y=d,w=2*d,b=-1;"RGB"===l&&(g=3,p=0,m=1,c=2,f=-1),"RGBA"===i?b=3*d:"RBG"===i?(h=0,w=d,y=2*d):"BGR"===i&&(w=0,y=d,h=2*d);for(let r=0;r<d;r++,p+=g,c+=g,m+=g,f+=g)u[h++]=(e[p]+t[0])/a[0],u[y++]=(e[m]+t[1])/a[1],u[w++]=(e[c]+t[2])/a[2],-1!==b&&-1!==f&&(u[b++]=(e[f]+t[3])/a[3]);return new G("float32",u,"RGBA"===i?[1,4,n,o]:[1,3,n,o])},m=async(e,r)=>{let a,t=typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement,n=typeof ImageData<"u"&&e instanceof ImageData,o=typeof ImageBitmap<"u"&&e instanceof ImageBitmap,s="string"==typeof e,l=r??{},i=()=>{if(typeof document<"u")return document.createElement("canvas");if(typeof OffscreenCanvas<"u")return new OffscreenCanvas(1,1);throw new Error("Canvas is not supported")},d=e=>e instanceof HTMLCanvasElement||e instanceof OffscreenCanvas?e.getContext("2d"):null;if(t){let t=i();t.width=e.width,t.height=e.height;let n=d(t);if(null==n)throw new Error("Can not access image data");{let t=e.height,o=e.width;if(void 0!==r&&void 0!==r.resizedHeight&&void 0!==r.resizedWidth&&(t=r.resizedHeight,o=r.resizedWidth),void 0!==r){if(l=r,void 0!==r.tensorFormat)throw new Error("Image input config format must be RGBA for HTMLImageElement");l.tensorFormat="RGBA",l.height=t,l.width=o}else l.tensorFormat="RGBA",l.height=t,l.width=o;n.drawImage(e,0,0),a=n.getImageData(0,0,o,t).data}}else{if(!n){if(o){if(void 0===r)throw new Error("Please provide image config with format for Imagebitmap");let t=i();t.width=e.width,t.height=e.height;let n=d(t);if(null!=n){let r=e.height,t=e.width;return n.drawImage(e,0,0,t,r),a=n.getImageData(0,0,t,r).data,l.height=r,l.width=t,p(a,l)}throw new Error("Can not access image data")}if(s)return new Promise(((r,a)=>{let t=i(),n=d(t);if(!e||!n)return a();let o=new Image;o.crossOrigin="Anonymous",o.src=e,o.onload=()=>{t.width=o.width,t.height=o.height,n.drawImage(o,0,0,t.width,t.height);let e=n.getImageData(0,0,t.width,t.height);l.height=t.height,l.width=t.width,r(p(e.data,l))}}));throw new Error("Input data provided is not supported - aborted tensor creation")}{let t,n;if(void 0!==r&&void 0!==r.resizedWidth&&void 0!==r.resizedHeight?(t=r.resizedHeight,n=r.resizedWidth):(t=e.height,n=e.width),void 0!==r&&(l=r),l.format="RGBA",l.height=t,l.width=n,void 0!==r){let r=i();r.width=n,r.height=t;let o=d(r);if(null==o)throw new Error("Can not access image data");o.putImageData(e,0,0),a=o.getImageData(0,0,n,t).data}else a=e.data}}if(void 0!==a)return p(a,l);throw new Error("Input data provided is not supported - aborted tensor creation")},c=(e,r)=>{let{width:a,height:t,download:n,dispose:o}=r;return new G({location:"texture",type:"float32",texture:e,dims:[1,t,a,4],download:n,dispose:o})},f=(e,r)=>{let{dataType:a,dims:t,download:n,dispose:o}=r;return new G({location:"gpu-buffer",type:a??"float32",gpuBuffer:e,dims:t,download:n,dispose:o})},h=(e,r,a)=>new G({location:"cpu-pinned",type:e,data:r,dims:a??[r.length]})})),K=$((()=>{y=new Map([["float32",Float32Array],["uint8",Uint8Array],["int8",Int8Array],["uint16",Uint16Array],["int16",Int16Array],["int32",Int32Array],["bool",Uint8Array],["float64",Float64Array],["uint32",Uint32Array]]),w=new Map([[Float32Array,"float32"],[Uint8Array,"uint8"],[Int8Array,"int8"],[Uint16Array,"uint16"],[Int16Array,"int16"],[Int32Array,"int32"],[Float64Array,"float64"],[Uint32Array,"uint32"]]),b=!1,M=()=>{if(!b){b=!0;let e=typeof BigInt64Array<"u"&&BigInt64Array.from,r=typeof BigUint64Array<"u"&&BigUint64Array.from,a=typeof Float16Array<"u"&&Float16Array.from;e&&(y.set("int64",BigInt64Array),w.set(BigInt64Array,"int64")),r&&(y.set("uint64",BigUint64Array),w.set(BigUint64Array,"uint64")),a?(y.set("float16",Float16Array),w.set(Float16Array,"float16")):y.set("float16",Uint16Array)}}})),Z=$((()=>{X(),I=e=>{let r=1;for(let a=0;a<e.length;a++){let t=e[a];if("number"!=typeof t||!Number.isSafeInteger(t))throw new TypeError(`dims[${a}] must be an integer, got: ${t}`);if(t<0)throw new RangeError(`dims[${a}] must be a non-negative integer, got: ${t}`);r*=t}return r},v=(e,r)=>{switch(e.location){case"cpu":return new G(e.type,e.data,r);case"cpu-pinned":return new G({location:"cpu-pinned",data:e.data,type:e.type,dims:r});case"texture":return new G({location:"texture",texture:e.texture,type:e.type,dims:r});case"gpu-buffer":return new G({location:"gpu-buffer",gpuBuffer:e.gpuBuffer,type:e.type,dims:r});default:throw new Error(`tensorReshape: tensor location ${e.location} is not supported`)}}})),X=$((()=>{q(),J(),K(),Z(),G=class{constructor(e,r,a){let t,n;if(M(),"object"==typeof e&&"location"in e)switch(this.dataLocation=e.location,t=e.type,n=e.dims,e.location){case"cpu-pinned":{let r=y.get(t);if(!r)throw new TypeError(`unsupported type "${t}" to create tensor from pinned buffer`);if(!(e.data instanceof r))throw new TypeError(`buffer should be of type ${r.name}`);this.cpuData=e.data;break}case"texture":if("float32"!==t)throw new TypeError(`unsupported type "${t}" to create tensor from texture`);this.gpuTextureData=e.texture,this.downloader=e.download,this.disposer=e.dispose;break;case"gpu-buffer":if("float32"!==t&&"float16"!==t&&"int32"!==t&&"int64"!==t&&"uint32"!==t&&"uint8"!==t&&"bool"!==t)throw new TypeError(`unsupported type "${t}" to create tensor from gpu buffer`);this.gpuBufferData=e.gpuBuffer,this.downloader=e.download,this.disposer=e.dispose;break;default:throw new Error(`Tensor constructor: unsupported location '${this.dataLocation}'`)}else{let o,s;if("string"==typeof e)if(t=e,s=a,"string"===e){if(!Array.isArray(r))throw new TypeError("A string tensor's data must be a string array.");o=r}else{let a=y.get(e);if(void 0===a)throw new TypeError(`Unsupported tensor type: ${e}.`);if(Array.isArray(r)){if("float16"===e&&a===Uint16Array)throw new TypeError("Creating a float16 tensor from number array is not supported. Please use Uint16Array as data.");o="uint64"===e||"int64"===e?a.from(r,BigInt):a.from(r)}else{if(!(r instanceof a))throw new TypeError(`A ${t} tensor's data must be type of ${a}`);o=r}}else if(s=r,Array.isArray(e)){if(0===e.length)throw new TypeError("Tensor type cannot be inferred from an empty array.");let r=typeof e[0];if("string"===r)t="string",o=e;else{if("boolean"!==r)throw new TypeError(`Invalid element type of data array: ${r}.`);t="bool",o=Uint8Array.from(e)}}else{let r=w.get(e.constructor);if(void 0===r)throw new TypeError(`Unsupported type for tensor data: ${e.constructor}.`);t=r,o=e}if(void 0===s)s=[o.length];else if(!Array.isArray(s))throw new TypeError("A tensor's dims must be a number array");n=s,this.cpuData=o,this.dataLocation="cpu"}let o=I(n);if(this.cpuData&&o!==this.cpuData.length)throw new Error(`Tensor's size(${o}) does not match data length(${this.cpuData.length}).`);this.type=t,this.dims=n,this.size=o}static async fromImage(e,r){return m(e,r)}static fromTexture(e,r){return c(e,r)}static fromGpuBuffer(e,r){return f(e,r)}static fromPinnedBuffer(e,r,a){return h(e,r,a)}toDataURL(e){return u(this,e)}toImageData(e){return g(this,e)}get data(){if(this.ensureValid(),!this.cpuData)throw new Error("The data is not on CPU. Use `getData()` to download GPU data to CPU, or use `texture` or `gpuBuffer` property to access the GPU data directly.");return this.cpuData}get location(){return this.dataLocation}get texture(){if(this.ensureValid(),!this.gpuTextureData)throw new Error("The data is not stored as a WebGL texture.");return this.gpuTextureData}get gpuBuffer(){if(this.ensureValid(),!this.gpuBufferData)throw new Error("The data is not stored as a WebGPU buffer.");return this.gpuBufferData}async getData(e){switch(this.ensureValid(),this.dataLocation){case"cpu":case"cpu-pinned":return this.data;case"texture":case"gpu-buffer":if(!this.downloader)throw new Error("The current tensor is not created with a specified data downloader.");if(this.isDownloading)throw new Error("The current tensor is being downloaded.");try{this.isDownloading=!0;let r=await this.downloader();return this.downloader=void 0,this.dataLocation="cpu",this.cpuData=r,e&&this.disposer&&(this.disposer(),this.disposer=void 0),r}finally{this.isDownloading=!1}default:throw new Error(`cannot get data from location: ${this.dataLocation}`)}}dispose(){if(this.isDownloading)throw new Error("The current tensor is being downloaded.");this.disposer&&(this.disposer(),this.disposer=void 0),this.cpuData=void 0,this.gpuTextureData=void 0,this.gpuBufferData=void 0,this.downloader=void 0,this.isDownloading=void 0,this.dataLocation="none"}ensureValid(){if("none"===this.dataLocation)throw new Error("The tensor is disposed.")}reshape(e){if(this.ensureValid(),this.downloader||this.disposer)throw new Error("Cannot reshape a tensor that owns GPU resource.");return v(this,e)}}})),Q=$((()=>{X(),E=G})),ee=$((()=>{Y(),B=(e,r)=>{(typeof i.trace>"u"?!i.wasm.trace:!i.trace)||console.timeStamp(`${e}::ORT::${r}`)},k=(e,r)=>{let a=(new Error).stack?.split(/\r\n|\r|\n/g)||[],t=!1;for(let n=0;n<a.length;n++){if(t&&!a[n].includes("TRACE_FUNC")){let t=`FUNC_${e}::${a[n].trim().split(" ")[1]}`;return r&&(t+=`::${r}`),void B("CPU",t)}a[n].includes("TRACE_FUNC")&&(t=!0)}},S=e=>{(typeof i.trace>"u"?!i.wasm.trace:!i.trace)||k("BEGIN",e)},_=e=>{(typeof i.trace>"u"?!i.wasm.trace:!i.trace)||k("END",e)}})),re=$((()=>{D(),Q(),ee(),A=class e{constructor(e){this.handler=e}async run(e,r,a){S();let t={},n={};if("object"!=typeof e||null===e||e instanceof E||Array.isArray(e))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let o=!0;if("object"==typeof r){if(null===r)throw new TypeError("Unexpected argument[1]: cannot be null.");if(r instanceof E)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(r)){if(0===r.length)throw new TypeError("'fetches' cannot be an empty array.");o=!1;for(let e of r){if("string"!=typeof e)throw new TypeError("'fetches' must be a string array or an object.");if(-1===this.outputNames.indexOf(e))throw new RangeError(`'fetches' contains invalid output name: ${e}.`);t[e]=null}if("object"==typeof a&&null!==a)n=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{let e=!1,s=Object.getOwnPropertyNames(r);for(let a of this.outputNames)if(-1!==s.indexOf(a)){let n=r[a];(null===n||n instanceof E)&&(e=!0,o=!1,t[a]=n)}if(e){if("object"==typeof a&&null!==a)n=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else n=r}}else if(typeof r<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let r of this.inputNames)if(typeof e[r]>"u")throw new Error(`input '${r}' is missing in 'feeds'.`);if(o)for(let e of this.outputNames)t[e]=null;let s=await this.handler.run(e,t,n),l={};for(let e in s)if(Object.hasOwnProperty.call(s,e)){let r=s[e];l[e]=r instanceof E?r:new E(r.type,r.data,r.dims)}return _(),l}async release(){return this.handler.dispose()}static async create(r,a,t,n){S();let s,l={};if("string"==typeof r){if(s=r,"object"==typeof a&&null!==a)l=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else if(r instanceof Uint8Array){if(s=r,"object"==typeof a&&null!==a)l=a;else if(typeof a<"u")throw new TypeError("'options' must be an object.")}else{if(!(r instanceof ArrayBuffer||typeof SharedArrayBuffer<"u"&&r instanceof SharedArrayBuffer))throw new TypeError("Unexpected argument[0]: must be 'path' or 'buffer'.");{let e=r,o=0,i=r.byteLength;if("object"==typeof a&&null!==a)l=a;else if("number"==typeof a){if(o=a,!Number.isSafeInteger(o))throw new RangeError("'byteOffset' must be an integer.");if(o<0||o>=e.byteLength)throw new RangeError(`'byteOffset' is out of range [0, ${e.byteLength}).`);if(i=r.byteLength-o,"number"==typeof t){if(i=t,!Number.isSafeInteger(i))throw new RangeError("'byteLength' must be an integer.");if(i<=0||o+i>e.byteLength)throw new RangeError(`'byteLength' is out of range (0, ${e.byteLength-o}].`);if("object"==typeof n&&null!==n)l=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else if(typeof t<"u")throw new TypeError("'byteLength' must be a number.")}else if(typeof a<"u")throw new TypeError("'options' must be an object.");s=new Uint8Array(e,o,i)}}let[i,d]=await o(l),u=await i.createInferenceSessionHandler(s,d);return _(),new e(u)}startProfiling(){this.handler.startProfiling()}endProfiling(){this.handler.endProfiling()}get inputNames(){return this.handler.inputNames}get outputNames(){return this.handler.outputNames}}})),ae=$((()=>{re(),U=A})),te=$((()=>{})),ne=$((()=>{})),oe=$((()=>{})),se=$((()=>{})),le=$((()=>{D(),Q(),T=class e{constructor(e,r,a){this.handler=e,this.hasOptimizerModel=r,this.hasEvalModel=a}get trainingInputNames(){return this.handler.inputNames}get trainingOutputNames(){return this.handler.outputNames}get evalInputNames(){if(this.hasEvalModel)return this.handler.evalInputNames;throw new Error("This training session has no evalModel loaded.")}get evalOutputNames(){if(this.hasEvalModel)return this.handler.evalOutputNames;throw new Error("This training session has no evalModel loaded.")}static async create(r,a){let t=r.evalModel||"",n=r.optimizerModel||"",s=a||{},[l,i]=await o(s);if(l.createTrainingSessionHandler){let a=await l.createTrainingSessionHandler(r.checkpointState,r.trainModel,t,n,i);return new e(a,!!r.optimizerModel,!!r.evalModel)}throw new Error("Training backend could not be resolved. Make sure you're using the correct configuration & WebAssembly files.")}typeNarrowingForRunStep(e,r,a,t,n){let o={},s={};if("object"!=typeof a||null===a||a instanceof E||Array.isArray(a))throw new TypeError("'feeds' must be an object that use input names as keys and OnnxValue as corresponding values.");let l=!0;if("object"==typeof t){if(null===t)throw new TypeError("Unexpected argument[1]: cannot be null.");if(t instanceof E)throw new TypeError("'fetches' cannot be a Tensor");if(Array.isArray(t)){if(0===t.length)throw new TypeError("'fetches' cannot be an empty array.");l=!1;for(let e of t){if("string"!=typeof e)throw new TypeError("'fetches' must be a string array or an object.");if(-1===r.indexOf(e))throw new RangeError(`'fetches' contains invalid output name: ${e}.`);o[e]=null}if("object"==typeof n&&null!==n)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else{let e=!1,a=Object.getOwnPropertyNames(t);for(let n of r)if(-1!==a.indexOf(n)){let r=t[n];(null===r||r instanceof E)&&(e=!0,l=!1,o[n]=r)}if(e){if("object"==typeof n&&null!==n)s=n;else if(typeof n<"u")throw new TypeError("'options' must be an object.")}else s=t}}else if(typeof t<"u")throw new TypeError("Unexpected argument[1]: must be 'fetches' or 'options'.");for(let r of e)if(typeof a[r]>"u")throw new Error(`input '${r}' is missing in 'feeds'.`);if(l)for(let e of r)o[e]=null;return[o,s]}convertHandlerReturnTypeToMapOfTensors(e){let r={};for(let a in e)if(Object.hasOwnProperty.call(e,a)){let t=e[a];r[a]=t instanceof E?t:new E(t.type,t.data,t.dims)}return r}async lazyResetGrad(){await this.handler.lazyResetGrad()}async runTrainStep(e,r,a){let[t,n]=this.typeNarrowingForRunStep(this.trainingInputNames,this.trainingOutputNames,e,r,a),o=await this.handler.runTrainStep(e,t,n);return this.convertHandlerReturnTypeToMapOfTensors(o)}async runOptimizerStep(e){if(!this.hasOptimizerModel)throw new Error("This TrainingSession has no OptimizerModel loaded.");await this.handler.runOptimizerStep(e||{})}async runEvalStep(e,r,a){if(this.hasEvalModel){let[t,n]=this.typeNarrowingForRunStep(this.evalInputNames,this.evalOutputNames,e,r,a),o=await this.handler.runEvalStep(e,t,n);return this.convertHandlerReturnTypeToMapOfTensors(o)}throw new Error("This TrainingSession has no EvalModel loaded.")}async getParametersSize(e=!0){return this.handler.getParametersSize(e)}async loadParametersBuffer(e,r=!0){let a=await this.getParametersSize(r);if(e.length!==4*a)throw new Error("Size of the buffer passed into loadParametersBuffer must match the number of parameters in the model. Please use getParametersSize method to check.");return this.handler.loadParametersBuffer(e,r)}async getContiguousParameters(e=!0){return this.handler.getContiguousParameters(e)}async release(){return this.handler.dispose()}}})),ie=$((()=>{le(),R=T}));z({},{InferenceSession:()=>U,TRACE:()=>B,TRACE_FUNC_BEGIN:()=>S,TRACE_FUNC_END:()=>_,Tensor:()=>E,TrainingSession:()=>R,env:()=>d,registerBackend:()=>t});var de=$((()=>{H(),V(),ae(),Q(),te(),ne(),ee(),oe(),se(),ie()})),ue=$((()=>{})),ge={};z(ge,{default:()=>ce});var pe,me,ce,fe,he,ye,we,be,Me,Ie,ve,Ge,Ee,Be,ke,Se,_e,Ae,Ue,Te,Re,Ne,Fe,Ce,Oe,Pe,xe,Le,$e,ze,je,De,He,We,Ye,Ve,qe,Je,Ke,Ze,Xe,Qe,er,rr,ar,tr,nr,or,sr,lr,ir,dr,ur,gr,pr,mr,cr,fr,hr,yr,wr,br,Mr,Ir,vr,Gr,Er,Br,kr,Sr,_r,Ar,Ur,Tr=$((()=>{Lr(),Nr(),Rr(),pe="ort-wasm-proxy-worker",(me=globalThis.self?.name===pe)&&(self.onmessage=e=>{let{type:r,in:a}=e.data;try{switch(r){case"init-wasm":Te(a.wasm).then((()=>{Ze(a).then((()=>{postMessage({type:r})}),(e=>{postMessage({type:r,err:e})}))}),(e=>{postMessage({type:r,err:e})}));break;case"init-ep":{let{epName:e,env:t}=a;Xe(t,e).then((()=>{postMessage({type:r})}),(e=>{postMessage({type:r,err:e})}));break}case"copy-from":{let{buffer:e}=a,t=rr(e);postMessage({type:r,out:t});break}case"create":{let{model:e,options:t}=a;ar(e,t).then((e=>{postMessage({type:r,out:e})}),(e=>{postMessage({type:r,err:e})}));break}case"release":tr(a),postMessage({type:r});break;case"run":{let{sessionId:e,inputIndices:t,inputs:n,outputIndices:o,options:s}=a;or(e,t,n,o,new Array(o.length).fill(null),s).then((e=>{e.some((e=>"cpu"!==e[3]))?postMessage({type:r,err:"Proxy does not support non-cpu tensor location."}):postMessage({type:r,out:e},lr([...n,...e]))}),(e=>{postMessage({type:r,err:e})}));break}case"end-profiling":sr(a),postMessage({type:r})}}catch(e){postMessage({type:r,err:e})}}),ce=me?null:e=>new Worker(e??fe,{type:"module",name:pe})})),Rr=$((()=>{ue(),fe="file:///Users/antsav/projects/fenvox/fenvox-readvox/node_modules/onnxruntime-web/dist/ort.wasm.min.mjs",he=typeof location>"u"?void 0:location.origin,ye=(e,r)=>{try{let a=r??fe;return(a?new URL(e,a):new URL(e)).origin===he}catch{return!1}},we=(e,r)=>{let a=r??fe;try{return(a?new URL(e,a):new URL(e)).href}catch{return}},be=(e,r)=>`${r??"./"}${e}`,Me=async e=>{let r=await(await fetch(e,{credentials:"same-origin"})).blob();return URL.createObjectURL(r)},Ie=async e=>(await import(e)).default,ve=(Tr(),j(ge)).default,Ge=async()=>{if(!fe)throw new Error("Failed to load proxy worker: cannot determine the script source URL.");if(ye(fe))return[void 0,ve()];let e=await Me(fe);return[e,ve(e)]},Ee=async(e,r,a)=>{{let t="ort-wasm-simd-threaded.mjs",n=e??we(t,r),o=a&&n&&!ye(n,r),s=o?await Me(n):n??be(t,r);return[o?s:void 0,await Ie(s)]}}})),Nr=$((()=>{Rr(),ke=!1,Se=!1,_e=!1,Ae=()=>{if(typeof SharedArrayBuffer>"u")return!1;try{return typeof MessageChannel<"u"&&(new MessageChannel).port1.postMessage(new SharedArrayBuffer(1)),WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,5,4,1,3,1,1,10,11,1,9,0,65,0,254,16,2,0,26,11]))}catch{return!1}},Ue=()=>{try{return WebAssembly.validate(new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,2,1,0,10,30,1,28,0,65,0,253,15,253,12,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,253,186,1,26,11]))}catch{return!1}},Te=async e=>{if(ke)return Promise.resolve();if(Se)throw new Error("multiple calls to 'initializeWebAssembly()' detected.");if(_e)throw new Error("previous call to 'initializeWebAssembly()' failed.");Se=!0;let r=e.initTimeout,a=e.numThreads;if(!Ue())throw new Error("WebAssembly SIMD is not supported in the current environment.");let t=Ae();a>1&&!t&&(typeof self<"u"&&!self.crossOriginIsolated&&console.warn("env.wasm.numThreads is set to "+a+", but this will not work unless you enable crossOriginIsolated mode. See https://web.dev/cross-origin-isolation-guide/ for more info."),console.warn("WebAssembly multi-threading is not supported in the current environment. Falling back to single-threading."),e.numThreads=a=1);let n=e.wasmPaths,o="string"==typeof n?n:void 0,s=n?.mjs,l=s?.href??s,i=n?.wasm,d=i?.href??i,u=e.wasmBinary,[g,p]=await Ee(l,o,a>1),m=!1,c=[];if(r>0&&c.push(new Promise((e=>{setTimeout((()=>{m=!0,e()}),r)}))),c.push(new Promise(((e,r)=>{let t={numThreads:a};u?t.wasmBinary=u:(d||o)&&(t.locateFile=(e,r)=>d??(o??r)+e),p(t).then((r=>{Se=!1,ke=!0,Be=r,e(),g&&URL.revokeObjectURL(g)}),(e=>{Se=!1,_e=!0,r(e)}))}))),await Promise.race(c),m)throw new Error(`WebAssembly backend initializing failed due to timeout: ${r}ms`)},Re=()=>{if(ke&&Be)return Be;throw new Error("WebAssembly is not initialized yet.")}})),Fr=$((()=>{Nr(),Ne=(e,r)=>{let a=Re(),t=a.lengthBytesUTF8(e)+1,n=a._malloc(t);return a.stringToUTF8(e,n,t),r.push(n),n},Fe=(e,r,a,t)=>{if("object"==typeof e&&null!==e){if(a.has(e))throw new Error("Circular reference in options");a.add(e)}Object.entries(e).forEach((([e,n])=>{let o=r?r+e:e;if("object"==typeof n)Fe(n,o+".",a,t);else if("string"==typeof n||"number"==typeof n)t(o,n.toString());else{if("boolean"!=typeof n)throw new Error("Can't handle extra config type: "+typeof n);t(o,n?"1":"0")}}))},Ce=e=>{let r=Re(),a=r.stackSave();try{let a=r.stackAlloc(8);r._OrtGetLastError(a,a+4);let t=r.HEAP32[a/4],n=r.HEAPU32[a/4+1],o=n?r.UTF8ToString(n):"";throw new Error(`${e} ERROR_CODE: ${t}, ERROR_MESSAGE: ${o}`)}finally{r.stackRestore(a)}}})),Cr=$((()=>{Nr(),Fr(),Oe=e=>{let r=Re(),a=0,t=[],n=e||{};try{if(void 0===e?.logSeverityLevel)n.logSeverityLevel=2;else if("number"!=typeof e.logSeverityLevel||!Number.isInteger(e.logSeverityLevel)||e.logSeverityLevel<0||e.logSeverityLevel>4)throw new Error(`log serverity level is not valid: ${e.logSeverityLevel}`);if(void 0===e?.logVerbosityLevel)n.logVerbosityLevel=0;else if("number"!=typeof e.logVerbosityLevel||!Number.isInteger(e.logVerbosityLevel))throw new Error(`log verbosity level is not valid: ${e.logVerbosityLevel}`);void 0===e?.terminate&&(n.terminate=!1);let o=0;return void 0!==e?.tag&&(o=Ne(e.tag,t)),a=r._OrtCreateRunOptions(n.logSeverityLevel,n.logVerbosityLevel,!!n.terminate,o),0===a&&Ce("Can't create run options."),void 0!==e?.extra&&Fe(e.extra,"",new WeakSet,((e,n)=>{let o=Ne(e,t),s=Ne(n,t);0!==r._OrtAddRunConfigEntry(a,o,s)&&Ce(`Can't set a run config entry: ${e} - ${n}.`)})),[a,t]}catch(e){throw 0!==a&&r._OrtReleaseRunOptions(a),t.forEach((e=>r._free(e))),e}}})),Or=$((()=>{Nr(),Fr(),Pe=e=>{switch(e){case"disabled":return 0;case"basic":return 1;case"extended":return 2;case"all":return 99;default:throw new Error(`unsupported graph optimization level: ${e}`)}},xe=e=>{switch(e){case"sequential":return 0;case"parallel":return 1;default:throw new Error(`unsupported execution mode: ${e}`)}},Le=e=>{e.extra||(e.extra={}),e.extra.session||(e.extra.session={});let r=e.extra.session;r.use_ort_model_bytes_directly||(r.use_ort_model_bytes_directly="1"),e.executionProviders&&e.executionProviders.some((e=>"webgpu"===("string"==typeof e?e:e.name)))&&(e.enableMemPattern=!1)},$e=(e,r,a)=>{for(let t of r){let r="string"==typeof t?t:t.name;switch(r){case"webnn":if(r="WEBNN","string"!=typeof t){let r=t?.deviceType;if(r){let t=Ne("deviceType",a),n=Ne(r,a);0!==Re()._OrtAddSessionConfigEntry(e,t,n)&&Ce(`Can't set a session config entry: 'deviceType' - ${r}.`)}}break;case"webgpu":if(r="JS","string"!=typeof t){let r=t;if(r?.preferredLayout){if("NCHW"!==r.preferredLayout&&"NHWC"!==r.preferredLayout)throw new Error(`preferredLayout must be either 'NCHW' or 'NHWC': ${r.preferredLayout}`);let t=Ne("preferredLayout",a),n=Ne(r.preferredLayout,a);0!==Re()._OrtAddSessionConfigEntry(e,t,n)&&Ce(`Can't set a session config entry: 'preferredLayout' - ${r.preferredLayout}.`)}}break;case"wasm":case"cpu":continue;default:throw new Error(`not supported execution provider: ${r}`)}let n=Ne(r,a);0!==Re()._OrtAppendExecutionProvider(e,n)&&Ce(`Can't append execution provider: ${r}.`)}},ze=e=>{let r=Re(),a=0,t=[],n=e||{};Le(n);try{let e=Pe(n.graphOptimizationLevel??"all"),o=xe(n.executionMode??"sequential"),s="string"==typeof n.logId?Ne(n.logId,t):0,l=n.logSeverityLevel??2;if(!Number.isInteger(l)||l<0||l>4)throw new Error(`log serverity level is not valid: ${l}`);let i=n.logVerbosityLevel??0;if(!Number.isInteger(i)||i<0||i>4)throw new Error(`log verbosity level is not valid: ${i}`);let d="string"==typeof n.optimizedModelFilePath?Ne(n.optimizedModelFilePath,t):0;if(a=r._OrtCreateSessionOptions(e,!!n.enableCpuMemArena,!!n.enableMemPattern,o,!!n.enableProfiling,0,s,l,i,d),0===a&&Ce("Can't create session options."),n.executionProviders&&$e(a,n.executionProviders,t),void 0!==n.enableGraphCapture){if("boolean"!=typeof n.enableGraphCapture)throw new Error(`enableGraphCapture must be a boolean value: ${n.enableGraphCapture}`);let e=Ne("enableGraphCapture",t),o=Ne(n.enableGraphCapture.toString(),t);0!==r._OrtAddSessionConfigEntry(a,e,o)&&Ce(`Can't set a session config entry: 'enableGraphCapture' - ${n.enableGraphCapture}.`)}if(n.freeDimensionOverrides)for(let[e,o]of Object.entries(n.freeDimensionOverrides)){if("string"!=typeof e)throw new Error(`free dimension override name must be a string: ${e}`);if("number"!=typeof o||!Number.isInteger(o)||o<0)throw new Error(`free dimension override value must be a non-negative integer: ${o}`);let n=Ne(e,t);0!==r._OrtAddFreeDimensionOverride(a,n,o)&&Ce(`Can't set a free dimension override: ${e} - ${o}.`)}return void 0!==n.extra&&Fe(n.extra,"",new WeakSet,((e,n)=>{let o=Ne(e,t),s=Ne(n,t);0!==r._OrtAddSessionConfigEntry(a,o,s)&&Ce(`Can't set a session config entry: ${e} - ${n}.`)})),[a,t]}catch(e){throw 0!==a&&r._OrtReleaseSessionOptions(a),t.forEach((e=>r._free(e))),e}}})),Pr=$((()=>{je=e=>{switch(e){case"int8":return 3;case"uint8":return 2;case"bool":return 9;case"int16":return 5;case"uint16":return 4;case"int32":return 6;case"uint32":return 12;case"float16":return 10;case"float32":return 1;case"float64":return 11;case"string":return 8;case"int64":return 7;case"uint64":return 13;default:throw new Error(`unsupported data type: ${e}`)}},De=e=>{switch(e){case 3:return"int8";case 2:return"uint8";case 9:return"bool";case 5:return"int16";case 4:return"uint16";case 6:return"int32";case 12:return"uint32";case 10:return"float16";case 1:return"float32";case 11:return"float64";case 8:return"string";case 7:return"int64";case 13:return"uint64";default:throw new Error(`unsupported data type: ${e}`)}},He=e=>[void 0,4,1,1,2,2,4,8,void 0,1,2,8,4,8,void 0,void 0,void 0][e],We=e=>{switch(e){case"float16":return typeof Float16Array<"u"&&Float16Array.from?Float16Array:Uint16Array;case"float32":return Float32Array;case"uint8":case"bool":return Uint8Array;case"int8":return Int8Array;case"uint16":return Uint16Array;case"int16":return Int16Array;case"int32":return Int32Array;case"float64":return Float64Array;case"uint32":return Uint32Array;case"int64":return BigInt64Array;case"uint64":return BigUint64Array;default:throw new Error(`unsupported type: ${e}`)}},Ye=e=>{switch(e){case"verbose":return 0;case"info":return 1;case"warning":return 2;case"error":return 3;case"fatal":return 4;default:throw new Error(`unsupported logging level: ${e}`)}},Ve=e=>"float32"===e||"float16"===e||"int32"===e||"int64"===e||"uint32"===e||"uint8"===e||"bool"===e,qe=e=>{switch(e){case"none":return 0;case"cpu":return 1;case"cpu-pinned":return 2;case"texture":return 3;case"gpu-buffer":return 4;default:throw new Error(`unsupported data location: ${e}`)}}})),xr=$((()=>{ue(),Je=async e=>{if("string"==typeof e){let r=await fetch(e);if(!r.ok)throw new Error(`failed to load external data file: ${e}`);let a=r.headers.get("Content-Length"),t=a?parseInt(a,10):0;if(t<1073741824)return new Uint8Array(await r.arrayBuffer());{if(!r.body)throw new Error(`failed to load external data file: ${e}, no response body.`);let a,n=r.body.getReader();try{a=new ArrayBuffer(t)}catch(e){if(!(e instanceof RangeError))throw e;{let e=Math.ceil(t/65536);a=new WebAssembly.Memory({initial:e,maximum:e}).buffer}}let o=0;for(;;){let{done:e,value:r}=await n.read();if(e)break;let t=r.byteLength;new Uint8Array(a,o,t).set(r),o+=t}return new Uint8Array(a,0,t)}}return e instanceof Blob?new Uint8Array(await e.arrayBuffer()):e instanceof Uint8Array?e:new Uint8Array(e)}})),Lr=$((()=>{Cr(),Or(),Pr(),Nr(),Fr(),xr(),Ke=(e,r)=>{0!==Re()._OrtInit(e,r)&&Ce("Can't initialize onnxruntime.")},Ze=async e=>{Ke(e.wasm.numThreads,Ye(e.logLevel))},Xe=async(e,r)=>{},Qe=new Map,er=e=>{let r=Re(),a=r.stackSave();try{let a=r.stackAlloc(8);return 0!==r._OrtGetInputOutputCount(e,a,a+4)&&Ce("Can't get session input/output count."),[r.HEAP32[a/4],r.HEAP32[a/4+1]]}finally{r.stackRestore(a)}},rr=e=>{let r=Re(),a=r._malloc(e.byteLength);if(0===a)throw new Error(`Can't create a session. failed to allocate a buffer of size ${e.byteLength}.`);return r.HEAPU8.set(e,a),[a,e.byteLength]},ar=async(e,r)=>{let a,t,n=Re();Array.isArray(e)?[a,t]=e:e.buffer===n.HEAPU8.buffer?[a,t]=[e.byteOffset,e.byteLength]:[a,t]=rr(e);let o=0,s=0,l=[],i=[],d=[];try{if([s,l]=ze(r),r?.externalData&&n.mountExternalData){let e=[];for(let a of r.externalData){let r="string"==typeof a?a:a.path;e.push(Je("string"==typeof a?a:a.data).then((e=>{n.mountExternalData(r,e)})))}await Promise.all(e)}for(let e of r?.executionProviders??[])if("webnn"===("string"==typeof e?e:e.name)){if(n.currentContext)throw new Error("WebNN execution provider is already set.");if("string"!=typeof e){let r=e,a=r?.context,t=r?.gpuDevice,o=r?.deviceType,s=r?.numThreads,l=r?.powerPreference;n.currentContext=a||(t?await navigator.ml.createContext(t):await navigator.ml.createContext({deviceType:o,numThreads:s,powerPreference:l}))}else n.currentContext=await navigator.ml.createContext();break}o=await n._OrtCreateSession(a,t,s),0===o&&Ce("Can't create a session."),n.currentContext&&(n.currentContext=void 0);let[e,u]=er(o),g=!!r?.enableGraphCapture,p=[],m=[];for(let r=0;r<e;r++){let e=n._OrtGetInputName(o,r);0===e&&Ce("Can't get an input name."),i.push(e),p.push(n.UTF8ToString(e))}for(let e=0;e<u;e++){let r=n._OrtGetOutputName(o,e);0===r&&Ce("Can't get an output name."),d.push(r);let a=n.UTF8ToString(r);m.push(a)}let c=null;return Qe.set(o,[o,i,d,c,g,!1]),[o,p,m]}catch(e){throw i.forEach((e=>n._OrtFree(e))),d.forEach((e=>n._OrtFree(e))),0!==o&&n._OrtReleaseSession(o),e}finally{n._free(a),0!==s&&n._OrtReleaseSessionOptions(s),l.forEach((e=>n._free(e))),n.unmountExternalData?.()}},tr=e=>{let r=Re(),a=Qe.get(e);if(!a)throw new Error(`cannot release session. invalid session id: ${e}`);let[t,n,o,s,l]=a;s&&(l&&r._OrtClearBoundOutputs(s.handle),r._OrtReleaseBinding(s.handle)),r.jsepOnReleaseSession?.(e),n.forEach((e=>r._OrtFree(e))),o.forEach((e=>r._OrtFree(e))),r._OrtReleaseSession(t),Qe.delete(e)},nr=(e,r,a,t,n,o=!1)=>{if(!e)return void r.push(0);let s,l,i=Re(),d=e[0],u=e[1],g=e[3];if("string"===d&&"gpu-buffer"===g)throw new Error("String tensor is not supported on GPU.");if(o&&"gpu-buffer"!==g)throw new Error(`External buffer must be provided for input/output index ${n} when enableGraphCapture is true.`);if("gpu-buffer"===g){let r=e[2].gpuBuffer,a=He(je(d));l=u.reduce(((e,r)=>e*r),1)*a;let o=i.jsepRegisterBuffer;if(!o)throw new Error('Tensor location "gpu-buffer" is not supported without using WebGPU.');s=o(t,n,r,l)}else{let r=e[2];if(Array.isArray(r)){l=4*r.length,s=i._malloc(l),a.push(s);let e=s/4;for(let t=0;t<r.length;t++){if("string"!=typeof r[t])throw new TypeError(`tensor data at index ${t} is not a string`);i.HEAPU32[e++]=Ne(r[t],a)}}else l=r.byteLength,s=i._malloc(l),a.push(s),i.HEAPU8.set(new Uint8Array(r.buffer,r.byteOffset,l),s)}let p=i.stackSave(),m=i.stackAlloc(4*u.length);try{let e=m/4;u.forEach((r=>i.HEAP32[e++]=r));let a=i._OrtCreateTensor(je(d),s,l,m,u.length,qe(g));0===a&&Ce(`Can't create tensor for input/output. session=${t}, index=${n}.`),r.push(a)}finally{i.stackRestore(p)}},or=async(e,r,a,t,n,o)=>{let s=Re(),l=Qe.get(e);if(!l)throw new Error(`cannot run inference. invalid session id: ${e}`);let i=l[0],d=l[1],u=l[2],g=l[3],p=l[4],m=(l[5],r.length),c=t.length,f=0,h=[],y=[],w=[],b=[],M=s.stackSave(),I=s.stackAlloc(4*m),v=s.stackAlloc(4*m),G=s.stackAlloc(4*c),E=s.stackAlloc(4*c);try{[f,h]=Oe(o);for(let t=0;t<m;t++)nr(a[t],y,b,e,r[t],p);for(let r=0;r<c;r++)nr(n[r],w,b,e,m+t[r],p);let l,M=I/4,B=v/4,k=G/4,S=E/4;for(let e=0;e<m;e++)s.HEAPU32[M++]=y[e],s.HEAPU32[B++]=d[r[e]];for(let e=0;e<c;e++)s.HEAPU32[k++]=w[e],s.HEAPU32[S++]=u[t[e]];s.jsepOnRunStart?.(i),l=await s._OrtRun(i,v,I,m,E,c,G,f),0!==l&&Ce("failed to call OrtRun().");let _=[];for(let e=0;e<c;e++){let r=s.HEAPU32[G/4+e];if(r===w[e]){_.push(n[e]);continue}let a,o=s.stackSave(),l=s.stackAlloc(16),i=!1,d=0;try{0!==s._OrtGetTensorData(r,l,l+4,l+8,l+12)&&Ce(`Can't access output tensor data on index ${e}.`);let n=l/4,o=s.HEAPU32[n++];d=s.HEAPU32[n++];let u=s.HEAPU32[n++],p=s.HEAPU32[n++],m=[];for(let e=0;e<p;e++)m.push(s.HEAPU32[u/4+e]);s._OrtFree(u);let c=m.reduce(((e,r)=>e*r),1);a=De(o);let f=g?.outputPreferredLocations[t[e]];if("string"===a){if("gpu-buffer"===f)throw new Error("String tensor is not supported on GPU.");let e=[],r=d/4;for(let a=0;a<c;a++){let t=s.HEAPU32[r++],n=a===c-1?void 0:s.HEAPU32[r]-t;e.push(s.UTF8ToString(t,n))}_.push([a,m,e,"cpu"])}else if("gpu-buffer"===f&&c>0){let e=s.jsepGetBuffer;if(!e)throw new Error('preferredLocation "gpu-buffer" is not supported without using WebGPU.');let t=e(d),n=He(o);if(void 0===n||!Ve(a))throw new Error(`Unsupported data type: ${a}`);i=!0,_.push([a,m,{gpuBuffer:t,download:s.jsepCreateDownloader(t,c*n,a),dispose:()=>{s._OrtReleaseTensor(r)}},"gpu-buffer"])}else{let e=new(We(a))(c);new Uint8Array(e.buffer,e.byteOffset,e.byteLength).set(s.HEAPU8.subarray(d,d+e.byteLength)),_.push([a,m,e,"cpu"])}}finally{s.stackRestore(o),"string"===a&&d&&s._free(d),i||s._OrtReleaseTensor(r)}}return g&&!p&&(s._OrtClearBoundOutputs(g.handle),Qe.set(e,[i,d,u,g,p,!1])),_}finally{s.stackRestore(M),y.forEach((e=>s._OrtReleaseTensor(e))),w.forEach((e=>s._OrtReleaseTensor(e))),b.forEach((e=>s._free(e))),0!==f&&s._OrtReleaseRunOptions(f),h.forEach((e=>s._free(e)))}},sr=e=>{let r=Re(),a=Qe.get(e);if(!a)throw new Error("invalid session id");let t=a[0],n=r._OrtEndProfiling(t);0===n&&Ce("Can't get an profile file name."),r._OrtFree(n)},lr=e=>{let r=[];for(let a of e){let e=a[2];!Array.isArray(e)&&"buffer"in e&&r.push(e.buffer)}return r}})),$r=$((()=>{de(),Lr(),Nr(),Rr(),ir=()=>!!d.wasm.proxy&&typeof document<"u",ur=!1,gr=!1,pr=!1,fr=new Map,hr=(e,r)=>{let a=fr.get(e);a?a.push(r):fr.set(e,[r])},yr=()=>{if(ur||!gr||pr||!dr)throw new Error("worker not ready")},wr=e=>{switch(e.data.type){case"init-wasm":ur=!1,e.data.err?(pr=!0,cr[1](e.data.err)):(gr=!0,cr[0]()),mr&&(URL.revokeObjectURL(mr),mr=void 0);break;case"init-ep":case"copy-from":case"create":case"release":case"run":case"end-profiling":{let r=fr.get(e.data.type);e.data.err?r.shift()[1](e.data.err):r.shift()[0](e.data.out);break}}},br=async()=>{if(!gr){if(ur)throw new Error("multiple calls to 'initWasm()' detected.");if(pr)throw new Error("previous call to 'initWasm()' failed.");if(ur=!0,ir())return new Promise(((e,r)=>{dr?.terminate(),Ge().then((([a,t])=>{try{(dr=t).onerror=e=>r(e),dr.onmessage=wr,cr=[e,r];let n={type:"init-wasm",in:d};dr.postMessage(n),mr=a}catch(e){r(e)}}),r)}));try{await Te(d.wasm),await Ze(d),gr=!0}catch(e){throw pr=!0,e}finally{ur=!1}}},Mr=async e=>{if(ir())return yr(),new Promise(((r,a)=>{hr("init-ep",[r,a]);let t={type:"init-ep",in:{epName:e,env:d}};dr.postMessage(t)}));await Xe(d,e)},Ir=async e=>ir()?(yr(),new Promise(((r,a)=>{hr("copy-from",[r,a]);let t={type:"copy-from",in:{buffer:e}};dr.postMessage(t,[e.buffer])}))):rr(e),vr=async(e,r)=>{if(ir()){if(r?.preferredOutputLocation)throw new Error('session option "preferredOutputLocation" is not supported for proxy.');return yr(),new Promise(((a,t)=>{hr("create",[a,t]);let n={type:"create",in:{model:e,options:{...r}}},o=[];e instanceof Uint8Array&&o.push(e.buffer),dr.postMessage(n,o)}))}return ar(e,r)},Gr=async e=>{if(ir())return yr(),new Promise(((r,a)=>{hr("release",[r,a]);let t={type:"release",in:e};dr.postMessage(t)}));tr(e)},Er=async(e,r,a,t,n,o)=>{if(ir()){if(a.some((e=>"cpu"!==e[3])))throw new Error("input tensor on GPU is not supported for proxy.");if(n.some((e=>e)))throw new Error("pre-allocated output tensor is not supported for proxy.");return yr(),new Promise(((n,s)=>{hr("run",[n,s]);let l=a,i={type:"run",in:{sessionId:e,inputIndices:r,inputs:l,outputIndices:t,options:o}};dr.postMessage(i,lr(l))}))}return or(e,r,a,t,n,o)},Br=async e=>{if(ir())return yr(),new Promise(((r,a)=>{hr("end-profiling",[r,a]);let t={type:"end-profiling",in:e};dr.postMessage(t)}));sr(e)}})),zr=$((()=>{de(),$r(),Pr(),ue(),xr(),kr=(e,r)=>{switch(e.location){case"cpu":return[e.type,e.dims,e.data,"cpu"];case"gpu-buffer":return[e.type,e.dims,{gpuBuffer:e.gpuBuffer},"gpu-buffer"];default:throw new Error(`invalid data location: ${e.location} for ${r()}`)}},Sr=e=>{switch(e[3]){case"cpu":return new E(e[0],e[2],e[1]);case"gpu-buffer":{let r=e[0];if(!Ve(r))throw new Error(`not supported data type: ${r} for deserializing GPU tensor`);let{gpuBuffer:a,download:t,dispose:n}=e[2];return E.fromGpuBuffer(a,{dataType:r,dims:e[1],download:t,dispose:n})}default:throw new Error(`invalid data location: ${e[3]}`)}},_r=class{async fetchModelAndCopyToWasmMemory(e){return Ir(await Je(e))}async loadModel(e,r){let a;S(),a="string"==typeof e?await this.fetchModelAndCopyToWasmMemory(e):e,[this.sessionId,this.inputNames,this.outputNames]=await vr(a,r),_()}async dispose(){return Gr(this.sessionId)}async run(e,r,a){S();let t=[],n=[];Object.entries(e).forEach((e=>{let r=e[0],a=e[1],o=this.inputNames.indexOf(r);if(-1===o)throw new Error(`invalid input '${r}'`);t.push(a),n.push(o)}));let o=[],s=[];Object.entries(r).forEach((e=>{let r=e[0],a=e[1],t=this.outputNames.indexOf(r);if(-1===t)throw new Error(`invalid output '${r}'`);o.push(a),s.push(t)}));let l=t.map(((e,r)=>kr(e,(()=>`input "${this.inputNames[n[r]]}"`)))),i=o.map(((e,r)=>e?kr(e,(()=>`output "${this.outputNames[s[r]]}"`)):null)),d=await Er(this.sessionId,n,l,s,i,a),u={};for(let e=0;e<d.length;e++)u[this.outputNames[s[e]]]=o[e]??Sr(d[e]);return _(),u}startProfiling(){}endProfiling(){Br(this.sessionId)}}})),jr=$((()=>{de(),$r(),zr(),Rr(),Ar=()=>{if(("number"!=typeof d.wasm.initTimeout||d.wasm.initTimeout<0)&&(d.wasm.initTimeout=0),!1===d.wasm.simd&&console.warn('Deprecated property "env.wasm.simd" is set to false. non-SIMD build is no longer provided, and this setting will be ignored.'),"boolean"!=typeof d.wasm.proxy&&(d.wasm.proxy=!1),"boolean"!=typeof d.wasm.trace&&(d.wasm.trace=!1),"number"!=typeof d.wasm.numThreads||!Number.isInteger(d.wasm.numThreads)||d.wasm.numThreads<=0)if(typeof self<"u"&&!self.crossOriginIsolated)d.wasm.numThreads=1;else{let e=typeof navigator>"u"?L("node:os").cpus().length:navigator.hardwareConcurrency;d.wasm.numThreads=Math.min(4,Math.ceil((e||1)/2))}void 0===d.wasm.wasmPaths&&fe&&0!==fe.indexOf("blob:")&&(d.wasm.wasmPaths=fe.substring(0,fe.lastIndexOf("/")+1))},Ur=class{async init(e){Ar(),await br(),await Mr(e)}async createInferenceSessionHandler(e,r){let a=new _r;return await a.loadModel(e,r),Promise.resolve(a)}}})),Dr={};z(Dr,{wasmBackend:()=>Hr});var Hr,Wr=$((()=>{jr(),Hr=new Ur}));de(),de(),de();{let e=(Wr(),j(Dr)).wasmBackend;t("cpu",e,10),t("wasm",e,10)}Object.defineProperty(d.versions,"web",{value:"1.19.2",enumerable:!0});var Yr=function e(r){var a=F[r];if(void 0!==a)return a.exports;var t=F[r]={exports:{}};return N[r].call(t.exports,t,t.exports,e),t.exports}(854);const Vr=Yr.expose,qr=(Yr.registerSerializer,Yr.Transfer,[{age:"Young",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Aiva",score:10,speakerId:0,speed:"Fast",tone:"Soft"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Josh",speakerId:7,speed:"Slow",tone:"Soft"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Frank",speakerId:106,speed:"Slow",tone:"Calm"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:3.2,modelId:"en_US/model2",name:"Grace",speakerId:null,speed:"Normal",tone:"Upbeat"},{age:"Young",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Keith",speakerId:110,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Nate",speakerId:16,speed:"Normal",tone:"Calm"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:1.8,modelId:"en_US/model5",name:"Claire",score:7,speakerId:5,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:1.8,modelId:"en_US/model5",name:"Mitchell",score:9,speakerId:8,speed:"Normal",tone:"Breathy"},{age:"Young",gender:"Female",geo:"American",language:"en-US",localModelGain:1.8,modelId:"en_US/model5",name:"Hailey",score:7,speakerId:16,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Male",geo:"Indian",language:"en-US",localModelGain:1.8,modelId:"en_US/model5",name:"Sujay",score:8,speakerId:17,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Male",geo:"American",language:"en-US",localModelGain:3,modelId:"en_US/model6",name:"Adam",score:7,speakerId:null,speed:"Fast",tone:"Raspy"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:5.2,modelId:"en_US/model7",name:"Lydia",score:7,speakerId:null,speed:"Slow",tone:"Breathy"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:2.3,modelId:"en_US/model8",name:"Vera",score:9,speakerId:null,speed:"Slow",tone:"Hard"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:2.3,modelId:"en_US/model9",name:"Saylor",score:8,speakerId:null,speed:"Normal",tone:"Gritty"},{age:"Young",gender:"Male",geo:"American",language:"en-US",localModelGain:1.6,modelId:"en_US/model10",name:"Joe",score:6,speakerId:null,speed:"Fast",tone:"Upbeat"},{age:"Young",gender:"Male",geo:"American",language:"en-US",localModelGain:1.8,modelId:"en_US/model5",name:"Davin",score:7,speakerId:7,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Male",geo:"Indian",language:"en-US",localModelGain:1.8,modelId:"en_US/model5",name:"Rana",score:7,speakerId:3,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Sarah",speakerId:120,speed:"Slow",tone:"Soft"},{age:"Young",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Lia",speakerId:115,speed:"Normal",tone:"Calm"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Chase",speakerId:19,speed:"Fast",tone:"Raspy"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Nora",speakerId:25,speed:"Normal",tone:"Whiny"},{age:"Young",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Flint",speakerId:52,speed:"Normal",tone:"Soft"},{age:"Young",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Dylan",speakerId:68,speed:"Normal",tone:"Breathy"},{age:"Young",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Kylee",speakerId:107,speed:"Fast",tone:"Excited"},{age:"Young",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Steve",speakerId:89,speed:"Fast",tone:"Calm"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Avery",speakerId:74,speed:"Fast",tone:"Breathy"},{age:"Young",gender:"Female",geo:"Indian",language:"en-US",localModelGain:1.8,modelId:"en_US/model5",name:"Aditi",score:8,speakerId:4,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Gary",speakerId:119,speed:"Normal",tone:"Upbeat"},{age:"Young",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Mia",speakerId:15,speed:"Normal",tone:"Breathy"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Larry",speakerId:104,speed:"Normal",tone:"Hard"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Zoe",speakerId:12,speed:"Normal",tone:"Hard"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"James",speakerId:86,speed:"Fast",tone:"Calm"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Chris",speakerId:72,speed:"Slow",tone:"Calm"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Dana",speakerId:98,speed:"Slow",tone:"Breathy"},{age:"Young",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model0",name:"Anna",speakerId:18,speed:"Normal",tone:"Soft"},{age:"Young",gender:"Female",geo:"American",language:"en-US",localModelGain:1.6,modelId:"en_US/model1",name:"Marla",speakerId:null,speed:"Slow",tone:"Soft"},{age:"Mature",gender:"Male",geo:"Indian",language:"en-US",localModelGain:2.3,modelId:"en_US/model5",name:"Ashwin",score:8,speakerId:13,speed:"Fast",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"American",language:"en-US",localModelGain:2,modelId:"en_US/model3",name:"Roy",speakerId:null,speed:"Slow",tone:"Raspy"},{age:"Mature",gender:"Female",geo:"American",language:"en-US",localModelGain:1.4,modelId:"en_US/model4",name:"Ruth",speakerId:null,speed:"Normal",tone:"Hard"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:6,modelId:"en_GB/model7",name:"Poppy",score:9,speakerId:51,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Piper",score:9,speakerId:30,speed:"Fast",tone:"Soft"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:2.5,modelId:"en_GB/model7",name:"Arthur",score:9,speakerId:38,speed:"Normal",tone:"Calm"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:6,modelId:"en_GB/model7",name:"Nigel",score:9,speakerId:50,speed:"Fast",tone:"Calm"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Gus",score:9,speakerId:76,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Hugh",score:9,speakerId:96,speed:"Normal",tone:"Breathy"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:5.5,modelId:"en_GB/model7",name:"Ivy",score:9,speakerId:99,speed:"Normal",tone:"Soft"},{age:"Young",gender:"Male",geo:"British",language:"en-GB",localModelGain:2.5,modelId:"en_GB/model7",name:"Zack",score:8,speakerId:5,speed:"Normal",tone:"Gritty"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:4,modelId:"en_GB/model7",name:"Aria",score:8,speakerId:11,speed:"Normal",tone:"Breathy"},{age:"Young",gender:"Male",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Finn",score:8,speakerId:20,speed:"Normal",tone:"Calm"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:3,modelId:"en_GB/model7",name:"Rupert",score:8,speakerId:23,speed:"Normal",tone:"Gritty"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:3,modelId:"en_GB/model7",name:"Thomas",score:8,speakerId:28,speed:"Normal",tone:"Calm"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:7,modelId:"en_GB/model7",name:"Fiona",score:8,speakerId:34,speed:"Fast",tone:"Gritty"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Lily",score:8,speakerId:35,speed:"Normal",tone:"Breathy"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Ruby",score:8,speakerId:37,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Margaret",score:8,speakerId:39,speed:"Normal",tone:"Raspy"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:2.2,modelId:"en_GB/model7",name:"Jasmine",score:8,speakerId:45,speed:"Normal",tone:"Calm"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:6,modelId:"en_GB/model7",name:"Wendy",score:8,speakerId:46,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:4,modelId:"en_GB/model7",name:"Susan",score:8,speakerId:54,speed:"Normal",tone:"Breathy"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:5,modelId:"en_GB/model7",name:"George",score:8,speakerId:61,speed:"Normal",tone:"Soft"},{age:"Young",gender:"Male",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Callum",score:8,speakerId:62,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:1.4,modelId:"en_GB/model0",name:"Elwood",score:8,speakerId:null,speed:"Slow",tone:"Raspy"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:3,modelId:"en_GB/model1",name:"Arlene",score:8,speakerId:null,speed:"Normal",tone:"Breathy"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:12,modelId:"en_GB/model2",name:"Hazelt",score:8,speakerId:0,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:12,modelId:"en_GB/model2",name:"Lester",score:8,speakerId:1,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:10,modelId:"en_GB/model2",name:"Carvert",score:8,speakerId:2,speed:"Fast",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:10,modelId:"en_GB/model2",name:"Wilfred",score:8,speakerId:3,speed:"Slow",tone:"Raspy"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:10,modelId:"en_GB/model2",name:"Violet",score:8,speakerId:4,speed:"Slow",tone:"Breathy"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:10,modelId:"en_GB/model2",name:"Juliet",score:8,speakerId:5,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:8,modelId:"en_GB/model2",name:"Reed",score:8,speakerId:8,speed:"Fast",tone:"Hard"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:9,modelId:"en_GB/model2",name:"Edric",score:8,speakerId:9,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:10,modelId:"en_GB/model2",name:"Harriet",score:8,speakerId:10,speed:"Fast",tone:"Upbeat"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:10,modelId:"en_GB/model2",name:"Janet",score:8,speakerId:11,speed:"Normal",tone:"Calm"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:3.8,modelId:"en_GB/model3",name:"Lorna",score:8,speakerId:null,speed:"Normal",tone:"Breathy"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:4,modelId:"en_GB/model4",name:"Sophie",score:8,speakerId:null,speed:"Slow",tone:"Gritty"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:1.4,modelId:"en_GB/model5",name:"Edwin",score:8,speakerId:null,speed:"Normal",tone:"Monotone"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:5,modelId:"en_GB/model6",name:"June",score:8,speakerId:0,speed:"Normal",tone:"Excited"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model6",name:"Briggs",score:8,speakerId:1,speed:"Normal",tone:"Hard"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:3,modelId:"en_GB/model6",name:"Felicity",score:8,speakerId:3,speed:"Fast",tone:"Upbeat"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:4.3,modelId:"en_GB/model6",name:"Holden",score:8,speakerId:2,speed:"Slow",tone:"Soft"},{age:"Young",gender:"Male",geo:"British",language:"en-GB",localModelGain:3,modelId:"en_GB/model7",name:"Axel",score:8,speakerId:69,speed:"Fast",tone:"Gritty"},{age:"Young",gender:"Male",geo:"British",language:"en-GB",localModelGain:2.5,modelId:"en_GB/model7",name:"Zane",score:8,speakerId:70,speed:"Fast",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:5,modelId:"en_GB/model7",name:"Cliff",score:8,speakerId:71,speed:"Normal",tone:"Hard"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:3,modelId:"en_GB/model7",name:"Iris",score:8,speakerId:80,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Sky",score:8,speakerId:85,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:2.5,modelId:"en_GB/model7",name:"Lena",score:8,speakerId:89,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Female",geo:"British",language:"en-GB",localModelGain:3.5,modelId:"en_GB/model7",name:"Chloe",score:8,speakerId:94,speed:"Normal",tone:"Calm"},{age:"Mature",gender:"Male",geo:"British",language:"en-GB",localModelGain:2.5,modelId:"en_GB/model7",name:"Alec",score:8,speakerId:95,speed:"Slow",tone:"Breathy"},{age:"Mature",gender:"Female",geo:"British",language:"en-GB",localModelGain:3,modelId:"en_GB/model7",name:"Daphne",score:8,speakerId:103,speed:"Normal",tone:"Whiny"},{age:"Young",gender:"Male",geo:"British",language:"en-GB",localModelGain:3,modelId:"en_GB/model7",name:"Jett",score:8,speakerId:105,speed:"Fast",tone:"Gritty"},{age:"Mature",gender:"Female",geo:"Spain",language:"es-ES",localModelGain:3.5,modelId:"es_ES/model2",name:"Rosa",score:9,speakerId:1,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Male",geo:"Spain",language:"es-ES",localModelGain:2.3,modelId:"es_ES/model2",name:"Fernando",score:9,speakerId:0,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Male",geo:"Spain",language:"es-ES",localModelGain:2.3,modelId:"es_ES/model0",name:"Javier",score:5,speakerId:null,speed:"Fast",tone:"Soft"},{age:"Mature",gender:"Male",geo:"Spain",language:"es-ES",localModelGain:1,modelId:"es_ES/model1",name:"Alberto",score:5,speakerId:null,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Female",geo:"Spain",language:"es-MX",localModelGain:2,modelId:"es_MX/model1",name:"Adriana",score:9,speakerId:null,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Male",geo:"Spain",language:"es-MX",localModelGain:1.4,modelId:"es_MX/model0",name:"Pedro",score:9,speakerId:null,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Female",geo:"French",language:"fr-FR",localModelGain:2.3,modelId:"fr_FR/model2",name:"Brune",score:7,speakerId:null,speed:"Fast",tone:"Upbeat"},{age:"Mature",gender:"Male",geo:"French",language:"fr-FR",localModelGain:3,modelId:"fr_FR/model1",name:"Valentin",score:8,speakerId:null,speed:"Slow",tone:"Gritty"},{age:"Young",gender:"Female",geo:"French",language:"fr-FR",localModelGain:2.5,modelId:"fr_FR/model3",name:"Noëlle",score:6,speakerId:0,speed:"Normal",tone:"Upbeat"},{age:"Young",gender:"Male",geo:"French",language:"fr-FR",localModelGain:2.1,modelId:"fr_FR/model3",name:"Claude",score:6,speakerId:1,speed:"Normal",tone:"Raspy"},{age:"Young",gender:"Male",geo:"French",language:"pt-BR",localModelGain:2,modelId:"pt_BR/model0",name:"Rafael",score:8,speakerId:null,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"Germany",language:"de-DE",localModelGain:2.7,modelId:"de_DE/model0",name:"Klaus",score:8,speakerId:null,speed:"Fast",tone:"Calm"},{age:"Mature",gender:"Male",geo:"Germany",language:"de-DE",localModelGain:3.5,modelId:"de_DE/model2",name:"Holger",score:7,speakerId:null,speed:"Normal",tone:"Soft"},{age:"Mature",gender:"Female",geo:"Germany",language:"de-DE",localModelGain:2.2,modelId:"de_DE/model3",name:"Berit",score:7,speakerId:null,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Male",geo:"Germany",language:"de-DE",localModelGain:7,modelId:"de_DE/model4",name:"Sven",score:7,speakerId:null,speed:"Normal",tone:"Raspy"},{age:"Young",gender:"Male",geo:"Russia",language:"ru-RU",localModelGain:3,modelId:"ru_RU/model0",name:"Artyom",nativeName:"Артём",score:8,speakerId:null,speed:"Normal",tone:"Gritty"},{age:"Mature",gender:"Female",geo:"Russia",language:"ru-RU",localModelGain:1,modelId:"ru_RU/model1",name:"Valentina",nativeName:"Валентина",score:6,speakerId:null,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Male",geo:"Russia",language:"ru-RU",localModelGain:1,modelId:"ru_RU/model2",name:"Nikolai",nativeName:"Николай",score:6,speakerId:null,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"Russia",language:"ru-RU",localModelGain:1,modelId:"ru_RU/model3",name:"Pavel",nativeName:"Павел",score:6,speakerId:null,speed:"Normal",tone:"Gritty"},{speakerId:null,name:"Yue",nativeName:"月",score:8,gender:"Female",age:"Young",speed:"Normal",tone:"Calm",geo:"China",language:"zh-CN",modelId:"zh_CN/model0",localModelGain:1},{age:"Young",gender:"Male",geo:"Italy",language:"it-IT",localModelGain:3,modelId:"it_IT/model0",name:"Giovanni",score:8,speakerId:null,speed:"Normal",tone:"Calm"},{age:"Mature",gender:"Male",geo:"Turkey",language:"tr-TR",localModelGain:4.5,modelId:"tr_TR/model0",name:"Emre",score:8,speakerId:null,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Male",geo:"Turkey",language:"tr-TR",localModelGain:1,modelId:"tr_TR/model1",name:"Ozan",score:8,speakerId:null,speed:"Fast",tone:"Raspy"},{age:"Mature",gender:"Female",geo:"Turkey",language:"tr-TR",localModelGain:2,modelId:"tr_TR/model2",name:"Ipek",score:8,speakerId:null,speed:"Normal",tone:"Raspy"},{age:"Mature",gender:"Male",geo:"Poland",language:"pl-PL",localModelGain:2.5,modelId:"pl_PL/model0",name:"Piotr",score:8,speakerId:null,speed:"Normal",tone:"Calm"},{age:"Young",gender:"Female",geo:"Poland",language:"pl-PL",localModelGain:2.5,modelId:"pl_PL/model1",name:"Agnieszka",score:8,speakerId:null,speed:"Normal",tone:"Raspy"},{age:"Young",gender:"Male",geo:"Poland",language:"pl-PL",localModelGain:4.5,modelId:"pl_PL/model2",name:"Henryk",score:7,speakerId:null,speed:"Normal",tone:"Raspy"},{speakerId:null,name:"Daulet",nativeName:"Дәулет",score:8,gender:"Male",age:"Mature",speed:"Fast",tone:"Gritty",geo:"Kazakhstan",language:"kk-KZ",modelId:"kk_KZ/model0",localModelGain:1},{speakerId:null,name:"Makpal",nativeName:"Мақпал",score:7,gender:"Female",age:"Mature",speed:"Normal",tone:"Raspy",geo:"Kazakhstan",language:"kk-KZ",modelId:"kk_KZ/model1",localModelGain:1}]),Jr=1,Kr=.667,Zr=.8,Xr=1,Qr=22050;d.wasm.numThreads=navigator.hardwareConcurrency,d.wasm.wasmPaths="/src/offscreen/workers/synthesizer/lib/",Vr({add:(e,r)=>e+r,dispose:async function(e){const r=ea.get(e);if(!r)throw new Error("Bad engineId");await r.dispose()},infer:async function({engineId:e,phonemeIds:r,speakerId:a}){const t=ea.get(e);if(!t)throw new Error("Bad engineId");const n=await t.infer(r,a);if(e!==ra||a!==aa){const r=qr.find((r=>r.speakerId===a&&r.modelId===e));void 0!==r?.localModelGain&&(ta=r.localModelGain),ra=e,aa=a}const o=new Float32Array(n.samples.length);for(let e=0;e<n.samples.length;e++)o[e]=n.samples[e]*ta;return o.buffer},makeInferenceEngine:async function(e,r){if(ea.has(r))return r;const a=e.config.audio?.sample_rate??Qr,t=Xr,n=[e.config.inference?.noise_scale??Kr,e.config.inference?.length_scale??Jr,e.config.inference?.noise_w??Zr],o=new Uint8Array(e.model),s=await U.create(o),l={async dispose(){await s.release()},async infer(e,r){const o={input:new E("int64",e,[1,e.length]),input_lengths:new E("int64",[e.length]),scales:new E("float32",n)};null!=r&&(o.sid=new E("int64",[r]));const{output:l}=await s.run(o);return{numChannels:t,sampleRate:a,samples:l.data}}};return ea.set(e.id,l),e.id}});const ea=new Map;let ra=null,aa=null,ta=1.4})();