(function(){"use strict";var pe=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ft(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function xr(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var r=function o(){return this instanceof o?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(e).forEach(function(o){var c=Object.getOwnPropertyDescriptor(e,o);Object.defineProperty(r,o,c.get?c:{enumerable:!0,get:function(){return e[o]}})}),r}var Rt={exports:{}};(function(e,t){(function(r,o){o(e)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:pe,function(r){if(!(globalThis.chrome&&globalThis.chrome.runtime&&globalThis.chrome.runtime.id))throw new Error("This script should only be loaded in a browser extension.");if(globalThis.browser&&globalThis.browser.runtime&&globalThis.browser.runtime.id)r.exports=globalThis.browser;else{const o="The message port closed before a response was received.",c=n=>{const l={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(l).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class p extends WeakMap{constructor(_,J=void 0){super(J),this.createItem=_}get(_){return this.has(_)||this.set(_,this.createItem(_)),super.get(_)}}const g=A=>A&&typeof A=="object"&&typeof A.then=="function",E=(A,_)=>(...J)=>{n.runtime.lastError?A.reject(new Error(n.runtime.lastError.message)):_.singleCallbackArg||J.length<=1&&_.singleCallbackArg!==!1?A.resolve(J[0]):A.resolve(J)},a=A=>A==1?"argument":"arguments",f=(A,_)=>function(S,...R){if(R.length<_.minArgs)throw new Error(`Expected at least ${_.minArgs} ${a(_.minArgs)} for ${A}(), got ${R.length}`);if(R.length>_.maxArgs)throw new Error(`Expected at most ${_.maxArgs} ${a(_.maxArgs)} for ${A}(), got ${R.length}`);return new Promise((G,Q)=>{if(_.fallbackToNoCallback)try{S[A](...R,E({resolve:G,reject:Q},_))}catch(W){console.warn(`${A} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,W),S[A](...R),_.fallbackToNoCallback=!1,_.noCallback=!0,G()}else _.noCallback?(S[A](...R),G()):S[A](...R,E({resolve:G,reject:Q},_))})},O=(A,_,J)=>new Proxy(_,{apply(S,R,G){return J.call(R,A,...G)}});let L=Function.call.bind(Object.prototype.hasOwnProperty);const C=(A,_={},J={})=>{let S=Object.create(null),R={has(Q,W){return W in A||W in S},get(Q,W,Z){if(W in S)return S[W];if(!(W in A))return;let X=A[W];if(typeof X=="function")if(typeof _[W]=="function")X=O(A,A[W],_[W]);else if(L(J,W)){let B=f(W,J[W]);X=O(A,A[W],B)}else X=X.bind(A);else if(typeof X=="object"&&X!==null&&(L(_,W)||L(J,W)))X=C(X,_[W],J[W]);else if(L(J,"*"))X=C(X,_[W],J["*"]);else return Object.defineProperty(S,W,{configurable:!0,enumerable:!0,get(){return A[W]},set(B){A[W]=B}}),X;return S[W]=X,X},set(Q,W,Z,X){return W in S?S[W]=Z:A[W]=Z,!0},defineProperty(Q,W,Z){return Reflect.defineProperty(S,W,Z)},deleteProperty(Q,W){return Reflect.deleteProperty(S,W)}},G=Object.create(A);return new Proxy(G,R)},j=A=>({addListener(_,J,...S){_.addListener(A.get(J),...S)},hasListener(_,J){return _.hasListener(A.get(J))},removeListener(_,J){_.removeListener(A.get(J))}}),F=new p(A=>typeof A!="function"?A:function(J){const S=C(J,{},{getContent:{minArgs:0,maxArgs:0}});A(S)}),P=new p(A=>typeof A!="function"?A:function(J,S,R){let G=!1,Q,W=new Promise(q=>{Q=function(Y){G=!0,q(Y)}}),Z;try{Z=A(J,S,Q)}catch(q){Z=Promise.reject(q)}const X=Z!==!0&&g(Z);if(Z!==!0&&!X&&!G)return!1;const B=q=>{q.then(Y=>{R(Y)},Y=>{let H;Y&&(Y instanceof Error||typeof Y.message=="string")?H=Y.message:H="An unexpected error occurred",R({__mozWebExtensionPolyfillReject__:!0,message:H})}).catch(Y=>{console.error("Failed to send onMessage rejected reply",Y)})};return B(X?Z:W),!0}),m=({reject:A,resolve:_},J)=>{n.runtime.lastError?n.runtime.lastError.message===o?_():A(new Error(n.runtime.lastError.message)):J&&J.__mozWebExtensionPolyfillReject__?A(new Error(J.message)):_(J)},w=(A,_,J,...S)=>{if(S.length<_.minArgs)throw new Error(`Expected at least ${_.minArgs} ${a(_.minArgs)} for ${A}(), got ${S.length}`);if(S.length>_.maxArgs)throw new Error(`Expected at most ${_.maxArgs} ${a(_.maxArgs)} for ${A}(), got ${S.length}`);return new Promise((R,G)=>{const Q=m.bind(null,{resolve:R,reject:G});S.push(Q),J.sendMessage(...S)})},x={devtools:{network:{onRequestFinished:j(F)}},runtime:{onMessage:j(P),onMessageExternal:j(P),sendMessage:w.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:w.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},I={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return l.privacy={network:{"*":I},services:{"*":I},websites:{"*":I}},C(n,x,l)};r.exports=c(chrome)}})})(Rt);var Ar=Rt.exports;const _r=Ft(Ar),Er="https://lb.fenvox.com/readvox",Sr=33,kr=`${Er}/api/tts/generate/tts`,Nt=3,dt="https://models.readvox.com",ht=2,Or="TtsModelStore",Ee="models",Pr=1;async function ze(){return new Promise((e,t)=>{const r=indexedDB.open(Or,Pr);r.onerror=()=>t(r.error),r.onsuccess=()=>e(r.result),r.onupgradeneeded=o=>{o.target.result.createObjectStore(Ee,{keyPath:"id"})}})}async function Lr(e,t,r){const o=await ze();return new Promise(c=>{const p=o.transaction(Ee,"readwrite").objectStore(Ee).put({config:r,id:e,model:t,timestamp:Date.now()});p.onerror=()=>c(),p.onsuccess=()=>c()})}async function pt(e){const t=await ze();return new Promise(r=>{const c=t.transaction(Ee,"readwrite").objectStore(Ee),n=c.get(e);n.onerror=()=>r(null),n.onsuccess=()=>{n.result?(c.put({...n.result,timestamp:Date.now()}),r({config:n.result.config,id:e,model:n.result.model})):r(null)}})}async function It(e){const t=await ze();return new Promise(r=>{const n=t.transaction(Ee,"readwrite").objectStore(Ee).delete(e);n.onerror=()=>r(),n.onsuccess=()=>r()})}async function mt(){const e=await ze();return new Promise(t=>{const c=e.transaction(Ee,"readonly").objectStore(Ee).getAll();c.onerror=()=>t(null),c.onsuccess=()=>{const n=c.result.map(({id:l,timestamp:p})=>({id:l,timestamp:p}));t(n)}})}async function jr(){const e=await mt();if(e&&e.length>0){const t=e.reduce((r,o)=>o.timestamp<r.timestamp?o:r);await It(t.id)}}async function Tr(){const e=await ze();return new Promise(t=>{const c=e.transaction(Ee,"readwrite").objectStore(Ee).clear();c.onerror=()=>t(),c.onsuccess=()=>t()})}let gt=!1;async function zt(e){const{modelId:t}=e.data;if(!t||gt)return!1;if(await pt(t)!==null)return!0;gt=!0;const o=fetch(`${dt}/${t}/model.onnx`),c=fetch(`${dt}/${t}/model.onnx.json`),n=await Promise.all([o,c]),[l,p]=await Promise.all([n[0].arrayBuffer(),n[1].json()]),g=await mt();return g&&g.length>=ht&&await jr(),await Lr(t,l,p),gt=!1,!0}async function Cr(e){const t=await ze();return new Promise(r=>{const n=t.transaction(Ee,"readonly").objectStore(Ee).count(e);n.onerror=()=>r(!1),n.onsuccess=()=>{r(n.result>0)}})}async function Mr(){return await mt()||[]}async function Fr(e){const{modelId:t}=e.data;await It(t)}async function Rr(){await Tr()}var $t={},ke={},Ne={};Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.DefaultSerializer=Ne.extendSerializer=void 0;function Nr(e,t){const r=e.deserialize.bind(e),o=e.serialize.bind(e);return{deserialize(c){return t.deserialize(c,r)},serialize(c){return t.serialize(c,o)}}}Ne.extendSerializer=Nr;const Dt={deserialize(e){return Object.assign(Error(e.message),{name:e.name,stack:e.stack})},serialize(e){return{__error_marker:"$$error",message:e.message,name:e.name,stack:e.stack}}},Ir=e=>e&&typeof e=="object"&&"__error_marker"in e&&e.__error_marker==="$$error";Ne.DefaultSerializer={deserialize(e){return Ir(e)?Dt.deserialize(e):e},serialize(e){return e instanceof Error?Dt.serialize(e):e}},Object.defineProperty(ke,"__esModule",{value:!0}),ke.serialize=ke.deserialize=ke.registerSerializer=void 0;const Wt=Ne;let Ke=Wt.DefaultSerializer;function zr(e){Ke=Wt.extendSerializer(Ke,e)}ke.registerSerializer=zr;function $r(e){return Ke.deserialize(e)}ke.deserialize=$r;function Dr(e){return Ke.serialize(e)}ke.serialize=Dr;var Ut={},je={},$e={};Object.defineProperty($e,"__esModule",{value:!0}),$e.getBundleURL=$e.getBaseURL=void 0;let yt;function Wr(){return yt||(yt=Ur()),yt}$e.getBundleURL=Wr;function Ur(){try{throw new Error}catch(e){const t=(""+e.stack).match(/(https?|file|ftp|chrome-extension|moz-extension):\/\/[^)\n]+/g);if(t)return Gt(t[0])}return"/"}function Gt(e){return(""+e).replace(/^((?:https?|file|ftp|chrome-extension|moz-extension):\/\/.+)?\/[^/]+(?:\?.*)?$/,"$1")+"/"}$e.getBaseURL=Gt,Object.defineProperty(je,"__esModule",{value:!0}),je.isWorkerRuntime=je.getWorkerImplementation=je.defaultPoolSize=void 0;const Bt=$e;je.defaultPoolSize=typeof navigator<"u"&&navigator.hardwareConcurrency?navigator.hardwareConcurrency:4;const qt=e=>/^[a-zA-Z][a-zA-Z\d+\-.]*:/.test(e);function Ht(e){const t=new Blob([e],{type:"application/javascript"});return URL.createObjectURL(t)}function Gr(){if(typeof Worker>"u")return class{constructor(){throw Error("No web worker implementation available. You might have tried to spawn a worker within a worker in a browser that doesn't support workers in workers.")}};class e extends Worker{constructor(o,c){var n,l;typeof o=="string"&&c&&c._baseURL?o=new URL(o,c._baseURL):typeof o=="string"&&!qt(o)&&Bt.getBundleURL().match(/^file:\/\//i)&&(o=new URL(o,Bt.getBundleURL().replace(/\/[^\/]+$/,"/")),(!((n=c==null?void 0:c.CORSWorkaround)!==null&&n!==void 0)||n)&&(o=Ht(`importScripts(${JSON.stringify(o)});`))),typeof o=="string"&&qt(o)&&(!((l=c==null?void 0:c.CORSWorkaround)!==null&&l!==void 0)||l)&&(o=Ht(`importScripts(${JSON.stringify(o)});`)),super(o,c)}}class t extends e{constructor(o,c){const n=window.URL.createObjectURL(o);super(n,c)}static fromText(o,c){const n=new window.Blob([o],{type:"text/javascript"});return new t(n,c)}}return{blob:t,default:e}}let bt;function Br(){return bt||(bt=Gr()),bt}je.getWorkerImplementation=Br;function qr(){const e=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!e)}je.isWorkerRuntime=qr;var Yt={},vt={exports:{}},wt,Jt;function Hr(){if(Jt)return wt;Jt=1;var e=1e3,t=e*60,r=t*60,o=r*24,c=o*7,n=o*365.25;wt=function(a,f){f=f||{};var O=typeof a;if(O==="string"&&a.length>0)return l(a);if(O==="number"&&isFinite(a))return f.long?g(a):p(a);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(a))};function l(a){if(a=String(a),!(a.length>100)){var f=/^(-?(?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|weeks?|w|years?|yrs?|y)?$/i.exec(a);if(f){var O=parseFloat(f[1]),L=(f[2]||"ms").toLowerCase();switch(L){case"years":case"year":case"yrs":case"yr":case"y":return O*n;case"weeks":case"week":case"w":return O*c;case"days":case"day":case"d":return O*o;case"hours":case"hour":case"hrs":case"hr":case"h":return O*r;case"minutes":case"minute":case"mins":case"min":case"m":return O*t;case"seconds":case"second":case"secs":case"sec":case"s":return O*e;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return O;default:return}}}}function p(a){var f=Math.abs(a);return f>=o?Math.round(a/o)+"d":f>=r?Math.round(a/r)+"h":f>=t?Math.round(a/t)+"m":f>=e?Math.round(a/e)+"s":a+"ms"}function g(a){var f=Math.abs(a);return f>=o?E(a,f,o,"day"):f>=r?E(a,f,r,"hour"):f>=t?E(a,f,t,"minute"):f>=e?E(a,f,e,"second"):a+" ms"}function E(a,f,O,L){var C=f>=O*1.5;return Math.round(a/O)+" "+L+(C?"s":"")}return wt}function Yr(e){r.debug=r,r.default=r,r.coerce=g,r.disable=n,r.enable=c,r.enabled=l,r.humanize=Hr(),r.destroy=E,Object.keys(e).forEach(a=>{r[a]=e[a]}),r.names=[],r.skips=[],r.formatters={};function t(a){let f=0;for(let O=0;O<a.length;O++)f=(f<<5)-f+a.charCodeAt(O),f|=0;return r.colors[Math.abs(f)%r.colors.length]}r.selectColor=t;function r(a){let f,O=null,L,C;function j(...F){if(!j.enabled)return;const P=j,m=Number(new Date),w=m-(f||m);P.diff=w,P.prev=f,P.curr=m,f=m,F[0]=r.coerce(F[0]),typeof F[0]!="string"&&F.unshift("%O");let x=0;F[0]=F[0].replace(/%([a-zA-Z%])/g,(A,_)=>{if(A==="%%")return"%";x++;const J=r.formatters[_];if(typeof J=="function"){const S=F[x];A=J.call(P,S),F.splice(x,1),x--}return A}),r.formatArgs.call(P,F),(P.log||r.log).apply(P,F)}return j.namespace=a,j.useColors=r.useColors(),j.color=r.selectColor(a),j.extend=o,j.destroy=r.destroy,Object.defineProperty(j,"enabled",{enumerable:!0,configurable:!1,get:()=>O!==null?O:(L!==r.namespaces&&(L=r.namespaces,C=r.enabled(a)),C),set:F=>{O=F}}),typeof r.init=="function"&&r.init(j),j}function o(a,f){const O=r(this.namespace+(typeof f>"u"?":":f)+a);return O.log=this.log,O}function c(a){r.save(a),r.namespaces=a,r.names=[],r.skips=[];let f;const O=(typeof a=="string"?a:"").split(/[\s,]+/),L=O.length;for(f=0;f<L;f++)O[f]&&(a=O[f].replace(/\*/g,".*?"),a[0]==="-"?r.skips.push(new RegExp("^"+a.slice(1)+"$")):r.names.push(new RegExp("^"+a+"$")))}function n(){const a=[...r.names.map(p),...r.skips.map(p).map(f=>"-"+f)].join(",");return r.enable(""),a}function l(a){if(a[a.length-1]==="*")return!0;let f,O;for(f=0,O=r.skips.length;f<O;f++)if(r.skips[f].test(a))return!1;for(f=0,O=r.names.length;f<O;f++)if(r.names[f].test(a))return!0;return!1}function p(a){return a.toString().substring(2,a.toString().length-2).replace(/\.\*\?$/,"*")}function g(a){return a instanceof Error?a.stack||a.message:a}function E(){console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`.")}return r.enable(r.load()),r}var Jr=Yr;(function(e,t){t.formatArgs=o,t.save=c,t.load=n,t.useColors=r,t.storage=l(),t.destroy=(()=>{let g=!1;return()=>{g||(g=!0,console.warn("Instance method `debug.destroy()` is deprecated and no longer does anything. It will be removed in the next major version of `debug`."))}})(),t.colors=["#0000CC","#0000FF","#0033CC","#0033FF","#0066CC","#0066FF","#0099CC","#0099FF","#00CC00","#00CC33","#00CC66","#00CC99","#00CCCC","#00CCFF","#3300CC","#3300FF","#3333CC","#3333FF","#3366CC","#3366FF","#3399CC","#3399FF","#33CC00","#33CC33","#33CC66","#33CC99","#33CCCC","#33CCFF","#6600CC","#6600FF","#6633CC","#6633FF","#66CC00","#66CC33","#9900CC","#9900FF","#9933CC","#9933FF","#99CC00","#99CC33","#CC0000","#CC0033","#CC0066","#CC0099","#CC00CC","#CC00FF","#CC3300","#CC3333","#CC3366","#CC3399","#CC33CC","#CC33FF","#CC6600","#CC6633","#CC9900","#CC9933","#CCCC00","#CCCC33","#FF0000","#FF0033","#FF0066","#FF0099","#FF00CC","#FF00FF","#FF3300","#FF3333","#FF3366","#FF3399","#FF33CC","#FF33FF","#FF6600","#FF6633","#FF9900","#FF9933","#FFCC00","#FFCC33"];function r(){if(typeof window<"u"&&window.process&&(window.process.type==="renderer"||window.process.__nwjs))return!0;if(typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/(edge|trident)\/(\d+)/))return!1;let g;return typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&(g=navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/))&&parseInt(g[1],10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}function o(g){if(g[0]=(this.useColors?"%c":"")+this.namespace+(this.useColors?" %c":" ")+g[0]+(this.useColors?"%c ":" ")+"+"+e.exports.humanize(this.diff),!this.useColors)return;const E="color: "+this.color;g.splice(1,0,E,"color: inherit");let a=0,f=0;g[0].replace(/%[a-zA-Z%]/g,O=>{O!=="%%"&&(a++,O==="%c"&&(f=a))}),g.splice(f,0,E)}t.log=console.debug||console.log||(()=>{});function c(g){try{g?t.storage.setItem("debug",g):t.storage.removeItem("debug")}catch{}}function n(){let g;try{g=t.storage.getItem("debug")}catch{}return!g&&typeof process<"u"&&"env"in process&&(g=process.env.DEBUG),g}function l(){try{return localStorage}catch{}}e.exports=Jr(t);const{formatters:p}=e.exports;p.j=function(g){try{return JSON.stringify(g)}catch(E){return"[UnexpectedJSONParseError]: "+E.message}}})(vt,vt.exports);var xt=vt.exports,Vr=function(e,t,r,o){function c(n){return n instanceof r?n:new r(function(l){l(n)})}return new(r||(r=Promise))(function(n,l){function p(a){try{E(o.next(a))}catch(f){l(f)}}function g(a){try{E(o.throw(a))}catch(f){l(f)}}function E(a){a.done?n(a.value):c(a.value).then(p,g)}E((o=o.apply(e,t||[])).next())})};class Ze{constructor(t){this._baseObserver=t,this._pendingPromises=new Set}complete(){Promise.all(this._pendingPromises).then(()=>this._baseObserver.complete()).catch(t=>this._baseObserver.error(t))}error(t){this._baseObserver.error(t)}schedule(t){const r=Promise.all(this._pendingPromises),o=[],c=l=>o.push(l),n=Promise.resolve().then(()=>Vr(this,void 0,void 0,function*(){yield r,yield t(c),this._pendingPromises.delete(n);for(const l of o)this._baseObserver.next(l)})).catch(l=>{this._pendingPromises.delete(n),this._baseObserver.error(l)});this._pendingPromises.add(n)}}const Vt=()=>typeof Symbol=="function",Be=e=>Vt()&&!!Symbol[e],At=e=>Be(e)?Symbol[e]:"@@"+e;Be("asyncIterator")||(Symbol.asyncIterator=Symbol.asyncIterator||Symbol.for("Symbol.asyncIterator"));const Qr=At("iterator"),_t=At("observable"),Qt=At("species");function Xe(e,t){const r=e[t];if(r!=null){if(typeof r!="function")throw new TypeError(r+" is not a function");return r}}function qe(e){let t=e.constructor;return t!==void 0&&(t=t[Qt],t===null&&(t=void 0)),t!==void 0?t:me}function Kr(e){return e instanceof me}function De(e){De.log?De.log(e):setTimeout(()=>{throw e},0)}function et(e){Promise.resolve().then(()=>{try{e()}catch(t){De(t)}})}function Kt(e){const t=e._cleanup;if(t!==void 0&&(e._cleanup=void 0,!!t))try{if(typeof t=="function")t();else{const r=Xe(t,"unsubscribe");r&&r.call(t)}}catch(r){De(r)}}function Et(e){e._observer=void 0,e._queue=void 0,e._state="closed"}function Zr(e){const t=e._queue;if(t){e._queue=void 0,e._state="ready";for(const r of t)if(Zt(e,r.type,r.value),e._state==="closed")break}}function Zt(e,t,r){e._state="running";const o=e._observer;try{const c=o?Xe(o,t):void 0;switch(t){case"next":c&&c.call(o,r);break;case"error":if(Et(e),c)c.call(o,r);else throw r;break;case"complete":Et(e),c&&c.call(o);break}}catch(c){De(c)}e._state==="closed"?Kt(e):e._state==="running"&&(e._state="ready")}function St(e,t,r){if(e._state!=="closed"){if(e._state==="buffering"){e._queue=e._queue||[],e._queue.push({type:t,value:r});return}if(e._state!=="ready"){e._state="buffering",e._queue=[{type:t,value:r}],et(()=>Zr(e));return}Zt(e,t,r)}}class Xr{constructor(t,r){this._cleanup=void 0,this._observer=t,this._queue=void 0,this._state="initializing";const o=new en(this);try{this._cleanup=r.call(void 0,o)}catch(c){o.error(c)}this._state==="initializing"&&(this._state="ready")}get closed(){return this._state==="closed"}unsubscribe(){this._state!=="closed"&&(Et(this),Kt(this))}}class en{constructor(t){this._subscription=t}get closed(){return this._subscription._state==="closed"}next(t){St(this._subscription,"next",t)}error(t){St(this._subscription,"error",t)}complete(){St(this._subscription,"complete")}}class me{constructor(t){if(!(this instanceof me))throw new TypeError("Observable cannot be called as a function");if(typeof t!="function")throw new TypeError("Observable initializer must be a function");this._subscriber=t}subscribe(t,r,o){return(typeof t!="object"||t===null)&&(t={next:t,error:r,complete:o}),new Xr(t,this._subscriber)}pipe(t,...r){let o=this;for(const c of[t,...r])o=c(o);return o}tap(t,r,o){const c=typeof t!="object"||t===null?{next:t,error:r,complete:o}:t;return new me(n=>this.subscribe({next(l){c.next&&c.next(l),n.next(l)},error(l){c.error&&c.error(l),n.error(l)},complete(){c.complete&&c.complete(),n.complete()},start(l){c.start&&c.start(l)}}))}forEach(t){return new Promise((r,o)=>{if(typeof t!="function"){o(new TypeError(t+" is not a function"));return}function c(){n.unsubscribe(),r(void 0)}const n=this.subscribe({next(l){try{t(l,c)}catch(p){o(p),n.unsubscribe()}},error(l){o(l)},complete(){r(void 0)}})})}map(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=qe(this);return new r(o=>this.subscribe({next(c){let n=c;try{n=t(c)}catch(l){return o.error(l)}o.next(n)},error(c){o.error(c)},complete(){o.complete()}}))}filter(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=qe(this);return new r(o=>this.subscribe({next(c){try{if(!t(c))return}catch(n){return o.error(n)}o.next(c)},error(c){o.error(c)},complete(){o.complete()}}))}reduce(t,r){if(typeof t!="function")throw new TypeError(t+" is not a function");const o=qe(this),c=arguments.length>1;let n=!1,l=r;return new o(p=>this.subscribe({next(g){const E=!n;if(n=!0,!E||c)try{l=t(l,g)}catch(a){return p.error(a)}else l=g},error(g){p.error(g)},complete(){if(!n&&!c)return p.error(new TypeError("Cannot reduce an empty sequence"));p.next(l),p.complete()}}))}concat(...t){const r=qe(this);return new r(o=>{let c,n=0;function l(p){c=p.subscribe({next(g){o.next(g)},error(g){o.error(g)},complete(){n===t.length?(c=void 0,o.complete()):l(r.from(t[n++]))}})}return l(this),()=>{c&&(c.unsubscribe(),c=void 0)}})}flatMap(t){if(typeof t!="function")throw new TypeError(t+" is not a function");const r=qe(this);return new r(o=>{const c=[],n=this.subscribe({next(p){let g;if(t)try{g=t(p)}catch(a){return o.error(a)}else g=p;const E=r.from(g).subscribe({next(a){o.next(a)},error(a){o.error(a)},complete(){const a=c.indexOf(E);a>=0&&c.splice(a,1),l()}});c.push(E)},error(p){o.error(p)},complete(){l()}});function l(){n.closed&&c.length===0&&o.complete()}return()=>{c.forEach(p=>p.unsubscribe()),n.unsubscribe()}})}[_t](){return this}static from(t){const r=typeof this=="function"?this:me;if(t==null)throw new TypeError(t+" is not an object");const o=Xe(t,_t);if(o){const c=o.call(t);if(Object(c)!==c)throw new TypeError(c+" is not an object");return Kr(c)&&c.constructor===r?c:new r(n=>c.subscribe(n))}if(Be("iterator")){const c=Xe(t,Qr);if(c)return new r(n=>{et(()=>{if(!n.closed){for(const l of c.call(t))if(n.next(l),n.closed)return;n.complete()}})})}if(Array.isArray(t))return new r(c=>{et(()=>{if(!c.closed){for(const n of t)if(c.next(n),c.closed)return;c.complete()}})});throw new TypeError(t+" is not observable")}static of(...t){const r=typeof this=="function"?this:me;return new r(o=>{et(()=>{if(!o.closed){for(const c of t)if(o.next(c),o.closed)return;o.complete()}})})}static get[Qt](){return this}}Vt()&&Object.defineProperty(me,Symbol("extensions"),{value:{symbol:_t,hostReportError:De},configurable:!0});function Ie(e){typeof e=="function"?e():e&&typeof e.unsubscribe=="function"&&e.unsubscribe()}var tn=function(e,t,r,o){function c(n){return n instanceof r?n:new r(function(l){l(n)})}return new(r||(r=Promise))(function(n,l){function p(a){try{E(o.next(a))}catch(f){l(f)}}function g(a){try{E(o.throw(a))}catch(f){l(f)}}function E(a){a.done?n(a.value):c(a.value).then(p,g)}E((o=o.apply(e,t||[])).next())})};function rn(e){return t=>new me(r=>{const o=new Ze(r),c=t.subscribe({complete(){o.complete()},error(n){o.error(n)},next(n){o.schedule(l=>tn(this,void 0,void 0,function*(){(yield e(n))&&l(n)}))}});return()=>Ie(c)})}function nn(e){return e&&Be("asyncIterator")&&e[Symbol.asyncIterator]}function on(e){return e&&Be("iterator")&&e[Symbol.iterator]}var an=function(e,t,r,o){function c(n){return n instanceof r?n:new r(function(l){l(n)})}return new(r||(r=Promise))(function(n,l){function p(a){try{E(o.next(a))}catch(f){l(f)}}function g(a){try{E(o.throw(a))}catch(f){l(f)}}function E(a){a.done?n(a.value):c(a.value).then(p,g)}E((o=o.apply(e,t||[])).next())})},sn=function(e){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=e[Symbol.asyncIterator],r;return t?t.call(e):(e=typeof __values=="function"?__values(e):e[Symbol.iterator](),r={},o("next"),o("throw"),o("return"),r[Symbol.asyncIterator]=function(){return this},r);function o(n){r[n]=e[n]&&function(l){return new Promise(function(p,g){l=e[n](l),c(p,g,l.done,l.value)})}}function c(n,l,p,g){Promise.resolve(g).then(function(E){n({value:E,done:p})},l)}};function cn(e){return t=>new me(r=>{const o=new Ze(r),c=t.subscribe({complete(){o.complete()},error(n){o.error(n)},next(n){o.schedule(l=>an(this,void 0,void 0,function*(){var p,g;const E=yield e(n);if(on(E)||nn(E))try{for(var a=sn(E),f;f=yield a.next(),!f.done;){const O=f.value;l(O)}}catch(O){p={error:O}}finally{try{f&&!f.done&&(g=a.return)&&(yield g.call(a))}finally{if(p)throw p.error}}else E.map(O=>l(O))}))}});return()=>Ie(c)})}function un(e){return new me(t=>{let r=0;const o=setInterval(()=>{t.next(r++)},e);return()=>clearInterval(o)})}var ln=function(e,t,r,o){function c(n){return n instanceof r?n:new r(function(l){l(n)})}return new(r||(r=Promise))(function(n,l){function p(a){try{E(o.next(a))}catch(f){l(f)}}function g(a){try{E(o.throw(a))}catch(f){l(f)}}function E(a){a.done?n(a.value):c(a.value).then(p,g)}E((o=o.apply(e,t||[])).next())})};function fn(e){return t=>new me(r=>{const o=new Ze(r),c=t.subscribe({complete(){o.complete()},error(n){o.error(n)},next(n){o.schedule(l=>ln(this,void 0,void 0,function*(){const p=yield e(n);l(p)}))}});return()=>Ie(c)})}function dn(...e){return e.length===0?me.from([]):new me(t=>{let r=0;const o=e.map(n=>n.subscribe({error(l){t.error(l),c()},next(l){t.next(l)},complete(){++r===e.length&&(t.complete(),c())}})),c=()=>{o.forEach(n=>Ie(n))};return c})}class Xt extends me{constructor(){super(t=>(this._observers.add(t),()=>this._observers.delete(t))),this._observers=new Set}next(t){for(const r of this._observers)r.next(t)}error(t){for(const r of this._observers)r.error(t)}complete(){for(const t of this._observers)t.complete()}}function hn(e){const t=new Xt;let r,o=0;return new me(c=>{r||(r=e.subscribe(t));const n=t.subscribe(c);return o++,()=>{o--,n.unsubscribe(),o===0&&(Ie(r),r=void 0)}})}var pn=function(e,t,r,o){function c(n){return n instanceof r?n:new r(function(l){l(n)})}return new(r||(r=Promise))(function(n,l){function p(a){try{E(o.next(a))}catch(f){l(f)}}function g(a){try{E(o.throw(a))}catch(f){l(f)}}function E(a){a.done?n(a.value):c(a.value).then(p,g)}E((o=o.apply(e,t||[])).next())})};function mn(e,t){return r=>new me(o=>{let c,n=0;const l=new Ze(o),p=r.subscribe({complete(){l.complete()},error(g){l.error(g)},next(g){l.schedule(E=>pn(this,void 0,void 0,function*(){c=yield e(n===0?typeof t>"u"?g:t:c,g,n++),E(c)}))}});return()=>Ie(p)})}const tt=xr(Object.freeze(Object.defineProperty({__proto__:null,Observable:me,Subject:Xt,filter:rn,flatMap:cn,interval:un,map:fn,merge:dn,multicast:hn,scan:mn,unsubscribe:Ie},Symbol.toStringTag,{value:"Module"})));var rt={};Object.defineProperty(rt,"__esModule",{value:!0}),rt.allSettled=void 0;function gn(e){return Promise.all(e.map(t=>{const r=n=>({status:"fulfilled",value:n}),o=n=>({status:"rejected",reason:n}),c=Promise.resolve(t);try{return c.then(r,o)}catch(n){return Promise.reject(n)}}))}rt.allSettled=gn;var er={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.PoolEventType=void 0,function(t){t.initialized="initialized",t.taskCanceled="taskCanceled",t.taskCompleted="taskCompleted",t.taskFailed="taskFailed",t.taskQueued="taskQueued",t.taskQueueDrained="taskQueueDrained",t.taskStart="taskStart",t.terminated="terminated"}(e.PoolEventType||(e.PoolEventType={}))})(er);var He={},Ae={};Object.defineProperty(Ae,"__esModule",{value:!0}),Ae.$worker=Ae.$transferable=Ae.$terminate=Ae.$events=Ae.$errors=void 0,Ae.$errors=Symbol("thread.errors"),Ae.$events=Symbol("thread.events"),Ae.$terminate=Symbol("thread.terminate"),Ae.$transferable=Symbol("thread.transferable"),Ae.$worker=Symbol("thread.worker"),Object.defineProperty(He,"__esModule",{value:!0}),He.Thread=void 0;const kt=Ae;function tr(e){throw Error(e)}He.Thread={errors(e){return e[kt.$errors]||tr("Error observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},events(e){return e[kt.$events]||tr("Events observable not found. Make sure to pass a thread instance as returned by the spawn() promise.")},terminate(e){return e[kt.$terminate]()}},function(e){var t=pe&&pe.__awaiter||function(P,m,w,x){function I(A){return A instanceof w?A:new w(function(_){_(A)})}return new(w||(w=Promise))(function(A,_){function J(G){try{R(x.next(G))}catch(Q){_(Q)}}function S(G){try{R(x.throw(G))}catch(Q){_(Q)}}function R(G){G.done?A(G.value):I(G.value).then(J,S)}R((x=x.apply(P,m||[])).next())})},r=pe&&pe.__importDefault||function(P){return P&&P.__esModule?P:{default:P}};Object.defineProperty(e,"__esModule",{value:!0}),e.Pool=e.Thread=e.PoolEventType=void 0;const o=r(xt),c=tt,n=rt,l=je,p=er;Object.defineProperty(e,"PoolEventType",{enumerable:!0,get:function(){return p.PoolEventType}});const g=He;Object.defineProperty(e,"Thread",{enumerable:!0,get:function(){return g.Thread}});let E=1;function a(P){const m=[];for(let w=0;w<P;w++)m.push(w);return m}function f(P){return new Promise(m=>setTimeout(m,P))}function O(P,m){return P.reduce((w,x)=>[...w,...m(x)],[])}function L(P){return P.replace(/\W/g," ").trim().replace(/\s+/g,"-")}function C(P,m){return a(m).map(()=>({init:P(),runningTasks:[]}))}class j{constructor(m,w){this.eventSubject=new c.Subject,this.initErrors=[],this.isClosing=!1,this.nextTaskID=1,this.taskQueue=[];const x=typeof w=="number"?{size:w}:w||{},{size:I=l.defaultPoolSize}=x;this.debug=o.default(`threads:pool:${L(x.name||String(E++))}`),this.options=x,this.workers=C(m,I),this.eventObservable=c.multicast(c.Observable.from(this.eventSubject)),Promise.all(this.workers.map(A=>A.init)).then(()=>this.eventSubject.next({type:p.PoolEventType.initialized,size:this.workers.length}),A=>{this.debug("Error while initializing pool worker:",A),this.eventSubject.error(A),this.initErrors.push(A)})}findIdlingWorker(){const{concurrency:m=1}=this.options;return this.workers.find(w=>w.runningTasks.length<m)}runPoolTask(m,w){return t(this,void 0,void 0,function*(){const x=this.workers.indexOf(m)+1;this.debug(`Running task #${w.id} on worker #${x}...`),this.eventSubject.next({type:p.PoolEventType.taskStart,taskID:w.id,workerID:x});try{const I=yield w.run(yield m.init);this.debug(`Task #${w.id} completed successfully`),this.eventSubject.next({type:p.PoolEventType.taskCompleted,returnValue:I,taskID:w.id,workerID:x})}catch(I){this.debug(`Task #${w.id} failed`),this.eventSubject.next({type:p.PoolEventType.taskFailed,taskID:w.id,error:I,workerID:x})}})}run(m,w){return t(this,void 0,void 0,function*(){const x=t(this,void 0,void 0,function*(){const I=()=>{m.runningTasks=m.runningTasks.filter(A=>A!==x)};yield f(0);try{yield this.runPoolTask(m,w)}finally{I(),this.isClosing||this.scheduleWork()}});m.runningTasks.push(x)})}scheduleWork(){this.debug("Attempt de-queueing a task in order to run it...");const m=this.findIdlingWorker();if(!m)return;const w=this.taskQueue.shift();if(!w){this.debug("Task queue is empty"),this.eventSubject.next({type:p.PoolEventType.taskQueueDrained});return}this.run(m,w)}taskCompletion(m){return new Promise((w,x)=>{const I=this.events().subscribe(A=>{A.type===p.PoolEventType.taskCompleted&&A.taskID===m?(I.unsubscribe(),w(A.returnValue)):A.type===p.PoolEventType.taskFailed&&A.taskID===m?(I.unsubscribe(),x(A.error)):A.type===p.PoolEventType.terminated&&(I.unsubscribe(),x(Error("Pool has been terminated before task was run.")))})})}settled(m=!1){return t(this,void 0,void 0,function*(){const w=()=>O(this.workers,A=>A.runningTasks),x=[],I=this.eventObservable.subscribe(A=>{A.type===p.PoolEventType.taskFailed&&x.push(A.error)});return this.initErrors.length>0?Promise.reject(this.initErrors[0]):m&&this.taskQueue.length===0?(yield n.allSettled(w()),x):(yield new Promise((A,_)=>{const J=this.eventObservable.subscribe({next(S){S.type===p.PoolEventType.taskQueueDrained&&(J.unsubscribe(),A(void 0))},error:_})}),yield n.allSettled(w()),I.unsubscribe(),x)})}completed(m=!1){return t(this,void 0,void 0,function*(){const w=this.settled(m),x=new Promise((A,_)=>{const J=this.eventObservable.subscribe({next(S){S.type===p.PoolEventType.taskQueueDrained?(J.unsubscribe(),A(w)):S.type===p.PoolEventType.taskFailed&&(J.unsubscribe(),_(S.error))},error:_})}),I=yield Promise.race([w,x]);if(I.length>0)throw I[0]})}events(){return this.eventObservable}queue(m){const{maxQueuedJobs:w=1/0}=this.options;if(this.isClosing)throw Error("Cannot schedule pool tasks after terminate() has been called.");if(this.initErrors.length>0)throw this.initErrors[0];const x=this.nextTaskID++,I=this.taskCompletion(x);I.catch(_=>{this.debug(`Task #${x} errored:`,_)});const A={id:x,run:m,cancel:()=>{this.taskQueue.indexOf(A)!==-1&&(this.taskQueue=this.taskQueue.filter(_=>_!==A),this.eventSubject.next({type:p.PoolEventType.taskCanceled,taskID:A.id}))},then:I.then.bind(I)};if(this.taskQueue.length>=w)throw Error(`Maximum number of pool tasks queued. Refusing to queue another one.
This usually happens for one of two reasons: We are either at peak workload right now or some tasks just won't finish, thus blocking the pool.`);return this.debug(`Queueing task #${A.id}...`),this.taskQueue.push(A),this.eventSubject.next({type:p.PoolEventType.taskQueued,taskID:A.id}),this.scheduleWork(),A}terminate(m){return t(this,void 0,void 0,function*(){this.isClosing=!0,m||(yield this.completed(!0)),this.eventSubject.next({type:p.PoolEventType.terminated,remainingQueue:[...this.taskQueue]}),this.eventSubject.complete(),yield Promise.all(this.workers.map(w=>t(this,void 0,void 0,function*(){return g.Thread.terminate(yield w.init)})))})}}j.EventType=p.PoolEventType;function F(P,m){return new j(P,m)}F.EventType=p.PoolEventType,e.Pool=F}(Yt);var nt={},ot={};Object.defineProperty(ot,"__esModule",{value:!0}),ot.createPromiseWithResolver=void 0;const yn=()=>{};function bn(){let e=!1,t,r=yn;return[new Promise(n=>{e?n(t):r=n}),n=>{e=!0,t=n,r(t)}]}ot.createPromiseWithResolver=bn;var rr={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerEventType=void 0,function(t){t.internalError="internalError",t.message="message",t.termination="termination"}(e.WorkerEventType||(e.WorkerEventType={}))})(rr);var We={},it={};Object.defineProperty(it,"__esModule",{value:!0}),it.ObservablePromise=void 0;const vn=tt,wn=()=>{},xn=e=>e,nr=e=>Promise.resolve().then(e);function An(e){throw e}function _n(e){return e&&typeof e.then=="function"}class Ot extends vn.Observable{constructor(t){super(r=>{const o=this,c=Object.assign(Object.assign({},r),{complete(){r.complete(),o.onCompletion()},error(n){r.error(n),o.onError(n)},next(n){r.next(n),o.onNext(n)}});try{return this.initHasRun=!0,t(c)}catch(n){c.error(n)}}),this.initHasRun=!1,this.fulfillmentCallbacks=[],this.rejectionCallbacks=[],this.firstValueSet=!1,this.state="pending"}onNext(t){this.firstValueSet||(this.firstValue=t,this.firstValueSet=!0)}onError(t){this.state="rejected",this.rejection=t;for(const r of this.rejectionCallbacks)nr(()=>r(t))}onCompletion(){this.state="fulfilled";for(const t of this.fulfillmentCallbacks)nr(()=>t(this.firstValue))}then(t,r){const o=t||xn,c=r||An;let n=!1;return new Promise((l,p)=>{const g=a=>{if(!n){n=!0;try{l(c(a))}catch(f){p(f)}}},E=a=>{try{l(o(a))}catch(f){g(f)}};if(this.initHasRun||this.subscribe({error:g}),this.state==="fulfilled")return l(o(this.firstValue));if(this.state==="rejected")return n=!0,l(c(this.rejection));this.fulfillmentCallbacks.push(E),this.rejectionCallbacks.push(g)})}catch(t){return this.then(void 0,t)}finally(t){const r=t||wn;return this.then(o=>(r(),o),()=>r())}static from(t){return _n(t)?new Ot(r=>{const o=n=>{r.next(n),r.complete()},c=n=>{r.error(n)};t.then(o,c)}):super.from(t)}}it.ObservablePromise=Ot;var Te={};Object.defineProperty(Te,"__esModule",{value:!0}),Te.Transfer=Te.isTransferDescriptor=void 0;const or=Ae;function En(e){return!(!e||typeof e!="object")}function Sn(e){return e&&typeof e=="object"&&e[or.$transferable]}Te.isTransferDescriptor=Sn;function kn(e,t){if(!t){if(!En(e))throw Error();t=[e]}return{[or.$transferable]:!0,send:e,transferables:t}}Te.Transfer=kn;var Pt={};(function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.WorkerMessageType=e.MasterMessageType=void 0,function(t){t.cancel="cancel",t.run="run"}(e.MasterMessageType||(e.MasterMessageType={})),function(t){t.error="error",t.init="init",t.result="result",t.running="running",t.uncaughtError="uncaughtError"}(e.WorkerMessageType||(e.WorkerMessageType={}))})(Pt);var On=pe&&pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(We,"__esModule",{value:!0}),We.createProxyModule=We.createProxyFunction=void 0;const Pn=On(xt),ir=tt,Ye=ke,ar=it,Ln=Te,Je=Pt,sr=Pn.default("threads:master:messages");let jn=1;const Tn=e=>Array.from(new Set(e)),Cn=e=>e&&e.type===Je.WorkerMessageType.error,Mn=e=>e&&e.type===Je.WorkerMessageType.result,Fn=e=>e&&e.type===Je.WorkerMessageType.running;function Rn(e,t){return new ir.Observable(r=>{let o;const c=n=>{if(sr("Message from worker:",n.data),!(!n.data||n.data.uid!==t)){if(Fn(n.data))o=n.data.resultType;else if(Mn(n.data))o==="promise"?(typeof n.data.payload<"u"&&r.next(Ye.deserialize(n.data.payload)),r.complete(),e.removeEventListener("message",c)):(n.data.payload&&r.next(Ye.deserialize(n.data.payload)),n.data.complete&&(r.complete(),e.removeEventListener("message",c)));else if(Cn(n.data)){const l=Ye.deserialize(n.data.error);r.error(l),e.removeEventListener("message",c)}}};return e.addEventListener("message",c),()=>{if(o==="observable"||!o){const n={type:Je.MasterMessageType.cancel,uid:t};e.postMessage(n)}e.removeEventListener("message",c)}})}function Nn(e){if(e.length===0)return{args:[],transferables:[]};const t=[],r=[];for(const o of e)Ln.isTransferDescriptor(o)?(t.push(Ye.serialize(o.send)),r.push(...o.transferables)):t.push(Ye.serialize(o));return{args:t,transferables:r.length===0?r:Tn(r)}}function cr(e,t){return(...r)=>{const o=jn++,{args:c,transferables:n}=Nn(r),l={type:Je.MasterMessageType.run,uid:o,method:t,args:c};sr("Sending command to run function to worker:",l);try{e.postMessage(l,n)}catch(p){return ar.ObservablePromise.from(Promise.reject(p))}return ar.ObservablePromise.from(ir.multicast(Rn(e,o)))}}We.createProxyFunction=cr;function In(e,t){const r={};for(const o of t)r[o]=cr(e,o);return r}We.createProxyModule=In;var Lt=pe&&pe.__awaiter||function(e,t,r,o){function c(n){return n instanceof r?n:new r(function(l){l(n)})}return new(r||(r=Promise))(function(n,l){function p(a){try{E(o.next(a))}catch(f){l(f)}}function g(a){try{E(o.throw(a))}catch(f){l(f)}}function E(a){a.done?n(a.value):c(a.value).then(p,g)}E((o=o.apply(e,t||[])).next())})},zn=pe&&pe.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(nt,"__esModule",{value:!0}),nt.spawn=void 0;const jt=zn(xt),$n=tt,Dn=ke,Wn=ot,at=Ae,st=rr,ur=We,Un=jt.default("threads:master:messages"),Gn=jt.default("threads:master:spawn"),lr=jt.default("threads:master:thread-utils"),Bn=e=>e&&e.type==="init",qn=e=>e&&e.type==="uncaughtError",Hn=typeof process<"u"&&process.env.THREADS_WORKER_INIT_TIMEOUT?Number.parseInt(process.env.THREADS_WORKER_INIT_TIMEOUT,10):1e4;function Yn(e,t,r){return Lt(this,void 0,void 0,function*(){let o;const c=new Promise((l,p)=>{o=setTimeout(()=>p(Error(r)),t)}),n=yield Promise.race([e,c]);return clearTimeout(o),n})}function Jn(e){return new Promise((t,r)=>{const o=c=>{Un("Message from worker before finishing initialization:",c.data),Bn(c.data)?(e.removeEventListener("message",o),t(c.data)):qn(c.data)&&(e.removeEventListener("message",o),r(Dn.deserialize(c.data.error)))};e.addEventListener("message",o)})}function Vn(e,t){return new $n.Observable(r=>{const o=n=>{const l={type:st.WorkerEventType.message,data:n.data};r.next(l)},c=n=>{lr("Unhandled promise rejection event in thread:",n);const l={type:st.WorkerEventType.internalError,error:Error(n.reason)};r.next(l)};e.addEventListener("message",o),e.addEventListener("unhandledrejection",c),t.then(()=>{const n={type:st.WorkerEventType.termination};e.removeEventListener("message",o),e.removeEventListener("unhandledrejection",c),r.next(n),r.complete()})})}function Qn(e){const[t,r]=Wn.createPromiseWithResolver();return{terminate:()=>Lt(this,void 0,void 0,function*(){lr("Terminating worker"),yield e.terminate(),r()}),termination:t}}function fr(e,t,r,o){const c=r.filter(n=>n.type===st.WorkerEventType.internalError).map(n=>n.error);return Object.assign(e,{[at.$errors]:c,[at.$events]:r,[at.$terminate]:o,[at.$worker]:t})}function Kn(e,t){return Lt(this,void 0,void 0,function*(){Gn("Initializing new thread");const r=t&&t.timeout?t.timeout:Hn,c=(yield Yn(Jn(e),r,`Timeout: Did not receive an init message from worker after ${r}ms. Make sure the worker calls expose().`)).exposed,{termination:n,terminate:l}=Qn(e),p=Vn(e,n);if(c.type==="function"){const g=ur.createProxyFunction(e);return fr(g,e,p,l)}else if(c.type==="module"){const g=ur.createProxyModule(e,c.methods);return fr(g,e,p,l)}else{const g=c.type;throw Error(`Worker init message states unexpected type of expose(): ${g}`)}})}nt.spawn=Kn,function(e){Object.defineProperty(e,"__esModule",{value:!0}),e.Worker=e.BlobWorker=e.isWorkerRuntime=e.Thread=e.spawn=e.Pool=void 0;const t=je;Object.defineProperty(e,"isWorkerRuntime",{enumerable:!0,get:function(){return t.isWorkerRuntime}});var r=Yt;Object.defineProperty(e,"Pool",{enumerable:!0,get:function(){return r.Pool}});var o=nt;Object.defineProperty(e,"spawn",{enumerable:!0,get:function(){return o.spawn}});var c=He;Object.defineProperty(e,"Thread",{enumerable:!0,get:function(){return c.Thread}}),e.BlobWorker=t.getWorkerImplementation().blob,e.Worker=t.getWorkerImplementation().default}(Ut);var dr={},Zn=e=>e?typeof Symbol.observable=="symbol"&&typeof e[Symbol.observable]=="function"?e===e[Symbol.observable]():typeof e["@@observable"]=="function"?e===e["@@observable"]():!1:!1,Tt={};Object.defineProperty(Tt,"__esModule",{value:!0});const Xn=function(){const t=typeof self<"u"&&typeof Window<"u"&&self instanceof Window;return!!(typeof self<"u"&&self.postMessage&&!t)},eo=function(t,r){self.postMessage(t,r)},to=function(t){const r=c=>{t(c.data)},o=()=>{self.removeEventListener("message",r)};return self.addEventListener("message",r),o};Tt.default={isWorkerRuntime:Xn,postMessageToMaster:eo,subscribeToMasterMessages:to},function(e){var t=pe&&pe.__awaiter||function(S,R,G,Q){function W(Z){return Z instanceof G?Z:new G(function(X){X(Z)})}return new(G||(G=Promise))(function(Z,X){function B(H){try{Y(Q.next(H))}catch(te){X(te)}}function q(H){try{Y(Q.throw(H))}catch(te){X(te)}}function Y(H){H.done?Z(H.value):W(H.value).then(B,q)}Y((Q=Q.apply(S,R||[])).next())})},r=pe&&pe.__importDefault||function(S){return S&&S.__esModule?S:{default:S}};Object.defineProperty(e,"__esModule",{value:!0}),e.expose=e.isWorkerRuntime=e.Transfer=e.registerSerializer=void 0;const o=r(Zn),c=ke,n=Te,l=Pt,p=r(Tt);var g=ke;Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return g.registerSerializer}});var E=Te;Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return E.Transfer}}),e.isWorkerRuntime=p.default.isWorkerRuntime;let a=!1;const f=new Map,O=S=>S&&S.type===l.MasterMessageType.cancel,L=S=>S&&S.type===l.MasterMessageType.run,C=S=>o.default(S)||j(S);function j(S){return S&&typeof S=="object"&&typeof S.subscribe=="function"}function F(S){return n.isTransferDescriptor(S)?{payload:S.send,transferables:S.transferables}:{payload:S,transferables:void 0}}function P(){const S={type:l.WorkerMessageType.init,exposed:{type:"function"}};p.default.postMessageToMaster(S)}function m(S){const R={type:l.WorkerMessageType.init,exposed:{type:"module",methods:S}};p.default.postMessageToMaster(R)}function w(S,R){const{payload:G,transferables:Q}=F(R),W={type:l.WorkerMessageType.error,uid:S,error:c.serialize(G)};p.default.postMessageToMaster(W,Q)}function x(S,R,G){const{payload:Q,transferables:W}=F(G),Z={type:l.WorkerMessageType.result,uid:S,complete:R?!0:void 0,payload:Q};p.default.postMessageToMaster(Z,W)}function I(S,R){const G={type:l.WorkerMessageType.running,uid:S,resultType:R};p.default.postMessageToMaster(G)}function A(S){try{const R={type:l.WorkerMessageType.uncaughtError,error:c.serialize(S)};p.default.postMessageToMaster(R)}catch(R){console.error(`Not reporting uncaught error back to master thread as it occured while reporting an uncaught error already.
Latest error:`,R,`
Original error:`,S)}}function _(S,R,G){return t(this,void 0,void 0,function*(){let Q;try{Q=R(...G)}catch(Z){return w(S,Z)}const W=C(Q)?"observable":"promise";if(I(S,W),C(Q)){const Z=Q.subscribe(X=>x(S,!1,c.serialize(X)),X=>{w(S,c.serialize(X)),f.delete(S)},()=>{x(S,!0),f.delete(S)});f.set(S,Z)}else try{const Z=yield Q;x(S,!0,c.serialize(Z))}catch(Z){w(S,c.serialize(Z))}})}function J(S){if(!p.default.isWorkerRuntime())throw Error("expose() called in the master thread.");if(a)throw Error("expose() called more than once. This is not possible. Pass an object to expose() if you want to expose multiple functions.");if(a=!0,typeof S=="function")p.default.subscribeToMasterMessages(R=>{L(R)&&!R.method&&_(R.uid,S,R.args.map(c.deserialize))}),P();else if(typeof S=="object"&&S){p.default.subscribeToMasterMessages(G=>{L(G)&&G.method&&_(G.uid,S[G.method],G.args.map(c.deserialize))});const R=Object.keys(S).filter(G=>typeof S[G]=="function");m(R)}else throw Error(`Invalid argument passed to expose(). Expected a function or an object, got: ${S}`);p.default.subscribeToMasterMessages(R=>{if(O(R)){const G=R.uid,Q=f.get(G);Q&&(Q.unsubscribe(),f.delete(G))}})}e.expose=J,typeof self<"u"&&typeof self.addEventListener=="function"&&p.default.isWorkerRuntime()&&(self.addEventListener("error",S=>{setTimeout(()=>A(S.error||S),250)}),self.addEventListener("unhandledrejection",S=>{const R=S.reason;R&&typeof R.message=="string"&&setTimeout(()=>A(R),250)})),typeof process<"u"&&typeof process.on=="function"&&p.default.isWorkerRuntime()&&(process.on("uncaughtException",S=>{setTimeout(()=>A(S),250)}),process.on("unhandledRejection",S=>{S&&typeof S.message=="string"&&setTimeout(()=>A(S),250)}))}(dr),function(e){var t=pe&&pe.__createBinding||(Object.create?function(p,g,E,a){a===void 0&&(a=E),Object.defineProperty(p,a,{enumerable:!0,get:function(){return g[E]}})}:function(p,g,E,a){a===void 0&&(a=E),p[a]=g[E]}),r=pe&&pe.__exportStar||function(p,g){for(var E in p)E!=="default"&&!Object.prototype.hasOwnProperty.call(g,E)&&t(g,p,E)};Object.defineProperty(e,"__esModule",{value:!0}),e.Transfer=e.DefaultSerializer=e.expose=e.registerSerializer=void 0;var o=ke;Object.defineProperty(e,"registerSerializer",{enumerable:!0,get:function(){return o.registerSerializer}}),r(Ut,e);var c=dr;Object.defineProperty(e,"expose",{enumerable:!0,get:function(){return c.expose}});var n=Ne;Object.defineProperty(e,"DefaultSerializer",{enumerable:!0,get:function(){return n.DefaultSerializer}});var l=Te;Object.defineProperty(e,"Transfer",{enumerable:!0,get:function(){return l.Transfer}})}($t);const Fe=Ft($t);Fe.registerSerializer;const hr=Fe.spawn;Fe.BlobWorker,Fe.DefaultSerializer,Fe.Pool,Fe.Thread,Fe.Transfer;const pr=Fe.Worker;let Ve,Ct;async function ro(e){Ve||(Ve=await hr(new pr("src/offscreen/workers/synthesizer/index.js"))),Ct||(Ct=await hr(new pr("src/offscreen/workers/phonemizer/index.js")));const t=pt(e),r=t==null?void 0:t.then(async c=>c&&await Ve.makeInferenceEngine(c,e));return{$dispose(){r.then(async c=>c?(await Ve.dispose(e),!0):!1)},$inferenceEngine:r,$model:pt(e),$phonemize:async c=>{const n=await t;return n&&Ct.phonemize(n.config,c)},createdAt:Date.now(),async synthesize({phonemeIds:c},n){const l=await r;return await Ve.infer({engineId:l,phonemeIds:c,speakerId:n})}}}async function no(e,t){const r=new Int16Array(e.length);for(let n=0;n<e.length;n++){const l=Math.max(-1,Math.min(1,e[n]));r[n]=l<0?l*32768:l*32767}const o=oo(r,t);return`data:audio/wav;base64,${btoa(new Uint8Array(o).reduce((n,l)=>n+String.fromCharCode(l),""))}`}function oo(e,t){const r=new ArrayBuffer(44+e.length*2),o=new DataView(r);ct(o,0,"RIFF"),o.setUint32(4,36+e.length*2,!0),ct(o,8,"WAVE"),ct(o,12,"fmt "),o.setUint32(16,16,!0),o.setUint16(20,1,!0),o.setUint16(22,1,!0),o.setUint32(24,t,!0),o.setUint32(28,t*2,!0),o.setUint16(32,2,!0),o.setUint16(34,16,!0),ct(o,36,"data"),o.setUint32(40,e.length*2,!0);const c=o.byteOffset+44;for(let n=0;n<e.length;n++)o.setInt16(c+n*2,e[n],!0);return r}function ct(e,t,r){for(let o=0;o<r.length;o++)e.setUint8(t+o,r.charCodeAt(o))}const io={defaults:{lengthScale:1,noiseScale:.667,noiseW:.8,numChannels:1,sampleRate:22050}};function ao(e,t){if(t===0)return 0;const o=e.length/t*1e3;return Math.round(o/10)*10}function so({startTime:e,text:t}){const o=Date.now()-e;return{charsPerSecondR:ao(t,o),executor:"local",textLength:t.length,timeTaken:o}}const Qe=new Map,co=async e=>{var C;const{speakerId:t,modelId:r,text:o}=e.data;if(!r||!o)return null;const c=Date.now();if(!await Cr(r))return zt(e),null;const l=await Qe.get(r);if(!l){const j=ro(r);if(Qe.set(r,j),Qe.size>ht){const F=await Promise.all(Array.from(Qe.entries()).map(async([P,m])=>{const w=await m;return[P,w]}));F.sort((P,m)=>m[1].createdAt-P[1].createdAt);for(let P=ht;P<F.length;P++){const[m,w]=F[P];w.$dispose(),Qe.delete(m)}}return null}const p=await(l==null?void 0:l.$phonemize(o)),g=p&&await l.synthesize(p,t),E=g&&new Float32Array(g),a=await l.$model,f=((C=a==null?void 0:a.config.audio)==null?void 0:C.sample_rate)||io.defaults.sampleRate,O=E&&await no(E,f),L=so({startTime:c,text:o});return{audioUrl:O,stats:L}},uo=async e=>{if(e.action==="generateTTS")return co(e);if(e.action==="fetchTtsModel")return zt(e);if(e.action==="listTtsModels")return Mr();if(e.action==="deleteTtsModel")return Fr(e);if(e.action==="deleteAllTtsModels")return Rr()};let Se=null,ut=!1,Ce=null;const lo=e=>new Promise(async t=>{Ce&&await Ce,await(async()=>{Se&&(await Se.pause(),Se.currentTime=0,Se.onended=null)})(),Se=new Audio(e.data.audioUrl),Se.playbackRate=e.data.playbackRate,Se.volume=e.data.volume,Se.onended=()=>{ut=!1,Ce=null,t({message:"ended"})};try{Ce=Se.play(),await Ce,ut=!0}catch(o){console.error("Play error:",o),ut=!1,Ce=null,t({message:"error"})}}),fo=async()=>(Ce&&await Ce,Se&&(await Se.pause(),Se.currentTime=0,Se.onended=null),ut=!1,Ce=null,{message:"stopped"});async function ho(e){switch(e.action){case"play":return await lo(e);case"stop":return await fo()}}const mr=e=>new Promise((t,r)=>{let o=new FileReader;o.onload=function(){let c=o.result;t(c)},o.readAsDataURL(e)});function po(e,t){const r=t-e+1;return Math.floor(Math.random()*r)+e}function mo(e){const t=e.split(","),r=t[0].match(/:(.*?);/);if(!r)throw new Error("Invalid data URL");const o=r[1],c=atob(t[1]),n=c.length,l=new Uint8Array(n);for(let p=0;p<n;p++)l[p]=c.charCodeAt(p);return new Blob([l],{type:o})}function go(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var gr={exports:{}};/*! For license information please see tesseract.min.js.LICENSE.txt */(function(e,t){(function(r,o){e.exports=o()})(self,()=>(()=>{var r={670:n=>{function l(p){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(g){return typeof g}:function(g){return g&&typeof Symbol=="function"&&g.constructor===Symbol&&g!==Symbol.prototype?"symbol":typeof g},l(p)}n.exports=function(){return typeof window<"u"&&l(window.process)==="object"&&window.process.type==="renderer"||!(typeof process>"u"||l(process.versions)!=="object"||!process.versions.electron)||(typeof navigator>"u"?"undefined":l(navigator))==="object"&&typeof navigator.userAgent=="string"&&navigator.userAgent.indexOf("Electron")>=0}},760:(n,l,p)=>{function g(a){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},g(a)}var E=function(a){var f,O=Object.prototype,L=O.hasOwnProperty,C=Object.defineProperty||function(s,i,h){s[i]=h.value},j=typeof Symbol=="function"?Symbol:{},F=j.iterator||"@@iterator",P=j.asyncIterator||"@@asyncIterator",m=j.toStringTag||"@@toStringTag";function w(s,i,h){return Object.defineProperty(s,i,{value:h,enumerable:!0,configurable:!0,writable:!0}),s[i]}try{w({},"")}catch{w=function(i,h,d){return i[h]=d}}function x(s,i,h,d){var u=i&&i.prototype instanceof G?i:G,v=Object.create(u.prototype),D=new b(d||[]);return C(v,"_invoke",{value:te(s,h,D)}),v}function I(s,i,h){try{return{type:"normal",arg:s.call(i,h)}}catch(d){return{type:"throw",arg:d}}}a.wrap=x;var A="suspendedStart",_="suspendedYield",J="executing",S="completed",R={};function G(){}function Q(){}function W(){}var Z={};w(Z,F,function(){return this});var X=Object.getPrototypeOf,B=X&&X(X(y([])));B&&B!==O&&L.call(B,F)&&(Z=B);var q=W.prototype=G.prototype=Object.create(Z);function Y(s){["next","throw","return"].forEach(function(i){w(s,i,function(h){return this._invoke(i,h)})})}function H(s,i){function h(u,v,D,z){var K=I(s[u],s,v);if(K.type!=="throw"){var re=K.arg,le=re.value;return le&&g(le)==="object"&&L.call(le,"__await")?i.resolve(le.__await).then(function(ie){h("next",ie,D,z)},function(ie){h("throw",ie,D,z)}):i.resolve(le).then(function(ie){re.value=ie,D(re)},function(ie){return h("throw",ie,D,z)})}z(K.arg)}var d;C(this,"_invoke",{value:function(u,v){function D(){return new i(function(z,K){h(u,v,z,K)})}return d=d?d.then(D,D):D()}})}function te(s,i,h){var d=A;return function(u,v){if(d===J)throw new Error("Generator is already running");if(d===S){if(u==="throw")throw v;return M()}for(h.method=u,h.arg=v;;){var D=h.delegate;if(D){var z=k(D,h);if(z){if(z===R)continue;return z}}if(h.method==="next")h.sent=h._sent=h.arg;else if(h.method==="throw"){if(d===A)throw d=S,h.arg;h.dispatchException(h.arg)}else h.method==="return"&&h.abrupt("return",h.arg);d=J;var K=I(s,i,h);if(K.type==="normal"){if(d=h.done?S:_,K.arg===R)continue;return{value:K.arg,done:h.done}}K.type==="throw"&&(d=S,h.method="throw",h.arg=K.arg)}}}function k(s,i){var h=i.method,d=s.iterator[h];if(d===f)return i.delegate=null,h==="throw"&&s.iterator.return&&(i.method="return",i.arg=f,k(s,i),i.method==="throw")||h!=="return"&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+h+"' method")),R;var u=I(d,s.iterator,i.arg);if(u.type==="throw")return i.method="throw",i.arg=u.arg,i.delegate=null,R;var v=u.arg;return v?v.done?(i[s.resultName]=v.value,i.next=s.nextLoc,i.method!=="return"&&(i.method="next",i.arg=f),i.delegate=null,R):v:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,R)}function T(s){var i={tryLoc:s[0]};1 in s&&(i.catchLoc=s[1]),2 in s&&(i.finallyLoc=s[2],i.afterLoc=s[3]),this.tryEntries.push(i)}function N(s){var i=s.completion||{};i.type="normal",delete i.arg,s.completion=i}function b(s){this.tryEntries=[{tryLoc:"root"}],s.forEach(T,this),this.reset(!0)}function y(s){if(s){var i=s[F];if(i)return i.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length)){var h=-1,d=function u(){for(;++h<s.length;)if(L.call(s,h))return u.value=s[h],u.done=!1,u;return u.value=f,u.done=!0,u};return d.next=d}}return{next:M}}function M(){return{value:f,done:!0}}return Q.prototype=W,C(q,"constructor",{value:W,configurable:!0}),C(W,"constructor",{value:Q,configurable:!0}),Q.displayName=w(W,m,"GeneratorFunction"),a.isGeneratorFunction=function(s){var i=typeof s=="function"&&s.constructor;return!!i&&(i===Q||(i.displayName||i.name)==="GeneratorFunction")},a.mark=function(s){return Object.setPrototypeOf?Object.setPrototypeOf(s,W):(s.__proto__=W,w(s,m,"GeneratorFunction")),s.prototype=Object.create(q),s},a.awrap=function(s){return{__await:s}},Y(H.prototype),w(H.prototype,P,function(){return this}),a.AsyncIterator=H,a.async=function(s,i,h,d,u){u===void 0&&(u=Promise);var v=new H(x(s,i,h,d),u);return a.isGeneratorFunction(i)?v:v.next().then(function(D){return D.done?D.value:v.next()})},Y(q),w(q,m,"Generator"),w(q,F,function(){return this}),w(q,"toString",function(){return"[object Generator]"}),a.keys=function(s){var i=Object(s),h=[];for(var d in i)h.push(d);return h.reverse(),function u(){for(;h.length;){var v=h.pop();if(v in i)return u.value=v,u.done=!1,u}return u.done=!0,u}},a.values=y,b.prototype={constructor:b,reset:function(s){if(this.prev=0,this.next=0,this.sent=this._sent=f,this.done=!1,this.delegate=null,this.method="next",this.arg=f,this.tryEntries.forEach(N),!s)for(var i in this)i.charAt(0)==="t"&&L.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=f)},stop:function(){this.done=!0;var s=this.tryEntries[0].completion;if(s.type==="throw")throw s.arg;return this.rval},dispatchException:function(s){if(this.done)throw s;var i=this;function h(K,re){return v.type="throw",v.arg=s,i.next=K,re&&(i.method="next",i.arg=f),!!re}for(var d=this.tryEntries.length-1;d>=0;--d){var u=this.tryEntries[d],v=u.completion;if(u.tryLoc==="root")return h("end");if(u.tryLoc<=this.prev){var D=L.call(u,"catchLoc"),z=L.call(u,"finallyLoc");if(D&&z){if(this.prev<u.catchLoc)return h(u.catchLoc,!0);if(this.prev<u.finallyLoc)return h(u.finallyLoc)}else if(D){if(this.prev<u.catchLoc)return h(u.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return h(u.finallyLoc)}}}},abrupt:function(s,i){for(var h=this.tryEntries.length-1;h>=0;--h){var d=this.tryEntries[h];if(d.tryLoc<=this.prev&&L.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var u=d;break}}u&&(s==="break"||s==="continue")&&u.tryLoc<=i&&i<=u.finallyLoc&&(u=null);var v=u?u.completion:{};return v.type=s,v.arg=i,u?(this.method="next",this.next=u.finallyLoc,R):this.complete(v)},complete:function(s,i){if(s.type==="throw")throw s.arg;return s.type==="break"||s.type==="continue"?this.next=s.arg:s.type==="return"?(this.rval=this.arg=s.arg,this.method="return",this.next="end"):s.type==="normal"&&i&&(this.next=i),R},finish:function(s){for(var i=this.tryEntries.length-1;i>=0;--i){var h=this.tryEntries[i];if(h.finallyLoc===s)return this.complete(h.completion,h.afterLoc),N(h),R}},catch:function(s){for(var i=this.tryEntries.length-1;i>=0;--i){var h=this.tryEntries[i];if(h.tryLoc===s){var d=h.completion;if(d.type==="throw"){var u=d.arg;N(h)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(s,i,h){return this.delegate={iterator:y(s),resultName:i,nextLoc:h},this.method==="next"&&(this.arg=f),R}},a}(g(n=p.nmd(n))==="object"?n.exports:{});try{regeneratorRuntime=E}catch{(typeof globalThis>"u"?"undefined":g(globalThis))==="object"?globalThis.regeneratorRuntime=E:Function("r","regeneratorRuntime = r")(E)}},793:(n,l,p)=>{function g(j){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(F){return typeof F}:function(F){return F&&typeof Symbol=="function"&&F.constructor===Symbol&&F!==Symbol.prototype?"symbol":typeof F},g(j)}function E(){E=function(){return j};var j={},F=Object.prototype,P=F.hasOwnProperty,m=Object.defineProperty||function(s,i,h){s[i]=h.value},w=typeof Symbol=="function"?Symbol:{},x=w.iterator||"@@iterator",I=w.asyncIterator||"@@asyncIterator",A=w.toStringTag||"@@toStringTag";function _(s,i,h){return Object.defineProperty(s,i,{value:h,enumerable:!0,configurable:!0,writable:!0}),s[i]}try{_({},"")}catch{_=function(i,h,d){return i[h]=d}}function J(s,i,h,d){var u=i&&i.prototype instanceof G?i:G,v=Object.create(u.prototype),D=new b(d||[]);return m(v,"_invoke",{value:te(s,h,D)}),v}function S(s,i,h){try{return{type:"normal",arg:s.call(i,h)}}catch(d){return{type:"throw",arg:d}}}j.wrap=J;var R={};function G(){}function Q(){}function W(){}var Z={};_(Z,x,function(){return this});var X=Object.getPrototypeOf,B=X&&X(X(y([])));B&&B!==F&&P.call(B,x)&&(Z=B);var q=W.prototype=G.prototype=Object.create(Z);function Y(s){["next","throw","return"].forEach(function(i){_(s,i,function(h){return this._invoke(i,h)})})}function H(s,i){function h(u,v,D,z){var K=S(s[u],s,v);if(K.type!=="throw"){var re=K.arg,le=re.value;return le&&g(le)=="object"&&P.call(le,"__await")?i.resolve(le.__await).then(function(ie){h("next",ie,D,z)},function(ie){h("throw",ie,D,z)}):i.resolve(le).then(function(ie){re.value=ie,D(re)},function(ie){return h("throw",ie,D,z)})}z(K.arg)}var d;m(this,"_invoke",{value:function(u,v){function D(){return new i(function(z,K){h(u,v,z,K)})}return d=d?d.then(D,D):D()}})}function te(s,i,h){var d="suspendedStart";return function(u,v){if(d==="executing")throw new Error("Generator is already running");if(d==="completed"){if(u==="throw")throw v;return{value:void 0,done:!0}}for(h.method=u,h.arg=v;;){var D=h.delegate;if(D){var z=k(D,h);if(z){if(z===R)continue;return z}}if(h.method==="next")h.sent=h._sent=h.arg;else if(h.method==="throw"){if(d==="suspendedStart")throw d="completed",h.arg;h.dispatchException(h.arg)}else h.method==="return"&&h.abrupt("return",h.arg);d="executing";var K=S(s,i,h);if(K.type==="normal"){if(d=h.done?"completed":"suspendedYield",K.arg===R)continue;return{value:K.arg,done:h.done}}K.type==="throw"&&(d="completed",h.method="throw",h.arg=K.arg)}}}function k(s,i){var h=i.method,d=s.iterator[h];if(d===void 0)return i.delegate=null,h==="throw"&&s.iterator.return&&(i.method="return",i.arg=void 0,k(s,i),i.method==="throw")||h!=="return"&&(i.method="throw",i.arg=new TypeError("The iterator does not provide a '"+h+"' method")),R;var u=S(d,s.iterator,i.arg);if(u.type==="throw")return i.method="throw",i.arg=u.arg,i.delegate=null,R;var v=u.arg;return v?v.done?(i[s.resultName]=v.value,i.next=s.nextLoc,i.method!=="return"&&(i.method="next",i.arg=void 0),i.delegate=null,R):v:(i.method="throw",i.arg=new TypeError("iterator result is not an object"),i.delegate=null,R)}function T(s){var i={tryLoc:s[0]};1 in s&&(i.catchLoc=s[1]),2 in s&&(i.finallyLoc=s[2],i.afterLoc=s[3]),this.tryEntries.push(i)}function N(s){var i=s.completion||{};i.type="normal",delete i.arg,s.completion=i}function b(s){this.tryEntries=[{tryLoc:"root"}],s.forEach(T,this),this.reset(!0)}function y(s){if(s){var i=s[x];if(i)return i.call(s);if(typeof s.next=="function")return s;if(!isNaN(s.length)){var h=-1,d=function u(){for(;++h<s.length;)if(P.call(s,h))return u.value=s[h],u.done=!1,u;return u.value=void 0,u.done=!0,u};return d.next=d}}return{next:M}}function M(){return{value:void 0,done:!0}}return Q.prototype=W,m(q,"constructor",{value:W,configurable:!0}),m(W,"constructor",{value:Q,configurable:!0}),Q.displayName=_(W,A,"GeneratorFunction"),j.isGeneratorFunction=function(s){var i=typeof s=="function"&&s.constructor;return!!i&&(i===Q||(i.displayName||i.name)==="GeneratorFunction")},j.mark=function(s){return Object.setPrototypeOf?Object.setPrototypeOf(s,W):(s.__proto__=W,_(s,A,"GeneratorFunction")),s.prototype=Object.create(q),s},j.awrap=function(s){return{__await:s}},Y(H.prototype),_(H.prototype,I,function(){return this}),j.AsyncIterator=H,j.async=function(s,i,h,d,u){u===void 0&&(u=Promise);var v=new H(J(s,i,h,d),u);return j.isGeneratorFunction(i)?v:v.next().then(function(D){return D.done?D.value:v.next()})},Y(q),_(q,A,"Generator"),_(q,x,function(){return this}),_(q,"toString",function(){return"[object Generator]"}),j.keys=function(s){var i=Object(s),h=[];for(var d in i)h.push(d);return h.reverse(),function u(){for(;h.length;){var v=h.pop();if(v in i)return u.value=v,u.done=!1,u}return u.done=!0,u}},j.values=y,b.prototype={constructor:b,reset:function(s){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(N),!s)for(var i in this)i.charAt(0)==="t"&&P.call(this,i)&&!isNaN(+i.slice(1))&&(this[i]=void 0)},stop:function(){this.done=!0;var s=this.tryEntries[0].completion;if(s.type==="throw")throw s.arg;return this.rval},dispatchException:function(s){if(this.done)throw s;var i=this;function h(K,re){return v.type="throw",v.arg=s,i.next=K,re&&(i.method="next",i.arg=void 0),!!re}for(var d=this.tryEntries.length-1;d>=0;--d){var u=this.tryEntries[d],v=u.completion;if(u.tryLoc==="root")return h("end");if(u.tryLoc<=this.prev){var D=P.call(u,"catchLoc"),z=P.call(u,"finallyLoc");if(D&&z){if(this.prev<u.catchLoc)return h(u.catchLoc,!0);if(this.prev<u.finallyLoc)return h(u.finallyLoc)}else if(D){if(this.prev<u.catchLoc)return h(u.catchLoc,!0)}else{if(!z)throw new Error("try statement without catch or finally");if(this.prev<u.finallyLoc)return h(u.finallyLoc)}}}},abrupt:function(s,i){for(var h=this.tryEntries.length-1;h>=0;--h){var d=this.tryEntries[h];if(d.tryLoc<=this.prev&&P.call(d,"finallyLoc")&&this.prev<d.finallyLoc){var u=d;break}}u&&(s==="break"||s==="continue")&&u.tryLoc<=i&&i<=u.finallyLoc&&(u=null);var v=u?u.completion:{};return v.type=s,v.arg=i,u?(this.method="next",this.next=u.finallyLoc,R):this.complete(v)},complete:function(s,i){if(s.type==="throw")throw s.arg;return s.type==="break"||s.type==="continue"?this.next=s.arg:s.type==="return"?(this.rval=this.arg=s.arg,this.method="return",this.next="end"):s.type==="normal"&&i&&(this.next=i),R},finish:function(s){for(var i=this.tryEntries.length-1;i>=0;--i){var h=this.tryEntries[i];if(h.finallyLoc===s)return this.complete(h.completion,h.afterLoc),N(h),R}},catch:function(s){for(var i=this.tryEntries.length-1;i>=0;--i){var h=this.tryEntries[i];if(h.tryLoc===s){var d=h.completion;if(d.type==="throw"){var u=d.arg;N(h)}return u}}throw new Error("illegal catch attempt")},delegateYield:function(s,i,h){return this.delegate={iterator:y(s),resultName:i,nextLoc:h},this.method==="next"&&(this.arg=void 0),R}},j}function a(j,F,P,m,w,x,I){try{var A=j[x](I),_=A.value}catch(J){return void P(J)}A.done?F(_):Promise.resolve(_).then(m,w)}function f(j){return function(){var F=this,P=arguments;return new Promise(function(m,w){var x=j.apply(F,P);function I(_){a(x,m,w,I,A,"next",_)}function A(_){a(x,m,w,I,A,"throw",_)}I(void 0)})}}var O=p(311),L=function(){var j=f(E().mark(function F(P,m,w){var x;return E().wrap(function(I){for(;;)switch(I.prev=I.next){case 0:return I.next=2,O(m,1,w);case 2:return x=I.sent,I.abrupt("return",x.recognize(P).finally(f(E().mark(function A(){return E().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,x.terminate();case 2:case"end":return _.stop()}},A)}))));case 4:case"end":return I.stop()}},F)}));return function(F,P,m){return j.apply(this,arguments)}}(),C=function(){var j=f(E().mark(function F(P,m){var w;return E().wrap(function(x){for(;;)switch(x.prev=x.next){case 0:return x.next=2,O("osd",0,m);case 2:return w=x.sent,x.abrupt("return",w.detect(P).finally(f(E().mark(function I(){return E().wrap(function(A){for(;;)switch(A.prev=A.next){case 0:return A.next=2,w.terminate();case 2:case"end":return A.stop()}},I)}))));case 4:case"end":return x.stop()}},F)}));return function(F,P){return j.apply(this,arguments)}}();n.exports={recognize:L,detect:C}},847:n=>{n.exports={TESSERACT_ONLY:0,LSTM_ONLY:1,TESSERACT_LSTM_COMBINED:2,DEFAULT:3}},711:n=>{n.exports={OSD_ONLY:"0",AUTO_OSD:"1",AUTO_ONLY:"2",AUTO:"3",SINGLE_COLUMN:"4",SINGLE_BLOCK_VERT_TEXT:"5",SINGLE_BLOCK:"6",SINGLE_LINE:"7",SINGLE_WORD:"8",CIRCLE_WORD:"9",SINGLE_CHAR:"10",SPARSE_TEXT:"11",SPARSE_TEXT_OSD:"12",RAW_LINE:"13"}},341:n=>{n.exports={workerBlobURL:!0,logger:function(){}}},5:n=>{n.exports={AFR:"afr",AMH:"amh",ARA:"ara",ASM:"asm",AZE:"aze",AZE_CYRL:"aze_cyrl",BEL:"bel",BEN:"ben",BOD:"bod",BOS:"bos",BUL:"bul",CAT:"cat",CEB:"ceb",CES:"ces",CHI_SIM:"chi_sim",CHI_TRA:"chi_tra",CHR:"chr",CYM:"cym",DAN:"dan",DEU:"deu",DZO:"dzo",ELL:"ell",ENG:"eng",ENM:"enm",EPO:"epo",EST:"est",EUS:"eus",FAS:"fas",FIN:"fin",FRA:"fra",FRK:"frk",FRM:"frm",GLE:"gle",GLG:"glg",GRC:"grc",GUJ:"guj",HAT:"hat",HEB:"heb",HIN:"hin",HRV:"hrv",HUN:"hun",IKU:"iku",IND:"ind",ISL:"isl",ITA:"ita",ITA_OLD:"ita_old",JAV:"jav",JPN:"jpn",KAN:"kan",KAT:"kat",KAT_OLD:"kat_old",KAZ:"kaz",KHM:"khm",KIR:"kir",KOR:"kor",KUR:"kur",LAO:"lao",LAT:"lat",LAV:"lav",LIT:"lit",MAL:"mal",MAR:"mar",MKD:"mkd",MLT:"mlt",MSA:"msa",MYA:"mya",NEP:"nep",NLD:"nld",NOR:"nor",ORI:"ori",PAN:"pan",POL:"pol",POR:"por",PUS:"pus",RON:"ron",RUS:"rus",SAN:"san",SIN:"sin",SLK:"slk",SLV:"slv",SPA:"spa",SPA_OLD:"spa_old",SQI:"sqi",SRP:"srp",SRP_LATN:"srp_latn",SWA:"swa",SWE:"swe",SYR:"syr",TAM:"tam",TEL:"tel",TGK:"tgk",TGL:"tgl",THA:"tha",TIR:"tir",TUR:"tur",UIG:"uig",UKR:"ukr",URD:"urd",UZB:"uzb",UZB_CYRL:"uzb_cyrl",VIE:"vie",YID:"yid"}},106:(n,l,p)=>{var g=p(313),E=0;n.exports=function(a){var f=a.id,O=a.action,L=a.payload,C=L===void 0?{}:L,j=f;return j===void 0&&(j=g("Job",E),E+=1),{id:j,action:O,payload:C}}},936:function(n,l,p){function g(m){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},g(m)}var E=this;function a(){a=function(){return m};var m={},w=Object.prototype,x=w.hasOwnProperty,I=Object.defineProperty||function(d,u,v){d[u]=v.value},A=typeof Symbol=="function"?Symbol:{},_=A.iterator||"@@iterator",J=A.asyncIterator||"@@asyncIterator",S=A.toStringTag||"@@toStringTag";function R(d,u,v){return Object.defineProperty(d,u,{value:v,enumerable:!0,configurable:!0,writable:!0}),d[u]}try{R({},"")}catch{R=function(u,v,D){return u[v]=D}}function G(d,u,v,D){var z=u&&u.prototype instanceof Z?u:Z,K=Object.create(z.prototype),re=new s(D||[]);return I(K,"_invoke",{value:N(d,v,re)}),K}function Q(d,u,v){try{return{type:"normal",arg:d.call(u,v)}}catch(D){return{type:"throw",arg:D}}}m.wrap=G;var W={};function Z(){}function X(){}function B(){}var q={};R(q,_,function(){return this});var Y=Object.getPrototypeOf,H=Y&&Y(Y(i([])));H&&H!==w&&x.call(H,_)&&(q=H);var te=B.prototype=Z.prototype=Object.create(q);function k(d){["next","throw","return"].forEach(function(u){R(d,u,function(v){return this._invoke(u,v)})})}function T(d,u){function v(z,K,re,le){var ie=Q(d[z],d,K);if(ie.type!=="throw"){var he=ie.arg,Oe=he.value;return Oe&&g(Oe)=="object"&&x.call(Oe,"__await")?u.resolve(Oe.__await).then(function(_e){v("next",_e,re,le)},function(_e){v("throw",_e,re,le)}):u.resolve(Oe).then(function(_e){he.value=_e,re(he)},function(_e){return v("throw",_e,re,le)})}le(ie.arg)}var D;I(this,"_invoke",{value:function(z,K){function re(){return new u(function(le,ie){v(z,K,le,ie)})}return D=D?D.then(re,re):re()}})}function N(d,u,v){var D="suspendedStart";return function(z,K){if(D==="executing")throw new Error("Generator is already running");if(D==="completed"){if(z==="throw")throw K;return{value:void 0,done:!0}}for(v.method=z,v.arg=K;;){var re=v.delegate;if(re){var le=b(re,v);if(le){if(le===W)continue;return le}}if(v.method==="next")v.sent=v._sent=v.arg;else if(v.method==="throw"){if(D==="suspendedStart")throw D="completed",v.arg;v.dispatchException(v.arg)}else v.method==="return"&&v.abrupt("return",v.arg);D="executing";var ie=Q(d,u,v);if(ie.type==="normal"){if(D=v.done?"completed":"suspendedYield",ie.arg===W)continue;return{value:ie.arg,done:v.done}}ie.type==="throw"&&(D="completed",v.method="throw",v.arg=ie.arg)}}}function b(d,u){var v=u.method,D=d.iterator[v];if(D===void 0)return u.delegate=null,v==="throw"&&d.iterator.return&&(u.method="return",u.arg=void 0,b(d,u),u.method==="throw")||v!=="return"&&(u.method="throw",u.arg=new TypeError("The iterator does not provide a '"+v+"' method")),W;var z=Q(D,d.iterator,u.arg);if(z.type==="throw")return u.method="throw",u.arg=z.arg,u.delegate=null,W;var K=z.arg;return K?K.done?(u[d.resultName]=K.value,u.next=d.nextLoc,u.method!=="return"&&(u.method="next",u.arg=void 0),u.delegate=null,W):K:(u.method="throw",u.arg=new TypeError("iterator result is not an object"),u.delegate=null,W)}function y(d){var u={tryLoc:d[0]};1 in d&&(u.catchLoc=d[1]),2 in d&&(u.finallyLoc=d[2],u.afterLoc=d[3]),this.tryEntries.push(u)}function M(d){var u=d.completion||{};u.type="normal",delete u.arg,d.completion=u}function s(d){this.tryEntries=[{tryLoc:"root"}],d.forEach(y,this),this.reset(!0)}function i(d){if(d){var u=d[_];if(u)return u.call(d);if(typeof d.next=="function")return d;if(!isNaN(d.length)){var v=-1,D=function z(){for(;++v<d.length;)if(x.call(d,v))return z.value=d[v],z.done=!1,z;return z.value=void 0,z.done=!0,z};return D.next=D}}return{next:h}}function h(){return{value:void 0,done:!0}}return X.prototype=B,I(te,"constructor",{value:B,configurable:!0}),I(B,"constructor",{value:X,configurable:!0}),X.displayName=R(B,S,"GeneratorFunction"),m.isGeneratorFunction=function(d){var u=typeof d=="function"&&d.constructor;return!!u&&(u===X||(u.displayName||u.name)==="GeneratorFunction")},m.mark=function(d){return Object.setPrototypeOf?Object.setPrototypeOf(d,B):(d.__proto__=B,R(d,S,"GeneratorFunction")),d.prototype=Object.create(te),d},m.awrap=function(d){return{__await:d}},k(T.prototype),R(T.prototype,J,function(){return this}),m.AsyncIterator=T,m.async=function(d,u,v,D,z){z===void 0&&(z=Promise);var K=new T(G(d,u,v,D),z);return m.isGeneratorFunction(u)?K:K.next().then(function(re){return re.done?re.value:K.next()})},k(te),R(te,S,"Generator"),R(te,_,function(){return this}),R(te,"toString",function(){return"[object Generator]"}),m.keys=function(d){var u=Object(d),v=[];for(var D in u)v.push(D);return v.reverse(),function z(){for(;v.length;){var K=v.pop();if(K in u)return z.value=K,z.done=!1,z}return z.done=!0,z}},m.values=i,s.prototype={constructor:s,reset:function(d){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(M),!d)for(var u in this)u.charAt(0)==="t"&&x.call(this,u)&&!isNaN(+u.slice(1))&&(this[u]=void 0)},stop:function(){this.done=!0;var d=this.tryEntries[0].completion;if(d.type==="throw")throw d.arg;return this.rval},dispatchException:function(d){if(this.done)throw d;var u=this;function v(ie,he){return K.type="throw",K.arg=d,u.next=ie,he&&(u.method="next",u.arg=void 0),!!he}for(var D=this.tryEntries.length-1;D>=0;--D){var z=this.tryEntries[D],K=z.completion;if(z.tryLoc==="root")return v("end");if(z.tryLoc<=this.prev){var re=x.call(z,"catchLoc"),le=x.call(z,"finallyLoc");if(re&&le){if(this.prev<z.catchLoc)return v(z.catchLoc,!0);if(this.prev<z.finallyLoc)return v(z.finallyLoc)}else if(re){if(this.prev<z.catchLoc)return v(z.catchLoc,!0)}else{if(!le)throw new Error("try statement without catch or finally");if(this.prev<z.finallyLoc)return v(z.finallyLoc)}}}},abrupt:function(d,u){for(var v=this.tryEntries.length-1;v>=0;--v){var D=this.tryEntries[v];if(D.tryLoc<=this.prev&&x.call(D,"finallyLoc")&&this.prev<D.finallyLoc){var z=D;break}}z&&(d==="break"||d==="continue")&&z.tryLoc<=u&&u<=z.finallyLoc&&(z=null);var K=z?z.completion:{};return K.type=d,K.arg=u,z?(this.method="next",this.next=z.finallyLoc,W):this.complete(K)},complete:function(d,u){if(d.type==="throw")throw d.arg;return d.type==="break"||d.type==="continue"?this.next=d.arg:d.type==="return"?(this.rval=this.arg=d.arg,this.method="return",this.next="end"):d.type==="normal"&&u&&(this.next=u),W},finish:function(d){for(var u=this.tryEntries.length-1;u>=0;--u){var v=this.tryEntries[u];if(v.finallyLoc===d)return this.complete(v.completion,v.afterLoc),M(v),W}},catch:function(d){for(var u=this.tryEntries.length-1;u>=0;--u){var v=this.tryEntries[u];if(v.tryLoc===d){var D=v.completion;if(D.type==="throw"){var z=D.arg;M(v)}return z}}throw new Error("illegal catch attempt")},delegateYield:function(d,u,v){return this.delegate={iterator:i(d),resultName:u,nextLoc:v},this.method==="next"&&(this.arg=void 0),W}},m}function f(m,w){(w==null||w>m.length)&&(w=m.length);for(var x=0,I=new Array(w);x<w;x++)I[x]=m[x];return I}function O(m,w,x,I,A,_,J){try{var S=m[_](J),R=S.value}catch(G){return void x(G)}S.done?w(R):Promise.resolve(R).then(I,A)}function L(m){return function(){var w=this,x=arguments;return new Promise(function(I,A){var _=m.apply(w,x);function J(R){O(_,I,A,J,S,"next",R)}function S(R){O(_,I,A,J,S,"throw",R)}J(void 0)})}}var C=p(106),j=p(185).log,F=p(313),P=0;n.exports=function(){var m=F("Scheduler",P),w={},x={},I=[];P+=1;var A=function(){return Object.keys(w).length},_=function(){if(I.length!==0){for(var G=Object.keys(w),Q=0;Q<G.length;Q+=1)if(x[G[Q]]===void 0){I[0](w[G[Q]]);break}}},J=function(G,Q){return new Promise(function(W,Z){var X=C({action:G,payload:Q});I.push(function(){var B=L(a().mark(function q(Y){return a().wrap(function(H){for(;;)switch(H.prev=H.next){case 0:return I.shift(),x[Y.id]=X,H.prev=2,H.t0=W,H.next=6,Y[G].apply(E,[].concat(function(k){if(Array.isArray(k))return f(k)}(te=Q)||function(k){if(typeof Symbol<"u"&&k[Symbol.iterator]!=null||k["@@iterator"]!=null)return Array.from(k)}(te)||function(k,T){if(k){if(typeof k=="string")return f(k,T);var N=Object.prototype.toString.call(k).slice(8,-1);return N==="Object"&&k.constructor&&(N=k.constructor.name),N==="Map"||N==="Set"?Array.from(k):N==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(N)?f(k,T):void 0}}(te)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}(),[X.id]));case 6:H.t1=H.sent,(0,H.t0)(H.t1),H.next=13;break;case 10:H.prev=10,H.t2=H.catch(2),Z(H.t2);case 13:return H.prev=13,delete x[Y.id],_(),H.finish(13);case 17:case"end":return H.stop()}var te},q,null,[[2,10,13,17]])}));return function(q){return B.apply(this,arguments)}}()),j("[".concat(m,"]: Add ").concat(X.id," to JobQueue")),j("[".concat(m,"]: JobQueue length=").concat(I.length)),_()})},S=function(){var G=L(a().mark(function Q(W){var Z,X,B,q=arguments;return a().wrap(function(Y){for(;;)switch(Y.prev=Y.next){case 0:if(A()!==0){Y.next=2;break}throw Error("[".concat(m,"]: You need to have at least one worker before adding jobs"));case 2:for(Z=q.length,X=new Array(Z>1?Z-1:0),B=1;B<Z;B++)X[B-1]=q[B];return Y.abrupt("return",J(W,X));case 4:case"end":return Y.stop()}},Q)}));return function(Q){return G.apply(this,arguments)}}(),R=function(){var G=L(a().mark(function Q(){return a().wrap(function(W){for(;;)switch(W.prev=W.next){case 0:Object.keys(w).forEach(function(){var Z=L(a().mark(function X(B){return a().wrap(function(q){for(;;)switch(q.prev=q.next){case 0:return q.next=2,w[B].terminate();case 2:case"end":return q.stop()}},X)}));return function(X){return Z.apply(this,arguments)}}()),I=[];case 2:case"end":return W.stop()}},Q)}));return function(){return G.apply(this,arguments)}}();return{addWorker:function(G){return w[G.id]=G,j("[".concat(m,"]: Add ").concat(G.id)),j("[".concat(m,"]: Number of workers=").concat(A())),_(),G.id},addJob:S,terminate:R,getQueueLen:function(){return I.length},getNumWorkers:A}}},311:(n,l,p)=>{function g(B){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(q){return typeof q}:function(q){return q&&typeof Symbol=="function"&&q.constructor===Symbol&&q!==Symbol.prototype?"symbol":typeof q},g(B)}var E=["logger","errorHandler"];function a(){a=function(){return B};var B={},q=Object.prototype,Y=q.hasOwnProperty,H=Object.defineProperty||function(U,$,V){U[$]=V.value},te=typeof Symbol=="function"?Symbol:{},k=te.iterator||"@@iterator",T=te.asyncIterator||"@@asyncIterator",N=te.toStringTag||"@@toStringTag";function b(U,$,V){return Object.defineProperty(U,$,{value:V,enumerable:!0,configurable:!0,writable:!0}),U[$]}try{b({},"")}catch{b=function($,V,oe){return $[V]=oe}}function y(U,$,V,oe){var ee=$&&$.prototype instanceof i?$:i,ce=Object.create(ee.prototype),de=new _e(oe||[]);return H(ce,"_invoke",{value:le(U,V,de)}),ce}function M(U,$,V){try{return{type:"normal",arg:U.call($,V)}}catch(oe){return{type:"throw",arg:oe}}}B.wrap=y;var s={};function i(){}function h(){}function d(){}var u={};b(u,k,function(){return this});var v=Object.getPrototypeOf,D=v&&v(v(Ue([])));D&&D!==q&&Y.call(D,k)&&(u=D);var z=d.prototype=i.prototype=Object.create(u);function K(U){["next","throw","return"].forEach(function($){b(U,$,function(V){return this._invoke($,V)})})}function re(U,$){function V(ee,ce,de,ve){var we=M(U[ee],U,ce);if(we.type!=="throw"){var Me=we.arg,Re=Me.value;return Re&&g(Re)=="object"&&Y.call(Re,"__await")?$.resolve(Re.__await).then(function(Le){V("next",Le,de,ve)},function(Le){V("throw",Le,de,ve)}):$.resolve(Re).then(function(Le){Me.value=Le,de(Me)},function(Le){return V("throw",Le,de,ve)})}ve(we.arg)}var oe;H(this,"_invoke",{value:function(ee,ce){function de(){return new $(function(ve,we){V(ee,ce,ve,we)})}return oe=oe?oe.then(de,de):de()}})}function le(U,$,V){var oe="suspendedStart";return function(ee,ce){if(oe==="executing")throw new Error("Generator is already running");if(oe==="completed"){if(ee==="throw")throw ce;return{value:void 0,done:!0}}for(V.method=ee,V.arg=ce;;){var de=V.delegate;if(de){var ve=ie(de,V);if(ve){if(ve===s)continue;return ve}}if(V.method==="next")V.sent=V._sent=V.arg;else if(V.method==="throw"){if(oe==="suspendedStart")throw oe="completed",V.arg;V.dispatchException(V.arg)}else V.method==="return"&&V.abrupt("return",V.arg);oe="executing";var we=M(U,$,V);if(we.type==="normal"){if(oe=V.done?"completed":"suspendedYield",we.arg===s)continue;return{value:we.arg,done:V.done}}we.type==="throw"&&(oe="completed",V.method="throw",V.arg=we.arg)}}}function ie(U,$){var V=$.method,oe=U.iterator[V];if(oe===void 0)return $.delegate=null,V==="throw"&&U.iterator.return&&($.method="return",$.arg=void 0,ie(U,$),$.method==="throw")||V!=="return"&&($.method="throw",$.arg=new TypeError("The iterator does not provide a '"+V+"' method")),s;var ee=M(oe,U.iterator,$.arg);if(ee.type==="throw")return $.method="throw",$.arg=ee.arg,$.delegate=null,s;var ce=ee.arg;return ce?ce.done?($[U.resultName]=ce.value,$.next=U.nextLoc,$.method!=="return"&&($.method="next",$.arg=void 0),$.delegate=null,s):ce:($.method="throw",$.arg=new TypeError("iterator result is not an object"),$.delegate=null,s)}function he(U){var $={tryLoc:U[0]};1 in U&&($.catchLoc=U[1]),2 in U&&($.finallyLoc=U[2],$.afterLoc=U[3]),this.tryEntries.push($)}function Oe(U){var $=U.completion||{};$.type="normal",delete $.arg,U.completion=$}function _e(U){this.tryEntries=[{tryLoc:"root"}],U.forEach(he,this),this.reset(!0)}function Ue(U){if(U){var $=U[k];if($)return $.call(U);if(typeof U.next=="function")return U;if(!isNaN(U.length)){var V=-1,oe=function ee(){for(;++V<U.length;)if(Y.call(U,V))return ee.value=U[V],ee.done=!1,ee;return ee.value=void 0,ee.done=!0,ee};return oe.next=oe}}return{next:lt}}function lt(){return{value:void 0,done:!0}}return h.prototype=d,H(z,"constructor",{value:d,configurable:!0}),H(d,"constructor",{value:h,configurable:!0}),h.displayName=b(d,N,"GeneratorFunction"),B.isGeneratorFunction=function(U){var $=typeof U=="function"&&U.constructor;return!!$&&($===h||($.displayName||$.name)==="GeneratorFunction")},B.mark=function(U){return Object.setPrototypeOf?Object.setPrototypeOf(U,d):(U.__proto__=d,b(U,N,"GeneratorFunction")),U.prototype=Object.create(z),U},B.awrap=function(U){return{__await:U}},K(re.prototype),b(re.prototype,T,function(){return this}),B.AsyncIterator=re,B.async=function(U,$,V,oe,ee){ee===void 0&&(ee=Promise);var ce=new re(y(U,$,V,oe),ee);return B.isGeneratorFunction($)?ce:ce.next().then(function(de){return de.done?de.value:ce.next()})},K(z),b(z,N,"Generator"),b(z,k,function(){return this}),b(z,"toString",function(){return"[object Generator]"}),B.keys=function(U){var $=Object(U),V=[];for(var oe in $)V.push(oe);return V.reverse(),function ee(){for(;V.length;){var ce=V.pop();if(ce in $)return ee.value=ce,ee.done=!1,ee}return ee.done=!0,ee}},B.values=Ue,_e.prototype={constructor:_e,reset:function(U){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(Oe),!U)for(var $ in this)$.charAt(0)==="t"&&Y.call(this,$)&&!isNaN(+$.slice(1))&&(this[$]=void 0)},stop:function(){this.done=!0;var U=this.tryEntries[0].completion;if(U.type==="throw")throw U.arg;return this.rval},dispatchException:function(U){if(this.done)throw U;var $=this;function V(we,Me){return ce.type="throw",ce.arg=U,$.next=we,Me&&($.method="next",$.arg=void 0),!!Me}for(var oe=this.tryEntries.length-1;oe>=0;--oe){var ee=this.tryEntries[oe],ce=ee.completion;if(ee.tryLoc==="root")return V("end");if(ee.tryLoc<=this.prev){var de=Y.call(ee,"catchLoc"),ve=Y.call(ee,"finallyLoc");if(de&&ve){if(this.prev<ee.catchLoc)return V(ee.catchLoc,!0);if(this.prev<ee.finallyLoc)return V(ee.finallyLoc)}else if(de){if(this.prev<ee.catchLoc)return V(ee.catchLoc,!0)}else{if(!ve)throw new Error("try statement without catch or finally");if(this.prev<ee.finallyLoc)return V(ee.finallyLoc)}}}},abrupt:function(U,$){for(var V=this.tryEntries.length-1;V>=0;--V){var oe=this.tryEntries[V];if(oe.tryLoc<=this.prev&&Y.call(oe,"finallyLoc")&&this.prev<oe.finallyLoc){var ee=oe;break}}ee&&(U==="break"||U==="continue")&&ee.tryLoc<=$&&$<=ee.finallyLoc&&(ee=null);var ce=ee?ee.completion:{};return ce.type=U,ce.arg=$,ee?(this.method="next",this.next=ee.finallyLoc,s):this.complete(ce)},complete:function(U,$){if(U.type==="throw")throw U.arg;return U.type==="break"||U.type==="continue"?this.next=U.arg:U.type==="return"?(this.rval=this.arg=U.arg,this.method="return",this.next="end"):U.type==="normal"&&$&&(this.next=$),s},finish:function(U){for(var $=this.tryEntries.length-1;$>=0;--$){var V=this.tryEntries[$];if(V.finallyLoc===U)return this.complete(V.completion,V.afterLoc),Oe(V),s}},catch:function(U){for(var $=this.tryEntries.length-1;$>=0;--$){var V=this.tryEntries[$];if(V.tryLoc===U){var oe=V.completion;if(oe.type==="throw"){var ee=oe.arg;Oe(V)}return ee}}throw new Error("illegal catch attempt")},delegateYield:function(U,$,V){return this.delegate={iterator:Ue(U),resultName:$,nextLoc:V},this.method==="next"&&(this.arg=void 0),s}},B}function f(B,q){(q==null||q>B.length)&&(q=B.length);for(var Y=0,H=new Array(q);Y<q;Y++)H[Y]=B[Y];return H}function O(B,q){var Y=Object.keys(B);if(Object.getOwnPropertySymbols){var H=Object.getOwnPropertySymbols(B);q&&(H=H.filter(function(te){return Object.getOwnPropertyDescriptor(B,te).enumerable})),Y.push.apply(Y,H)}return Y}function L(B){for(var q=1;q<arguments.length;q++){var Y=arguments[q]!=null?arguments[q]:{};q%2?O(Object(Y),!0).forEach(function(H){C(B,H,Y[H])}):Object.getOwnPropertyDescriptors?Object.defineProperties(B,Object.getOwnPropertyDescriptors(Y)):O(Object(Y)).forEach(function(H){Object.defineProperty(B,H,Object.getOwnPropertyDescriptor(Y,H))})}return B}function C(B,q,Y){return(q=function(H){var te=function(k,T){if(g(k)!=="object"||k===null)return k;var N=k[Symbol.toPrimitive];if(N!==void 0){var b=N.call(k,"string");if(g(b)!=="object")return b;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(k)}(H);return g(te)==="symbol"?te:String(te)}(q))in B?Object.defineProperty(B,q,{value:Y,enumerable:!0,configurable:!0,writable:!0}):B[q]=Y,B}function j(B,q){if(B==null)return{};var Y,H,te=function(T,N){if(T==null)return{};var b,y,M={},s=Object.keys(T);for(y=0;y<s.length;y++)b=s[y],N.indexOf(b)>=0||(M[b]=T[b]);return M}(B,q);if(Object.getOwnPropertySymbols){var k=Object.getOwnPropertySymbols(B);for(H=0;H<k.length;H++)Y=k[H],q.indexOf(Y)>=0||Object.prototype.propertyIsEnumerable.call(B,Y)&&(te[Y]=B[Y])}return te}function F(B,q,Y,H,te,k,T){try{var N=B[k](T),b=N.value}catch(y){return void Y(y)}N.done?q(b):Promise.resolve(b).then(H,te)}function P(B){return function(){var q=this,Y=arguments;return new Promise(function(H,te){var k=B.apply(q,Y);function T(b){F(k,H,te,T,N,"next",b)}function N(b){F(k,H,te,T,N,"throw",b)}T(void 0)})}}var m=p(187),w=p(549),x=p(106),I=p(185).log,A=p(313),_=p(847),J=p(581),S=J.defaultOptions,R=J.spawnWorker,G=J.terminateWorker,Q=J.onMessage,W=J.loadImage,Z=J.send,X=0;n.exports=P(a().mark(function B(){var q,Y,H,te,k,T,N,b,y,M,s,i,h,d,u,v,D,z,K,re,le,ie,he,Oe,_e,Ue,lt,U,$,V,oe,ee,ce,de,ve,we,Me,Re,Le,vr,Pe=arguments;return a().wrap(function(ft){for(;;)switch(ft.prev=ft.next){case 0:return q=Pe.length>0&&Pe[0]!==void 0?Pe[0]:"eng",Y=Pe.length>1&&Pe[1]!==void 0?Pe[1]:_.LSTM_ONLY,H=Pe.length>2&&Pe[2]!==void 0?Pe[2]:{},te=Pe.length>3&&Pe[3]!==void 0?Pe[3]:{},k=A("Worker",X),T=m(L(L({},S),H)),N=T.logger,b=T.errorHandler,y=j(T,E),M={},s={},i=typeof q=="string"?q.split("+"):q,h=Y,d=te,u=[_.DEFAULT,_.LSTM_ONLY].includes(Y)&&!y.legacyCore,z=new Promise(function(ne,ae){D=ne,v=ae}),K=function(ne){v(ne.message)},(re=R(y)).onerror=K,X+=1,le=function(ne,ae){M[ne]=ae},ie=function(ne,ae){s[ne]=ae},he=function(ne){var ae=ne.id,fe=ne.action,xe=ne.payload;return new Promise(function(se,ge){I("[".concat(k,"]: Start ").concat(ae,", action=").concat(fe));var ye="".concat(fe,"-").concat(ae);le(ye,se),ie(ye,ge),Z(re,{workerId:k,jobId:ae,action:fe,payload:xe})})},Oe=function(){return console.warn("`load` is depreciated and should be removed from code (workers now come pre-loaded)")},_e=function(ne){return he(x({id:ne,action:"load",payload:{options:{lstmOnly:u,corePath:y.corePath,logging:y.logging}}}))},Ue=function(ne,ae,fe){return he(x({id:fe,action:"FS",payload:{method:"writeFile",args:[ne,ae]}}))},lt=function(ne,ae){return he(x({id:ae,action:"FS",payload:{method:"readFile",args:[ne,{encoding:"utf8"}]}}))},U=function(ne,ae){return he(x({id:ae,action:"FS",payload:{method:"unlink",args:[ne]}}))},$=function(ne,ae,fe){return he(x({id:fe,action:"FS",payload:{method:ne,args:ae}}))},V=function(){return console.warn("`loadLanguage` is depreciated and should be removed from code (workers now come with language pre-loaded)")},oe=function(ne,ae){return he(x({id:ae,action:"loadLanguage",payload:{langs:ne,options:{langPath:y.langPath,dataPath:y.dataPath,cachePath:y.cachePath,cacheMethod:y.cacheMethod,gzip:y.gzip,lstmOnly:[_.DEFAULT,_.LSTM_ONLY].includes(h)&&!y.legacyLang}}}))},ee=function(){return console.warn("`initialize` is depreciated and should be removed from code (workers now come pre-initialized)")},ce=function(ne,ae,fe,xe){return he(x({id:xe,action:"initialize",payload:{langs:ne,oem:ae,config:fe}}))},de=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"eng",ae=arguments.length>1?arguments[1]:void 0,fe=arguments.length>2?arguments[2]:void 0,xe=arguments.length>3?arguments[3]:void 0;if(u&&[_.TESSERACT_ONLY,_.TESSERACT_LSTM_COMBINED].includes(ae))throw Error("Legacy model requested but code missing.");var se=ae||h;h=se;var ge=fe||d;d=ge;var ye,ue=(typeof ne=="string"?ne.split("+"):ne).filter(function(be){return!i.includes(be)});return i.push.apply(i,function(be){if(Array.isArray(be))return f(be)}(ye=ue)||function(be){if(typeof Symbol<"u"&&be[Symbol.iterator]!=null||be["@@iterator"]!=null)return Array.from(be)}(ye)||function(be,wr){if(be){if(typeof be=="string")return f(be,wr);var Ge=Object.prototype.toString.call(be).slice(8,-1);return Ge==="Object"&&be.constructor&&(Ge=be.constructor.name),Ge==="Map"||Ge==="Set"?Array.from(be):Ge==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(Ge)?f(be,wr):void 0}}(ye)||function(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}()),ue.length>0?oe(ue,xe).then(function(){return ce(ne,se,ge,xe)}):ce(ne,se,ge,xe)},ve=function(){return he(x({id:arguments.length>1?arguments[1]:void 0,action:"setParameters",payload:{params:arguments.length>0&&arguments[0]!==void 0?arguments[0]:{}}}))},we=function(){var ne=P(a().mark(function ae(fe){var xe,se,ge,ye=arguments;return a().wrap(function(ue){for(;;)switch(ue.prev=ue.next){case 0:return xe=ye.length>1&&ye[1]!==void 0?ye[1]:{},se=ye.length>2&&ye[2]!==void 0?ye[2]:{blocks:!0,text:!0,hocr:!0,tsv:!0},ge=ye.length>3?ye[3]:void 0,ue.t0=he,ue.t1=x,ue.t2=ge,ue.next=8,W(fe);case 8:return ue.t3=ue.sent,ue.t4=xe,ue.t5=se,ue.t6={image:ue.t3,options:ue.t4,output:ue.t5},ue.t7={id:ue.t2,action:"recognize",payload:ue.t6},ue.t8=(0,ue.t1)(ue.t7),ue.abrupt("return",(0,ue.t0)(ue.t8));case 15:case"end":return ue.stop()}},ae)}));return function(ae){return ne.apply(this,arguments)}}(),Me=function(){var ne=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"Tesseract OCR Result",ae=arguments.length>1&&arguments[1]!==void 0&&arguments[1],fe=arguments.length>2?arguments[2]:void 0;return console.log("`getPDF` function is depreciated. `recognize` option `savePDF` should be used instead."),he(x({id:fe,action:"getPDF",payload:{title:ne,textonly:ae}}))},Re=function(){var ne=P(a().mark(function ae(fe,xe){return a().wrap(function(se){for(;;)switch(se.prev=se.next){case 0:if(!u){se.next=2;break}throw Error("`worker.detect` requires Legacy model, which was not loaded.");case 2:return se.t0=he,se.t1=x,se.t2=xe,se.next=7,W(fe);case 7:return se.t3=se.sent,se.t4={image:se.t3},se.t5={id:se.t2,action:"detect",payload:se.t4},se.t6=(0,se.t1)(se.t5),se.abrupt("return",(0,se.t0)(se.t6));case 12:case"end":return se.stop()}},ae)}));return function(ae,fe){return ne.apply(this,arguments)}}(),Le=function(){var ne=P(a().mark(function ae(){return a().wrap(function(fe){for(;;)switch(fe.prev=fe.next){case 0:return re!==null&&(G(re),re=null),fe.abrupt("return",Promise.resolve());case 2:case"end":return fe.stop()}},ae)}));return function(){return ne.apply(this,arguments)}}(),Q(re,function(ne){var ae=ne.workerId,fe=ne.jobId,xe=ne.status,se=ne.action,ge=ne.data,ye="".concat(se,"-").concat(fe);if(xe==="resolve"){I("[".concat(ae,"]: Complete ").concat(fe));var ue=ge;se==="recognize"?ue=w(ge):se==="getPDF"&&(ue=Array.from(L(L({},ge),{},{length:Object.keys(ge).length}))),M[ye]({jobId:fe,data:ue})}else if(xe==="reject"){if(s[ye](ge),se==="load"&&v(ge),!b)throw Error(ge);b(ge)}else xe==="progress"&&N(L(L({},ge),{},{userJobId:fe}))}),vr={id:k,worker:re,setResolve:le,setReject:ie,load:Oe,writeText:Ue,readText:lt,removeFile:U,FS:$,loadLanguage:V,initialize:ee,reinitialize:de,setParameters:ve,recognize:we,getPDF:Me,detect:Re,terminate:Le},_e().then(function(){return oe(q)}).then(function(){return ce(q,Y,te)}).then(function(){return D(vr)}).catch(function(){}),ft.abrupt("return",z);case 40:case"end":return ft.stop()}},B)}))},352:(n,l,p)=>{function g(m){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},g(m)}function E(m,w){var x=Object.keys(m);if(Object.getOwnPropertySymbols){var I=Object.getOwnPropertySymbols(m);w&&(I=I.filter(function(A){return Object.getOwnPropertyDescriptor(m,A).enumerable})),x.push.apply(x,I)}return x}function a(m,w,x){return(w=function(I){var A=function(_,J){if(g(_)!=="object"||_===null)return _;var S=_[Symbol.toPrimitive];if(S!==void 0){var R=S.call(_,"string");if(g(R)!=="object")return R;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(_)}(I);return g(A)==="symbol"?A:String(A)}(w))in m?Object.defineProperty(m,w,{value:x,enumerable:!0,configurable:!0,writable:!0}):m[w]=x,m}p(760);var f=p(936),O=p(311),L=p(793),C=p(5),j=p(847),F=p(711),P=p(185).setLogging;n.exports=function(m){for(var w=1;w<arguments.length;w++){var x=arguments[w]!=null?arguments[w]:{};w%2?E(Object(x),!0).forEach(function(I){a(m,I,x[I])}):Object.getOwnPropertyDescriptors?Object.defineProperties(m,Object.getOwnPropertyDescriptors(x)):E(Object(x)).forEach(function(I){Object.defineProperty(m,I,Object.getOwnPropertyDescriptor(x,I))})}return m}({languages:C,OEM:j,PSM:F,createScheduler:f,createWorker:O,setLogging:P},L)},549:n=>{function l(a){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},l(a)}function p(a,f){var O=Object.keys(a);if(Object.getOwnPropertySymbols){var L=Object.getOwnPropertySymbols(a);f&&(L=L.filter(function(C){return Object.getOwnPropertyDescriptor(a,C).enumerable})),O.push.apply(O,L)}return O}function g(a){for(var f=1;f<arguments.length;f++){var O=arguments[f]!=null?arguments[f]:{};f%2?p(Object(O),!0).forEach(function(L){E(a,L,O[L])}):Object.getOwnPropertyDescriptors?Object.defineProperties(a,Object.getOwnPropertyDescriptors(O)):p(Object(O)).forEach(function(L){Object.defineProperty(a,L,Object.getOwnPropertyDescriptor(O,L))})}return a}function E(a,f,O){return(f=function(L){var C=function(j,F){if(l(j)!=="object"||j===null)return j;var P=j[Symbol.toPrimitive];if(P!==void 0){var m=P.call(j,"string");if(l(m)!=="object")return m;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(j)}(L);return l(C)==="symbol"?C:String(C)}(f))in a?Object.defineProperty(a,f,{value:O,enumerable:!0,configurable:!0,writable:!0}):a[f]=O,a}n.exports=function(a){var f=[],O=[],L=[],C=[],j=[];return a.blocks&&a.blocks.forEach(function(F){F.paragraphs.forEach(function(P){P.lines.forEach(function(m){m.words.forEach(function(w){w.symbols.forEach(function(x){j.push(g(g({},x),{},{page:a,block:F,paragraph:P,line:m,word:w}))}),C.push(g(g({},w),{},{page:a,block:F,paragraph:P,line:m}))}),L.push(g(g({},m),{},{page:a,block:F,paragraph:P}))}),O.push(g(g({},P),{},{page:a,block:F}))}),f.push(g(g({},F),{},{page:a}))}),g(g({},a),{},{blocks:f,paragraphs:O,lines:L,words:C,symbols:j})}},129:(n,l,p)=>{function g(a){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(f){return typeof f}:function(f){return f&&typeof Symbol=="function"&&f.constructor===Symbol&&f!==Symbol.prototype?"symbol":typeof f},g(a)}var E=p(670);n.exports=function(a){var f={};return typeof WorkerGlobalScope<"u"?f.type="webworker":E()?f.type="electron":(typeof document>"u"?"undefined":g(document))==="object"?f.type="browser":(typeof process>"u"?"undefined":g(process))==="object"&&(f.type="node"),a===void 0?f:f[a]}},313:n=>{n.exports=function(l,p){return"".concat(l,"-").concat(p,"-").concat(Math.random().toString(16).slice(3,8))}},185:function(n,l){var p=this,g=!1;l.logging=g,l.setLogging=function(E){g=E},l.log=function(){for(var E=arguments.length,a=new Array(E),f=0;f<E;f++)a[f]=arguments[f];return g?console.log.apply(p,a):null}},187:(n,l,p)=>{function g(O){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},g(O)}function E(O,L){var C=Object.keys(O);if(Object.getOwnPropertySymbols){var j=Object.getOwnPropertySymbols(O);L&&(j=j.filter(function(F){return Object.getOwnPropertyDescriptor(O,F).enumerable})),C.push.apply(C,j)}return C}function a(O,L,C){return(L=function(j){var F=function(P,m){if(g(P)!=="object"||P===null)return P;var w=P[Symbol.toPrimitive];if(w!==void 0){var x=w.call(P,"string");if(g(x)!=="object")return x;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(P)}(j);return g(F)==="symbol"?F:String(F)}(L))in O?Object.defineProperty(O,L,{value:C,enumerable:!0,configurable:!0,writable:!0}):O[L]=C,O}var f=p(129)("type")==="browser"?function(O){return new URL(O,window.location.href).href}:function(O){return O};n.exports=function(O){var L=function(C){for(var j=1;j<arguments.length;j++){var F=arguments[j]!=null?arguments[j]:{};j%2?E(Object(F),!0).forEach(function(P){a(C,P,F[P])}):Object.getOwnPropertyDescriptors?Object.defineProperties(C,Object.getOwnPropertyDescriptors(F)):E(Object(F)).forEach(function(P){Object.defineProperty(C,P,Object.getOwnPropertyDescriptor(F,P))})}return C}({},O);return["corePath","workerPath","langPath"].forEach(function(C){O[C]&&(L[C]=f(L[C]))}),L}},854:(n,l,p)=>{function g(L){return g=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(C){return typeof C}:function(C){return C&&typeof Symbol=="function"&&C.constructor===Symbol&&C!==Symbol.prototype?"symbol":typeof C},g(L)}function E(L,C){var j=Object.keys(L);if(Object.getOwnPropertySymbols){var F=Object.getOwnPropertySymbols(L);C&&(F=F.filter(function(P){return Object.getOwnPropertyDescriptor(L,P).enumerable})),j.push.apply(j,F)}return j}function a(L){for(var C=1;C<arguments.length;C++){var j=arguments[C]!=null?arguments[C]:{};C%2?E(Object(j),!0).forEach(function(F){f(L,F,j[F])}):Object.getOwnPropertyDescriptors?Object.defineProperties(L,Object.getOwnPropertyDescriptors(j)):E(Object(j)).forEach(function(F){Object.defineProperty(L,F,Object.getOwnPropertyDescriptor(j,F))})}return L}function f(L,C,j){return(C=function(F){var P=function(m,w){if(g(m)!=="object"||m===null)return m;var x=m[Symbol.toPrimitive];if(x!==void 0){var I=x.call(m,"string");if(g(I)!=="object")return I;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(m)}(F);return g(P)==="symbol"?P:String(P)}(C))in L?Object.defineProperty(L,C,{value:j,enumerable:!0,configurable:!0,writable:!0}):L[C]=j,L}p(147).i8;var O=p(341);n.exports=a(a({},O),{},{})},581:(n,l,p)=>{var g=p(854),E=p(676),a=p(100),f=p(202),O=p(772),L=p(931);n.exports={defaultOptions:g,spawnWorker:E,terminateWorker:a,onMessage:f,send:O,loadImage:L}},931:n=>{function l(O){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(L){return typeof L}:function(L){return L&&typeof Symbol=="function"&&L.constructor===Symbol&&L!==Symbol.prototype?"symbol":typeof L},l(O)}function p(){p=function(){return O};var O={},L=Object.prototype,C=L.hasOwnProperty,j=Object.defineProperty||function(b,y,M){b[y]=M.value},F=typeof Symbol=="function"?Symbol:{},P=F.iterator||"@@iterator",m=F.asyncIterator||"@@asyncIterator",w=F.toStringTag||"@@toStringTag";function x(b,y,M){return Object.defineProperty(b,y,{value:M,enumerable:!0,configurable:!0,writable:!0}),b[y]}try{x({},"")}catch{x=function(y,M,s){return y[M]=s}}function I(b,y,M,s){var i=y&&y.prototype instanceof J?y:J,h=Object.create(i.prototype),d=new k(s||[]);return j(h,"_invoke",{value:q(b,M,d)}),h}function A(b,y,M){try{return{type:"normal",arg:b.call(y,M)}}catch(s){return{type:"throw",arg:s}}}O.wrap=I;var _={};function J(){}function S(){}function R(){}var G={};x(G,P,function(){return this});var Q=Object.getPrototypeOf,W=Q&&Q(Q(T([])));W&&W!==L&&C.call(W,P)&&(G=W);var Z=R.prototype=J.prototype=Object.create(G);function X(b){["next","throw","return"].forEach(function(y){x(b,y,function(M){return this._invoke(y,M)})})}function B(b,y){function M(i,h,d,u){var v=A(b[i],b,h);if(v.type!=="throw"){var D=v.arg,z=D.value;return z&&l(z)=="object"&&C.call(z,"__await")?y.resolve(z.__await).then(function(K){M("next",K,d,u)},function(K){M("throw",K,d,u)}):y.resolve(z).then(function(K){D.value=K,d(D)},function(K){return M("throw",K,d,u)})}u(v.arg)}var s;j(this,"_invoke",{value:function(i,h){function d(){return new y(function(u,v){M(i,h,u,v)})}return s=s?s.then(d,d):d()}})}function q(b,y,M){var s="suspendedStart";return function(i,h){if(s==="executing")throw new Error("Generator is already running");if(s==="completed"){if(i==="throw")throw h;return{value:void 0,done:!0}}for(M.method=i,M.arg=h;;){var d=M.delegate;if(d){var u=Y(d,M);if(u){if(u===_)continue;return u}}if(M.method==="next")M.sent=M._sent=M.arg;else if(M.method==="throw"){if(s==="suspendedStart")throw s="completed",M.arg;M.dispatchException(M.arg)}else M.method==="return"&&M.abrupt("return",M.arg);s="executing";var v=A(b,y,M);if(v.type==="normal"){if(s=M.done?"completed":"suspendedYield",v.arg===_)continue;return{value:v.arg,done:M.done}}v.type==="throw"&&(s="completed",M.method="throw",M.arg=v.arg)}}}function Y(b,y){var M=y.method,s=b.iterator[M];if(s===void 0)return y.delegate=null,M==="throw"&&b.iterator.return&&(y.method="return",y.arg=void 0,Y(b,y),y.method==="throw")||M!=="return"&&(y.method="throw",y.arg=new TypeError("The iterator does not provide a '"+M+"' method")),_;var i=A(s,b.iterator,y.arg);if(i.type==="throw")return y.method="throw",y.arg=i.arg,y.delegate=null,_;var h=i.arg;return h?h.done?(y[b.resultName]=h.value,y.next=b.nextLoc,y.method!=="return"&&(y.method="next",y.arg=void 0),y.delegate=null,_):h:(y.method="throw",y.arg=new TypeError("iterator result is not an object"),y.delegate=null,_)}function H(b){var y={tryLoc:b[0]};1 in b&&(y.catchLoc=b[1]),2 in b&&(y.finallyLoc=b[2],y.afterLoc=b[3]),this.tryEntries.push(y)}function te(b){var y=b.completion||{};y.type="normal",delete y.arg,b.completion=y}function k(b){this.tryEntries=[{tryLoc:"root"}],b.forEach(H,this),this.reset(!0)}function T(b){if(b){var y=b[P];if(y)return y.call(b);if(typeof b.next=="function")return b;if(!isNaN(b.length)){var M=-1,s=function i(){for(;++M<b.length;)if(C.call(b,M))return i.value=b[M],i.done=!1,i;return i.value=void 0,i.done=!0,i};return s.next=s}}return{next:N}}function N(){return{value:void 0,done:!0}}return S.prototype=R,j(Z,"constructor",{value:R,configurable:!0}),j(R,"constructor",{value:S,configurable:!0}),S.displayName=x(R,w,"GeneratorFunction"),O.isGeneratorFunction=function(b){var y=typeof b=="function"&&b.constructor;return!!y&&(y===S||(y.displayName||y.name)==="GeneratorFunction")},O.mark=function(b){return Object.setPrototypeOf?Object.setPrototypeOf(b,R):(b.__proto__=R,x(b,w,"GeneratorFunction")),b.prototype=Object.create(Z),b},O.awrap=function(b){return{__await:b}},X(B.prototype),x(B.prototype,m,function(){return this}),O.AsyncIterator=B,O.async=function(b,y,M,s,i){i===void 0&&(i=Promise);var h=new B(I(b,y,M,s),i);return O.isGeneratorFunction(y)?h:h.next().then(function(d){return d.done?d.value:h.next()})},X(Z),x(Z,w,"Generator"),x(Z,P,function(){return this}),x(Z,"toString",function(){return"[object Generator]"}),O.keys=function(b){var y=Object(b),M=[];for(var s in y)M.push(s);return M.reverse(),function i(){for(;M.length;){var h=M.pop();if(h in y)return i.value=h,i.done=!1,i}return i.done=!0,i}},O.values=T,k.prototype={constructor:k,reset:function(b){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(te),!b)for(var y in this)y.charAt(0)==="t"&&C.call(this,y)&&!isNaN(+y.slice(1))&&(this[y]=void 0)},stop:function(){this.done=!0;var b=this.tryEntries[0].completion;if(b.type==="throw")throw b.arg;return this.rval},dispatchException:function(b){if(this.done)throw b;var y=this;function M(v,D){return h.type="throw",h.arg=b,y.next=v,D&&(y.method="next",y.arg=void 0),!!D}for(var s=this.tryEntries.length-1;s>=0;--s){var i=this.tryEntries[s],h=i.completion;if(i.tryLoc==="root")return M("end");if(i.tryLoc<=this.prev){var d=C.call(i,"catchLoc"),u=C.call(i,"finallyLoc");if(d&&u){if(this.prev<i.catchLoc)return M(i.catchLoc,!0);if(this.prev<i.finallyLoc)return M(i.finallyLoc)}else if(d){if(this.prev<i.catchLoc)return M(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return M(i.finallyLoc)}}}},abrupt:function(b,y){for(var M=this.tryEntries.length-1;M>=0;--M){var s=this.tryEntries[M];if(s.tryLoc<=this.prev&&C.call(s,"finallyLoc")&&this.prev<s.finallyLoc){var i=s;break}}i&&(b==="break"||b==="continue")&&i.tryLoc<=y&&y<=i.finallyLoc&&(i=null);var h=i?i.completion:{};return h.type=b,h.arg=y,i?(this.method="next",this.next=i.finallyLoc,_):this.complete(h)},complete:function(b,y){if(b.type==="throw")throw b.arg;return b.type==="break"||b.type==="continue"?this.next=b.arg:b.type==="return"?(this.rval=this.arg=b.arg,this.method="return",this.next="end"):b.type==="normal"&&y&&(this.next=y),_},finish:function(b){for(var y=this.tryEntries.length-1;y>=0;--y){var M=this.tryEntries[y];if(M.finallyLoc===b)return this.complete(M.completion,M.afterLoc),te(M),_}},catch:function(b){for(var y=this.tryEntries.length-1;y>=0;--y){var M=this.tryEntries[y];if(M.tryLoc===b){var s=M.completion;if(s.type==="throw"){var i=s.arg;te(M)}return i}}throw new Error("illegal catch attempt")},delegateYield:function(b,y,M){return this.delegate={iterator:T(b),resultName:y,nextLoc:M},this.method==="next"&&(this.arg=void 0),_}},O}function g(O,L,C,j,F,P,m){try{var w=O[P](m),x=w.value}catch(I){return void C(I)}w.done?L(x):Promise.resolve(x).then(j,F)}function E(O){return function(){var L=this,C=arguments;return new Promise(function(j,F){var P=O.apply(L,C);function m(x){g(P,j,F,m,w,"next",x)}function w(x){g(P,j,F,m,w,"throw",x)}m(void 0)})}}var a=function(O){return new Promise(function(L,C){var j=new FileReader;j.onload=function(){L(j.result)},j.onerror=function(F){var P=F.target.error.code;C(Error("File could not be read! Code=".concat(P)))},j.readAsArrayBuffer(O)})},f=function(){var O=E(p().mark(function L(C){var j,F,P;return p().wrap(function(m){for(;;)switch(m.prev=m.next){case 0:if(j=C,C!==void 0){m.next=3;break}return m.abrupt("return","undefined");case 3:if(typeof C!="string"){m.next=16;break}if(!/data:image\/([a-zA-Z]*);base64,([^"]*)/.test(C)){m.next=8;break}j=atob(C.split(",")[1]).split("").map(function(w){return w.charCodeAt(0)}),m.next=14;break;case 8:return m.next=10,fetch(C);case 10:return F=m.sent,m.next=13,F.arrayBuffer();case 13:j=m.sent;case 14:m.next=43;break;case 16:if(!(typeof HTMLElement<"u"&&C instanceof HTMLElement)){m.next=30;break}if(C.tagName!=="IMG"){m.next=21;break}return m.next=20,f(C.src);case 20:j=m.sent;case 21:if(C.tagName!=="VIDEO"){m.next=25;break}return m.next=24,f(C.poster);case 24:j=m.sent;case 25:if(C.tagName!=="CANVAS"){m.next=28;break}return m.next=28,new Promise(function(w){C.toBlob(function(){var x=E(p().mark(function I(A){return p().wrap(function(_){for(;;)switch(_.prev=_.next){case 0:return _.next=2,a(A);case 2:j=_.sent,w();case 4:case"end":return _.stop()}},I)}));return function(I){return x.apply(this,arguments)}}())});case 28:m.next=43;break;case 30:if(!(typeof OffscreenCanvas<"u"&&C instanceof OffscreenCanvas)){m.next=39;break}return m.next=33,C.convertToBlob();case 33:return P=m.sent,m.next=36,a(P);case 36:j=m.sent,m.next=43;break;case 39:if(!(C instanceof File||C instanceof Blob)){m.next=43;break}return m.next=42,a(C);case 42:j=m.sent;case 43:return m.abrupt("return",new Uint8Array(j));case 44:case"end":return m.stop()}},L)}));return function(L){return O.apply(this,arguments)}}();n.exports=f},202:n=>{n.exports=function(l,p){l.onmessage=function(g){var E=g.data;p(E)}}},772:n=>{function l(E){return l=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(a){return typeof a}:function(a){return a&&typeof Symbol=="function"&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},l(E)}function p(){p=function(){return E};var E={},a=Object.prototype,f=a.hasOwnProperty,O=Object.defineProperty||function(k,T,N){k[T]=N.value},L=typeof Symbol=="function"?Symbol:{},C=L.iterator||"@@iterator",j=L.asyncIterator||"@@asyncIterator",F=L.toStringTag||"@@toStringTag";function P(k,T,N){return Object.defineProperty(k,T,{value:N,enumerable:!0,configurable:!0,writable:!0}),k[T]}try{P({},"")}catch{P=function(T,N,b){return T[N]=b}}function m(k,T,N,b){var y=T&&T.prototype instanceof I?T:I,M=Object.create(y.prototype),s=new Y(b||[]);return O(M,"_invoke",{value:Z(k,N,s)}),M}function w(k,T,N){try{return{type:"normal",arg:k.call(T,N)}}catch(b){return{type:"throw",arg:b}}}E.wrap=m;var x={};function I(){}function A(){}function _(){}var J={};P(J,C,function(){return this});var S=Object.getPrototypeOf,R=S&&S(S(H([])));R&&R!==a&&f.call(R,C)&&(J=R);var G=_.prototype=I.prototype=Object.create(J);function Q(k){["next","throw","return"].forEach(function(T){P(k,T,function(N){return this._invoke(T,N)})})}function W(k,T){function N(y,M,s,i){var h=w(k[y],k,M);if(h.type!=="throw"){var d=h.arg,u=d.value;return u&&l(u)=="object"&&f.call(u,"__await")?T.resolve(u.__await).then(function(v){N("next",v,s,i)},function(v){N("throw",v,s,i)}):T.resolve(u).then(function(v){d.value=v,s(d)},function(v){return N("throw",v,s,i)})}i(h.arg)}var b;O(this,"_invoke",{value:function(y,M){function s(){return new T(function(i,h){N(y,M,i,h)})}return b=b?b.then(s,s):s()}})}function Z(k,T,N){var b="suspendedStart";return function(y,M){if(b==="executing")throw new Error("Generator is already running");if(b==="completed"){if(y==="throw")throw M;return{value:void 0,done:!0}}for(N.method=y,N.arg=M;;){var s=N.delegate;if(s){var i=X(s,N);if(i){if(i===x)continue;return i}}if(N.method==="next")N.sent=N._sent=N.arg;else if(N.method==="throw"){if(b==="suspendedStart")throw b="completed",N.arg;N.dispatchException(N.arg)}else N.method==="return"&&N.abrupt("return",N.arg);b="executing";var h=w(k,T,N);if(h.type==="normal"){if(b=N.done?"completed":"suspendedYield",h.arg===x)continue;return{value:h.arg,done:N.done}}h.type==="throw"&&(b="completed",N.method="throw",N.arg=h.arg)}}}function X(k,T){var N=T.method,b=k.iterator[N];if(b===void 0)return T.delegate=null,N==="throw"&&k.iterator.return&&(T.method="return",T.arg=void 0,X(k,T),T.method==="throw")||N!=="return"&&(T.method="throw",T.arg=new TypeError("The iterator does not provide a '"+N+"' method")),x;var y=w(b,k.iterator,T.arg);if(y.type==="throw")return T.method="throw",T.arg=y.arg,T.delegate=null,x;var M=y.arg;return M?M.done?(T[k.resultName]=M.value,T.next=k.nextLoc,T.method!=="return"&&(T.method="next",T.arg=void 0),T.delegate=null,x):M:(T.method="throw",T.arg=new TypeError("iterator result is not an object"),T.delegate=null,x)}function B(k){var T={tryLoc:k[0]};1 in k&&(T.catchLoc=k[1]),2 in k&&(T.finallyLoc=k[2],T.afterLoc=k[3]),this.tryEntries.push(T)}function q(k){var T=k.completion||{};T.type="normal",delete T.arg,k.completion=T}function Y(k){this.tryEntries=[{tryLoc:"root"}],k.forEach(B,this),this.reset(!0)}function H(k){if(k){var T=k[C];if(T)return T.call(k);if(typeof k.next=="function")return k;if(!isNaN(k.length)){var N=-1,b=function y(){for(;++N<k.length;)if(f.call(k,N))return y.value=k[N],y.done=!1,y;return y.value=void 0,y.done=!0,y};return b.next=b}}return{next:te}}function te(){return{value:void 0,done:!0}}return A.prototype=_,O(G,"constructor",{value:_,configurable:!0}),O(_,"constructor",{value:A,configurable:!0}),A.displayName=P(_,F,"GeneratorFunction"),E.isGeneratorFunction=function(k){var T=typeof k=="function"&&k.constructor;return!!T&&(T===A||(T.displayName||T.name)==="GeneratorFunction")},E.mark=function(k){return Object.setPrototypeOf?Object.setPrototypeOf(k,_):(k.__proto__=_,P(k,F,"GeneratorFunction")),k.prototype=Object.create(G),k},E.awrap=function(k){return{__await:k}},Q(W.prototype),P(W.prototype,j,function(){return this}),E.AsyncIterator=W,E.async=function(k,T,N,b,y){y===void 0&&(y=Promise);var M=new W(m(k,T,N,b),y);return E.isGeneratorFunction(T)?M:M.next().then(function(s){return s.done?s.value:M.next()})},Q(G),P(G,F,"Generator"),P(G,C,function(){return this}),P(G,"toString",function(){return"[object Generator]"}),E.keys=function(k){var T=Object(k),N=[];for(var b in T)N.push(b);return N.reverse(),function y(){for(;N.length;){var M=N.pop();if(M in T)return y.value=M,y.done=!1,y}return y.done=!0,y}},E.values=H,Y.prototype={constructor:Y,reset:function(k){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(q),!k)for(var T in this)T.charAt(0)==="t"&&f.call(this,T)&&!isNaN(+T.slice(1))&&(this[T]=void 0)},stop:function(){this.done=!0;var k=this.tryEntries[0].completion;if(k.type==="throw")throw k.arg;return this.rval},dispatchException:function(k){if(this.done)throw k;var T=this;function N(h,d){return M.type="throw",M.arg=k,T.next=h,d&&(T.method="next",T.arg=void 0),!!d}for(var b=this.tryEntries.length-1;b>=0;--b){var y=this.tryEntries[b],M=y.completion;if(y.tryLoc==="root")return N("end");if(y.tryLoc<=this.prev){var s=f.call(y,"catchLoc"),i=f.call(y,"finallyLoc");if(s&&i){if(this.prev<y.catchLoc)return N(y.catchLoc,!0);if(this.prev<y.finallyLoc)return N(y.finallyLoc)}else if(s){if(this.prev<y.catchLoc)return N(y.catchLoc,!0)}else{if(!i)throw new Error("try statement without catch or finally");if(this.prev<y.finallyLoc)return N(y.finallyLoc)}}}},abrupt:function(k,T){for(var N=this.tryEntries.length-1;N>=0;--N){var b=this.tryEntries[N];if(b.tryLoc<=this.prev&&f.call(b,"finallyLoc")&&this.prev<b.finallyLoc){var y=b;break}}y&&(k==="break"||k==="continue")&&y.tryLoc<=T&&T<=y.finallyLoc&&(y=null);var M=y?y.completion:{};return M.type=k,M.arg=T,y?(this.method="next",this.next=y.finallyLoc,x):this.complete(M)},complete:function(k,T){if(k.type==="throw")throw k.arg;return k.type==="break"||k.type==="continue"?this.next=k.arg:k.type==="return"?(this.rval=this.arg=k.arg,this.method="return",this.next="end"):k.type==="normal"&&T&&(this.next=T),x},finish:function(k){for(var T=this.tryEntries.length-1;T>=0;--T){var N=this.tryEntries[T];if(N.finallyLoc===k)return this.complete(N.completion,N.afterLoc),q(N),x}},catch:function(k){for(var T=this.tryEntries.length-1;T>=0;--T){var N=this.tryEntries[T];if(N.tryLoc===k){var b=N.completion;if(b.type==="throw"){var y=b.arg;q(N)}return y}}throw new Error("illegal catch attempt")},delegateYield:function(k,T,N){return this.delegate={iterator:H(k),resultName:T,nextLoc:N},this.method==="next"&&(this.arg=void 0),x}},E}function g(E,a,f,O,L,C,j){try{var F=E[C](j),P=F.value}catch(m){return void f(m)}F.done?a(P):Promise.resolve(P).then(O,L)}n.exports=function(){var E,a=(E=p().mark(function f(O,L){return p().wrap(function(C){for(;;)switch(C.prev=C.next){case 0:O.postMessage(L);case 1:case"end":return C.stop()}},f)}),function(){var f=this,O=arguments;return new Promise(function(L,C){var j=E.apply(f,O);function F(m){g(j,L,C,F,P,"next",m)}function P(m){g(j,L,C,F,P,"throw",m)}F(void 0)})});return function(f,O){return a.apply(this,arguments)}}()},676:n=>{n.exports=function(l){var p,g=l.workerPath,E=l.workerBlobURL;if(Blob&&URL&&E){var a=new Blob(['importScripts("'.concat(g,'");')],{type:"application/javascript"});p=new Worker(URL.createObjectURL(a))}else p=new Worker(g);return p}},100:n=>{n.exports=function(l){l.terminate()}},147:n=>{n.exports={i8:"5.1.1"}}},o={};function c(n){var l=o[n];if(l!==void 0)return l.exports;var p=o[n]={id:n,loaded:!1,exports:{}};return r[n].call(p.exports,p,p.exports,c),p.loaded=!0,p.exports}return c.nmd=n=>(n.paths=[],n.children||(n.children=[]),n),c(352)})())})(gr);var yo=gr.exports,yr=go(yo);let br=null,Mt=null;const bo=async e=>new Promise(async(t,r)=>{try{const{dataURL:o}=e.data;if(o===br&&Mt){t(Mt);return}const c=mo(o),n=await yr.createWorker("eng",1,{corePath:"src/offscreen/workers/ocr/lib",langPath:"src/offscreen/workers/ocr/lib/",workerBlobURL:!1,workerPath:"src/offscreen/workers/ocr/lib/worker.min.js"}),l=await n.recognize(c),p=[{from:/\|/g,to:"I"},{from:/\n\n/g,to:" "},{from:/\n/g,to:" "}],g={paragraphs:l.data.paragraphs.map(E=>({...E,text:p.reduce((a,f)=>a.replace(f.from,f.to),E.text)}))};br=o,Mt=g,t(g),await n.terminate()}catch(o){r(o)}}),vo=async e=>new Promise(async(t,r)=>{let o;try{const{text:c}=e.data;o=await yr.createWorker({corePath:"src/offscreen/workers/ocr/lib",langPath:"src/offscreen/workers/ocr/lib/",workerBlobURL:!1,workerPath:"src/offscreen/workers/ocr/lib/worker.min.js"}),await o.initialize();const n=await o.detect(c);t({confidence:n.data.confidence,language:n.data.script})}catch(c){r(c)}finally{o&&await o.terminate()}});async function wo(e){switch(e.action){case"process":return await bo(e);case"languageDetect":return await vo(e)}}function xo(e,t){var n,l;const r=((l=(n=e==null?void 0:e.data)==null?void 0:n.text)==null?void 0:l.length)??0,o=(t==null?void 0:t["time-taken-ms"])??0;if(o===0)return 0;const c=r/o*1e3;return Math.round(c/10)*10}const Ao=async e=>{var r,o;let t=0;for(;t<Nt;)try{t++;const c=await fetch(kr,{body:JSON.stringify({...e.data}),headers:{"Content-Type":"application/json"},method:"POST"});if(!c.ok)throw new Error(`Request failed with status ${c==null?void 0:c.status}`);const n=await c.blob(),l=await mr(n),p=JSON.parse((c==null?void 0:c.headers.get("X-Exec-Metrics"))||""),g={charsPerSecondR:xo(e,p),executor:p==null?void 0:p.executor,textLength:(o=(r=e==null?void 0:e.data)==null?void 0:r.text)==null?void 0:o.length,timeTaken:parseInt(p==null?void 0:p["time-taken-ms"])};return{audioUrl:l,isRemote:!0,stats:g}}catch{if(t>=Nt)return{audioUrl:null,isRemote:!0,stats:null}}},_o=async e=>{const{modelId:t,name:r}=e.data;return new Promise(async(o,c)=>{try{const n=po(1,Sr),p=await(await fetch(`${dt}/${t}/${r}/${n}.wav`)).blob(),g=await mr(p);o(g)}catch(n){c(n)}})};_r.runtime.onMessage.addListener(e=>{if(e.object==="remoteTTS"&&e.action==="fetch")return Ao(e);if(e.object==="audioPlayer")return ho(e);if(e.object==="localTTS")return uo(e);if(e.object==="speakers"&&e.action==="getSample")return _o(e);if(e.object==="ocr")return wo(e)})})();
