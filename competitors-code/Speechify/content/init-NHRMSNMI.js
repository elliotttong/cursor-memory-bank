import{a as T}from"./chunk-SWWFND36.js";import{$a as c,L as w,Q as v,Xc as b,Zc as k,_a as L,b as d,db as a,ha as M,lb as I,sb as B}from"./chunk-6VFX2JNU.js";import"./chunk-LUKOAFYK.js";import{L as g,j as y}from"./chunk-O77QQVYU.js";import{x as S}from"./chunk-35EEQS33.js";import"./chunk-BGIN6QNH.js";import"./chunk-UQBFOPQH.js";import"./chunk-6HLOLWYC.js";import{a as f}from"./chunk-D2ACMGPV.js";import{b as x,k as u}from"./chunk-NORECDYR.js";import"./chunk-RQERJHUS.js";import{h as i,j as preactH,o as e}from"./chunk-NUN3A7RC.js";e();i();e();i();e();i();var A=t=>preactH(f,{width:"16",height:"16",viewBox:"0 0 16 16",fill:"currentColor",xmlns:"http://www.w3.org/2000/svg",...t},preactH("path",{d:"M8 15.1396C11.8691 15.1396 15.0684 11.9404 15.0684 8.07129C15.0684 4.19531 11.8623 0.996094 7.99316 0.996094C4.12402 0.996094 0.931641 4.19531 0.931641 8.07129C0.931641 11.9404 4.13086 15.1396 8 15.1396ZM8 13.7246C4.8623 13.7246 2.34668 11.2021 2.34668 8.07129C2.34668 4.93359 4.85547 2.41113 7.99316 2.41113C11.1309 2.41113 13.6533 4.93359 13.6602 8.07129C13.6602 11.2021 11.1377 13.7246 8 13.7246ZM4.55469 8.92578H7.99316C8.30078 8.92578 8.54688 8.68652 8.54688 8.37891V3.9082C8.54688 3.60059 8.30078 3.36133 7.99316 3.36133C7.68555 3.36133 7.44629 3.60059 7.44629 3.9082V7.83203H4.55469C4.24707 7.83203 4.00781 8.07129 4.00781 8.37891C4.00781 8.68652 4.24707 8.92578 4.55469 8.92578Z"}));e();i();var P=t=>preactH(f,{viewBox:"0 0 14 14",xmlns:"http://www.w3.org/2000/svg",size:"16px",...t},preactH("path",{d:"M6.43365 12.9888H7.56636C7.99813 12.9888 8.32897 12.7252 8.42991 12.3103L8.67103 11.2617L8.85047 11.2L9.76449 11.7607C10.129 11.9907 10.5495 11.9346 10.8579 11.6262L11.643 10.8467C11.9514 10.5383 12.0075 10.1122 11.7776 9.75327L11.2056 8.84486L11.2729 8.67664L12.3215 8.42991C12.7308 8.32897 13 7.99252 13 7.56636V6.45608C13 6.02991 12.7364 5.69346 12.3215 5.59252L11.2841 5.34019L11.2112 5.16075L11.7832 4.25234C12.0131 3.89346 11.957 3.4729 11.6486 3.15888L10.8636 2.37383C10.5607 2.07103 10.1402 2.01495 9.7757 2.23925L8.86168 2.8L8.67103 2.7271L8.42991 1.6785C8.32897 1.26355 7.99813 1 7.56636 1H6.43365C6.00187 1 5.67103 1.26355 5.57009 1.6785L5.32336 2.7271L5.13271 2.8L4.2243 2.23925C3.85981 2.01495 3.43365 2.07103 3.13084 2.37383L2.3514 3.15888C2.04299 3.4729 1.98131 3.89346 2.21682 4.25234L2.78318 5.16075L2.71589 5.34019L1.6785 5.59252C1.26355 5.69346 1 6.02991 1 6.45608V7.56636C1 7.99252 1.26916 8.32897 1.6785 8.42991L2.7271 8.67664L2.78879 8.84486L2.22243 9.75327C1.98692 10.1122 2.0486 10.5383 2.35701 10.8467L3.13645 11.6262C3.44486 11.9346 3.87103 11.9907 4.23551 11.7607L5.14393 11.2L5.32336 11.2617L5.57009 12.3103C5.67103 12.7252 6.00187 12.9888 6.43365 12.9888ZM6.52336 12.114C6.42804 12.114 6.37757 12.0748 6.36075 11.985L6.0243 10.5944C5.68224 10.5103 5.36262 10.3757 5.1215 10.2243L3.89907 10.9757C3.83178 11.0262 3.75888 11.015 3.69159 10.9477L3.02991 10.286C2.96822 10.2243 2.96262 10.157 3.00748 10.0785L3.75888 8.86729C3.62991 8.63178 3.48411 8.31215 3.39439 7.97009L2.00374 7.63925C1.91402 7.62243 1.87477 7.57196 1.87477 7.47664V6.54019C1.87477 6.43925 1.90841 6.39439 2.00374 6.37757L3.38879 6.04112C3.4785 5.67664 3.64673 5.34579 3.74766 5.13832L3.00187 3.9271C2.9514 3.84299 2.95701 3.7757 3.01869 3.70841L3.68598 3.05794C3.75327 2.99065 3.81495 2.97944 3.89907 3.02991L5.11028 3.76449C5.3514 3.62991 5.69346 3.48972 6.02991 3.39439L6.36075 2.00374C6.37757 1.91402 6.42804 1.87477 6.52336 1.87477H7.47664C7.57196 1.87477 7.62243 1.91402 7.63365 2.00374L7.9757 3.40561C8.32336 3.49533 8.62617 3.63551 8.87851 3.77009L10.0953 3.02991C10.185 2.97944 10.2411 2.99065 10.314 3.05794L10.9757 3.70841C11.043 3.7757 11.043 3.84299 10.9925 3.9271L10.2467 5.13832C10.3533 5.34579 10.5159 5.67664 10.6056 6.04112L11.9963 6.37757C12.086 6.39439 12.1252 6.43925 12.1252 6.54019V7.47664C12.1252 7.57196 12.0804 7.62243 11.9963 7.63925L10.6 7.97009C10.5103 8.31215 10.3701 8.63178 10.2355 8.86729L10.9869 10.0785C11.0318 10.157 11.0318 10.2243 10.9645 10.286L10.3084 10.9477C10.2355 11.015 10.1682 11.0262 10.0953 10.9757L8.8729 10.2243C8.63178 10.3757 8.31776 10.5103 7.9757 10.5944L7.63365 11.985C7.62243 12.0748 7.57196 12.114 7.47664 12.114H6.52336ZM7 9.13645C8.17196 9.13645 9.13645 8.17196 9.13645 6.99439C9.13645 5.82804 8.17196 4.86355 7 4.86355C5.82804 4.86355 4.85794 5.82804 4.85794 6.99439C4.85794 8.16636 5.82243 9.13645 7 9.13645ZM7 8.26729C6.30467 8.26729 5.73271 7.69533 5.73271 6.99439C5.73271 6.30467 6.30467 5.73271 7 5.73271C7.68411 5.73271 8.25607 6.30467 8.25607 6.99439C8.25607 7.68972 7.68411 8.26729 7 8.26729Z"}),preactH("path",{d:"M6.43365 12.9888H7.56636C7.99813 12.9888 8.32897 12.7252 8.42991 12.3103L8.67103 11.2617L8.85047 11.2L9.76449 11.7607C10.129 11.9907 10.5495 11.9346 10.8579 11.6262L11.643 10.8467C11.9514 10.5383 12.0075 10.1122 11.7776 9.75327L11.2056 8.84486L11.2729 8.67664L12.3215 8.42991C12.7308 8.32897 13 7.99252 13 7.56636V6.45608C13 6.02991 12.7364 5.69346 12.3215 5.59252L11.2841 5.34019L11.2112 5.16075L11.7832 4.25234C12.0131 3.89346 11.957 3.4729 11.6486 3.15888L10.8636 2.37383C10.5607 2.07103 10.1402 2.01495 9.7757 2.23925L8.86168 2.8L8.67103 2.7271L8.42991 1.6785C8.32897 1.26355 7.99813 1 7.56636 1H6.43365C6.00187 1 5.67103 1.26355 5.57009 1.6785L5.32336 2.7271L5.13271 2.8L4.2243 2.23925C3.85981 2.01495 3.43365 2.07103 3.13084 2.37383L2.3514 3.15888C2.04299 3.4729 1.98131 3.89346 2.21682 4.25234L2.78318 5.16075L2.71589 5.34019L1.6785 5.59252C1.26355 5.69346 1 6.02991 1 6.45608V7.56636C1 7.99252 1.26916 8.32897 1.6785 8.42991L2.7271 8.67664L2.78879 8.84486L2.22243 9.75327C1.98692 10.1122 2.0486 10.5383 2.35701 10.8467L3.13645 11.6262C3.44486 11.9346 3.87103 11.9907 4.23551 11.7607L5.14393 11.2L5.32336 11.2617L5.57009 12.3103C5.67103 12.7252 6.00187 12.9888 6.43365 12.9888ZM6.52336 12.114C6.42804 12.114 6.37757 12.0748 6.36075 11.985L6.0243 10.5944C5.68224 10.5103 5.36262 10.3757 5.1215 10.2243L3.89907 10.9757C3.83178 11.0262 3.75888 11.015 3.69159 10.9477L3.02991 10.286C2.96822 10.2243 2.96262 10.157 3.00748 10.0785L3.75888 8.86729C3.62991 8.63178 3.48411 8.31215 3.39439 7.97009L2.00374 7.63925C1.91402 7.62243 1.87477 7.57196 1.87477 7.47664V6.54019C1.87477 6.43925 1.90841 6.39439 2.00374 6.37757L3.38879 6.04112C3.4785 5.67664 3.64673 5.34579 3.74766 5.13832L3.00187 3.9271C2.9514 3.84299 2.95701 3.7757 3.01869 3.70841L3.68598 3.05794C3.75327 2.99065 3.81495 2.97944 3.89907 3.02991L5.11028 3.76449C5.3514 3.62991 5.69346 3.48972 6.02991 3.39439L6.36075 2.00374C6.37757 1.91402 6.42804 1.87477 6.52336 1.87477H7.47664C7.57196 1.87477 7.62243 1.91402 7.63365 2.00374L7.9757 3.40561C8.32336 3.49533 8.62617 3.63551 8.87851 3.77009L10.0953 3.02991C10.185 2.97944 10.2411 2.99065 10.314 3.05794L10.9757 3.70841C11.043 3.7757 11.043 3.84299 10.9925 3.9271L10.2467 5.13832C10.3533 5.34579 10.5159 5.67664 10.6056 6.04112L11.9963 6.37757C12.086 6.39439 12.1252 6.43925 12.1252 6.54019V7.47664C12.1252 7.57196 12.0804 7.62243 11.9963 7.63925L10.6 7.97009C10.5103 8.31215 10.3701 8.63178 10.2355 8.86729L10.9869 10.0785C11.0318 10.157 11.0318 10.2243 10.9645 10.286L10.3084 10.9477C10.2355 11.015 10.1682 11.0262 10.0953 10.9757L8.8729 10.2243C8.63178 10.3757 8.31776 10.5103 7.9757 10.5944L7.63365 11.985C7.62243 12.0748 7.57196 12.114 7.47664 12.114H6.52336ZM7 9.13645C8.17196 9.13645 9.13645 8.17196 9.13645 6.99439C9.13645 5.82804 8.17196 4.86355 7 4.86355C5.82804 4.86355 4.85794 5.82804 4.85794 6.99439C4.85794 8.16636 5.82243 9.13645 7 9.13645ZM7 8.26729C6.30467 8.26729 5.73271 7.69533 5.73271 6.99439C5.73271 6.30467 6.30467 5.73271 7 5.73271C7.68411 5.73271 8.25607 6.30467 8.25607 6.99439C8.25607 7.68972 7.68411 8.26729 7 8.26729Z","stroke-width":"0.0916667",mask:"url(#path-1-outside-1_5578_24)"}));var F=u(a)`
  width: 28px;
  height: 28px;
  flex-shrink: 0;
  justify-content: center;
  align-items: center;
  background: ${x.hgltSec};
  border-radius: 50%;
`,Z=u(I)`
  & svg {
    vertical-align: text-top;
    margin-top: 1px;
  }
`,_=u(a)`
  font-family: 'ABCDiatype';
`,E=({removeNotification:t})=>preactH(B,{removeNotification:t},preactH(_,{column:!0,yAlign:!0},preactH(a,{xAlign:!0,separation:"12px"},preactH(F,null,preactH(A,null)),preactH(a,{column:!0,separation:"4px"},preactH(I,{fontSize:"14px",bold:!0},"Want to continue listening to your unfinished articles?"),preactH(Z,{fontSize:"12px",color:x.brdrPrimInv8010},"You can access “Listen History” from Settings Menu ",preactH(P,{size:"12px"}),".")))));async function D(){let t=await W();return await G(),()=>t&&t()}var R=["gmail-support","google","individual-posts-player"],W=async()=>{let t=T();if(Object.keys(t).some(o=>R.includes(o)))return;let m=0,{playbackSpeed:r}=await v(),{bundle:n}=c.getBundleState();if(!n)return;let s=n?.listeningBundle?.contentBundle.contentIndex,C=await g(s.getStats.bind(s))();y(C)&&(m=C.value.estimatedWordCount.count/w(r)*60);let l=0,H=5,N=L.registerHook("PLAYBACK_STATE_CHANGED",async({state:o})=>{if(o==="playing"&&!S()){let h=await k("listen-history-info");if(h){let{dismissedByUser:p,displayCount:V}=h;if(p||V>0)return}b({id:"listen-history-info",priority:50,duration:0,showOnMobile:!1,timeSensitive:!1,render:({dismiss:p})=>preactH(E,{removeNotification:p})})}}),O=L.registerHook("PROGRESSED",async({currentProgress:o})=>{(Math.abs(o-l)*m>=H||o>=.99)&&(l=o,await d("/listen-history/add-history-item",{url:window.location.href,title:document.title,updatedAt:new Date().getTime(),leavePosition:o,duration:m}))});return()=>{N(),O()}},G=async()=>{let r=(await d("/listen-history/get-history-list")).find(n=>n.url===window.location.href);if(r&&new Date().getTime()-r.navigatedAt<=3e4){let{bundle:n}=c.getBundleState();if(r.leavePosition>=.99||!n)return;let s=n?.listeningBundle.contentBundle.contentIndex,C=await g(s.getCursorFromProgress.bind(s))(r.leavePosition);if(y(C)){let{CursorQueryBuilder:l}=await M();L.seekToCursor(l.fromCursor(C.value)),c.getPlayingState()!=="playing"&&L.play()}}};export{D as default};
//# sourceMappingURL=init-NHRMSNMI.js.map
