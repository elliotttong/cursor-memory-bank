import{a as k,b as Ee}from"./chunk-GQ7NJON5.js";import{a as Te}from"./chunk-QLI6FAGW.js";import{a as Ot}from"./chunk-Z37HPPTH.js";import"./chunk-73BVSBN2.js";import{b as oe}from"./chunk-GNHJLEP4.js";import{a as te}from"./chunk-7D3ZJIMI.js";import"./chunk-Z4JSAUZD.js";import"./chunk-M5NV5XMO.js";import"./chunk-PBN5LLAA.js";import"./chunk-MADPDA6U.js";import"./chunk-FEYPXFJ6.js";import"./chunk-BVP7ZEFD.js";import{p as wt}from"./chunk-FJMP4XPS.js";import"./chunk-BRU4RAVQ.js";import{N as Bt}from"./chunk-QEP7SRH7.js";import"./chunk-OFYWCEWM.js";import"./chunk-TVWAVI6A.js";import"./chunk-CVF2X5Y4.js";import"./chunk-BD5GYQVX.js";import{c as xt,d as bt,k as vt,m as D}from"./chunk-LBZ34ZL2.js";import"./chunk-SI7CO4VP.js";import"./chunk-JAWPO7FD.js";import"./chunk-N3ET5YJZ.js";import"./chunk-LXDXREIX.js";import{a as xe}from"./chunk-437XFN2F.js";import"./chunk-XP57BQDH.js";import{a as P}from"./chunk-VYK2SFTV.js";import"./chunk-MQX2TL35.js";import"./chunk-SWWFND36.js";import"./chunk-PJRECGUK.js";import{$a as H,$b as kt,Ab as B,Ac as Ne,Ba as Ct,Ca as b,Da as U,Ea as St,Oa as ht,Pa as Pt,Wc as Pe,Xc as Ht,_a as ee,ab as Q,bb as N,bc as Ft,db as Se,ec as At,hc as It,ia as yt,ib as Y,ja as L,jc as Lt,ka as w,lb as he,qc as Mt,rc as Rt,tc as qt,z as gt}from"./chunk-6VFX2JNU.js";import{i as Ce,k as $,p as qe,v as me}from"./chunk-LUKOAFYK.js";import{f as T,g as x,k as ue,m as He}from"./chunk-O77QQVYU.js";import"./chunk-35EEQS33.js";import{i as I}from"./chunk-BGIN6QNH.js";import"./chunk-UQBFOPQH.js";import{d as Oe}from"./chunk-6HLOLWYC.js";import"./chunk-XFWXZVUM.js";import"./chunk-D2ACMGPV.js";import{b as M,c as Et,g as Tt,i as S,k as de}from"./chunk-NORECDYR.js";import{g as Z}from"./chunk-RQERJHUS.js";import{d as C,h as a,j as preactH,k as Fragment,l as Re,n as hn,o as c}from"./chunk-NUN3A7RC.js";c();a();hn();c();a();var Nt=C(Z());function De({children:e,root:t}){let o=(0,Nt.useMemo)(()=>Et({key:"post-player-emotion-cache",container:t}),[t]);return preactH(Tt,{value:o},e)}c();a();var ne=C(Z());function We({notificationAnchor:e,queueableContent:t}){let{usePlayingState:o,useBundleInfo:n}=H,[r,i]=(0,ne.useState)(null),s=(0,ne.useRef)(null),{play:l,pause:u}=ee,m=o(),{currentContent:p}=n(),d=p&&p?.id===r?.id,f=!!d&&m==="playing",y=!!d&&m==="buffering",g=!!d&&m==="errored",h=(0,ne.useCallback)(async v=>{if(v.stopPropagation(),qe()||me("browser-action",{animate:!1},"pill-player"),y)return;if(f)return u();if(d)return l();let O=Q(t,!0);i(O)},[y,f,d,l,u,t]);return preactH("div",null,preactH(vt,{isLoading:y,isLoadingFailed:g,isPlaying:f,onClick:h,ref:s,...e?{[k]:!0}:{}}))}c();a();var $e=C(I());c();a();c();a();c();a();var re=C(Z());var Pn="[data-speechifyplaybackhighlighter-highlight]",En="div[data-speechify-shadow-container]";function _({queueableContent:e,wrapper:t,remoteConfig:o,isActiveElement:n}){let[r,i]=(0,re.useState)(null),{play:s,pause:l}=ee,{usePlayingState:u,useBundleInfo:m}=H,p=u(),{currentContent:d}=m(),{activeElement:f}=oe(),y=f instanceof Element?f:null;(0,re.useEffect)(()=>{i(e)},[t]);let g=y?.nodeType===Node.TEXT_NODE?y?.parentElement:y,h=p==="playing",v=g?.isConnected||!1,O=h&&o&&e.options?.autoplay!==void 0?g?.closest(o.selectors.postSelector)?.querySelector(En)?.isSameNode(t):!1,A=o&&p==="playing"&&!v&&t.closest(o.selectors.postSelector)?.querySelector(Pn),W=!!(d&&d?.id===r?.id||O||n||A),J=W&&p==="playing",ce=W&&p==="buffering",Cn=W&&p==="errored";return{playInbox:(0,re.useCallback)(()=>{if((window.getSelection()??"").toString().length>0)return s();if(ce)return;if(J)return l();if(W&&d)return s();let Sn=Q(e,!0);i(Sn)},[e,t,ce,J,W,s,l]),isActive:W,isPlaying:J,isLoading:ce,isLoadingFailed:Cn}}c();a();var G=de(Se)`
  align-items: center;
  cursor: pointer;
  flex-direction: row;
  gap: 5px;
  justify-content: center;
  margin-right: 12px;
  overflow: visible;
  position: relative;

  &:hover {
    background-color: ${({styleThemes:e})=>e.hoverBackgroundColor};

    > button {
      ${({styleThemes:e})=>e.hoverButtonColor?`border: 1.8px solid ${e.hoverButtonColor}`:""};
      color: ${({styleThemes:e})=>e.hoverButtonColor};
    }
  }

  > button {
    background: none;
    border: 1.8px solid ${({styleThemes:e})=>e.buttonColor};
    color: ${({styleThemes:e})=>e.buttonColor};
  }

  &:active {
    background-color: ${({styleThemes:e})=>e.activeBackgroundColor};
  }

  ${({customStyles:e})=>e&&S(e)};
`,Tn=S`
  flex-direction: column;
  gap: 0px;
  margin-right: 0px;
  margin-top: 6px;
`,xn=de.div`
  align-items: center;
  display: flex;
  flex-direction: inherit;
  gap: 5px;
  margin-top: inherit;
  overflow: hidden;
  transition: max-height 0.3s ease-in-out, max-width 0.3s ease-in-out;

  ${({expanded:e})=>e?`
        max-height: 600px;
        max-width: 600px;
      `:`
        max-height: 0;
        max-width: 0;
      `}

  > button {
    height: 20px;
    min-height: 20px;
    min-width: 20px;
    padding: 0;
    width: 20px;

    ${({isDarkMode:e})=>e?`
          color: ${M.icnTxtTert};
          border: 1px solid ${M.brdrTert4050}; 
        `:`
          color: ${M.icnTxtPrimInv}; 
          border: 1px solid ${M.icnTxtPrimInv};
        `}
  }
`;function E({backgroundElement:e=document.body,isActiveElement:t,isDarkMode:o,notificationAnchor:n,onClick:r,overrideStyles:i={},queueableContent:s,remoteConfig:l,styleSets:u,wrapper:m}){let p=u?.lightTheme||{buttonColor:M.sfPrimWB,iconBackground:"white",hoverBackgroundColor:"none",activeBackgroundColor:"none"},d=u?.darkTheme||{buttonColor:M.brdrTert4050,iconBackground:"#212121",hoverBackgroundColor:"none",activeBackgroundColor:"none"},{playInbox:f,isPlaying:y,isLoading:g,isLoadingFailed:h}=_({queueableContent:s,remoteConfig:l,wrapper:m,isActiveElement:t}),{isDarkBackground:v}=te(e||document.body),O=l?m.getAttribute(l.selectors.toolBarAttribute)===l.selectors.toolBar:void 0;return preactH(G,{styleThemes:o||v?d:p,customStyles:i,...n&&!O?{[k]:!0}:{}},preactH(D,{isLoading:g,isLoadingFailed:h,isPlaying:y,onClick:A=>{A.stopPropagation(),f(),Pe("individual-post-button-hint"),r&&r()}}))}var vn={darkTheme:{buttonColor:"#B4B4B4",iconBackground:"#212121",hoverBackgroundColor:"#2f2f2f",activeBackgroundColor:"#2f2f2f"},lightTheme:{buttonColor:"#7D7D7D",iconBackground:"#FFFFFF",hoverBackgroundColor:"#f9f9f9",activeBackgroundColor:"#f9f9f9"}},Bn=S`
  top: 4px;
  position: absolute;
  left: -48px;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 28px;
  height: 28px;
  border-radius: 0.5rem;

  button {
    border-width: 1px !important;
  }
`,_t=e=>preactH(E,{overrideStyles:Bn,styleSets:vn,...e});c();a();var Ut=C($()),Gt=C(Y());var _e=function(e){return Array.from(document.querySelectorAll(e.selectors.postSelector))},$t=function({selectors:e}){return new Promise(t=>{let o=!!document.querySelector(e.profileButton),n=o?e.main:e.mainWrapper,r=[],i=(0,Ut.debounce)(()=>{let u=r.some(f=>Array.from(f.addedNodes).find(g=>g instanceof HTMLElement&&g.getAttribute(e.nodeAttributeSelector)?.startsWith(e.stringToMatchAttribute))!==void 0),m=!o&&r.some(({target:f})=>f===l),p=r.some(f=>f.target.parentElement===document.querySelector(e.main)),d=r.some(f=>f.type==="childList"&&!f.target.isConnected);r.length=0,(u||p||d||m)&&(s.disconnect(),t(T(void 0))),m&&xe()},16),s=new MutationObserver(u=>{r.push(...u),i()}),l=document.querySelector(n);if(!l)return x("Element not found");s.observe(l,{childList:!0,subtree:!0})})};function wn(e,t){let o=e.getBoundingClientRect(),n=t.getBoundingClientRect(),r=o.x<=n.x&&o.x+o.width>=n.x,i=o.y<=n.y&&o.y+o.height>=n.bottom;return r&&i}var pe=(e,t)=>{let o=e.querySelector(t.selectors.postContentSelector),r=e.querySelectorAll(t.selectors.postContentSelector).length>1?o?.parentElement:o;return r?B({startingNode:r,ignoreCache:!0,getAllTextBlocksInitialThreshold:15,minimumTotalCharThresholdForGaussianHeuristic:4,shouldFindHeadings:!0}).filter(s=>s.nodeType===Node.TEXT_NODE||wn(r,r)):[]},fe=e=>{let t=document.querySelector(e.selectors.main),o=(n,r,i,s)=>{if(s===0)return null;if(getComputedStyle(n)[r]===i)return n;for(let l of Array.from(n.children)){let u=o(l,r,i,s-1);if(u)return u}return null};return t instanceof HTMLElement?o(t,"overflowY","auto",5):null},kn=(e,t)=>{let o=e.querySelector(t.selectors.postContentSelector);return o||null};var Ue=e=>Gt.default.sentences(e,{preserve_whitespace:!0,newline_boundaries:!0}),Ge=(e,t)=>_e(t).pop()?.isSameNode(e)??!1,Fn=e=>document.querySelectorAll(e.selectors.isStillGeneratingSelector).length>0,j=(e,t)=>Ge(e,t)?Fn(t)?!0:!kn(e,t):!1,Qt=(e,t)=>{let o=e.getAttribute(t.selectors.nodeAttributeSelector);if(!o)return;let n=o.split(t.selectors.stringToMatchAttributeWithHyphen).pop();return Number(n)};var An=Bt()?7500:15e3,Yt={key:"chatgpt",configuration:{options:{autoplayNewest:async(e,t)=>{let o=Ge(e,t),n=(Qt(e,t)??0)%2===0;if(o&&n){let r=performance.now();await new Promise(async i=>{for(;!j(e,t);)if(await L(300),performance.now()-r>An){i();break}i()})}return o&&n&&j(e,t)},granularSettings:{supportedFeatures:["listenToAnswer"],getFeatureForElement:()=>"listenToAnswer"},prependElement:!0},component:_t,elementUpdateProvider:async function*(e){await U(e.selectors.promptArea);do yield _e(e);while(await $t(e))},getElementToEmbed:(e,t)=>{let o=e.querySelector(t.selectors.playerContainerWithUserSelector)||e.querySelector(t.selectors.playerContainerWithoutUserSelector)||e;return o?.querySelector(t.selectors.isMessageFromUser)?null:o},queueableContentFn:async(e,t)=>{let o=!1;return{getContent:async n=>{if(await w(async()=>pe(e,t).length<1&&!j(e,t)),j(e,t)&&(o=!0),!o)return{content:pe(e,t),chunksBefore:0,chunksAfter:0};await w(async()=>{let s=Ue(pe(e,t).map(m=>m.textContent).join(`
`)),l=[".","!","?",":",";"];return s.filter(m=>{let p=m.slice(-1);return l.includes(p)}).length<n.index+2&&j(e,t)},500);let r=pe(e,t).flatMap(s=>Ue(s.textContent??"").map(u=>({elem:s,sentence:u}))),i=r.length-1<=n.index&&!j(e,t);return{content:r.slice(n.index,n.index+1),chunksBefore:n.index,chunksAfter:i?0:Math.max(1,r.length-n.index-1)}},converter:n=>{if("sentence"in n){let r=n.elem.textContent?.indexOf(n.sentence)??0;return{text:n.sentence,ref:new $e.ObjectRef({ref:n.elem,highlightInfo:{startOffset:r,scrollElement:fe(t)}})}}return{text:P(n),ref:new $e.ObjectRef({ref:n,highlightInfo:{startOffset:0,scrollElement:fe(t)}})}},options:{autoplay:!0,sideEffects:!0},metadata:{source:"Chatgpt"}}}}};c();a();var ze=C(I());c();a();var In={darkTheme:{buttonColor:"#A2A096",iconBackground:"#212121",hoverBackgroundColor:"transparent",activeBackgroundColor:"#393937"},lightTheme:{buttonColor:"#7D7D7D",iconBackground:"#FFFFFF",hoverBackgroundColor:"transparent",activeBackgroundColor:"#f8f8f7"}},Ln=S`
  flex-direction: column;
  gap: 0px;
  top: 16px;
  margin-left: -42px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  position: absolute;

  button {
    opacity: 1;
  }
`,jt=e=>preactH(E,{overrideStyles:Ln,styleSets:In,...e});c();a();var Kt=C($()),zt=C(Y());var Vt=(e,t)=>{let o=e.querySelector(t.selectors.postContentSelector);return o||null},be=(e,t)=>{let o;if(e.isConnected)o=e;else{let u=function(m,p){let d=m.toLowerCase().split(/\s+/),f=p.toLowerCase().split(/\s+/),y=new Set(d),g=new Set(f),h=new Set([...y].filter(A=>g.has(A))),v=new Set([...y,...g]).size;return h.size/v>=.7};var i=u;let s=e.textContent?.trim();if(!s)return[];o=Array.from(document.querySelectorAll(t.selectors.postSelector)).find(m=>{let p=m.textContent?.trim();return p&&u(p,s)})||null}if(!o)return[];let n=o.querySelector(t.selectors.postContentSelector);return n?B({startingNode:n,ignoreCache:!0,getAllTextBlocksInitialThreshold:15,minimumTotalCharThresholdForGaussianHeuristic:4,shouldFindHeadings:!1}):[]},Qe=function(e){return Array.from(document.querySelectorAll(e.selectors.postSelector))},Ye=e=>{let t=document.querySelector(e.selectors.main),o=(n,r,i,s)=>{if(s===0)return null;if(getComputedStyle(n)[r]===i)return n;for(let l of Array.from(n.children)){let u=o(l,r,i,s-1);if(u)return u}return null};return o(t,"overflowY","auto",4)||o(t,"overflowY","scroll",4)},je=e=>zt.default.sentences(e,{preserve_whitespace:!0,newline_boundaries:!0}),Ke=(e,t)=>Qe(t).pop()?.isSameNode(e)??!1,Xt=(e,t)=>e.querySelector(t.selectors.postContentSelector)!==null,Mn=e=>document.querySelectorAll(e.selectors.isStillGeneratingSelector).length>0,se=(e,t)=>Mn(t)&&Ke(e,t),Jt=function(e,t){return new Promise(o=>{let n=[],r=(0,Kt.throttle)(()=>{let l=n.some(m=>Array.from(m.addedNodes).find(d=>d instanceof HTMLElement&&d.querySelector(t.selectors.postSelector))!==void 0),u=n.some(m=>m.target.parentElement===document.querySelector(e));n.length=0,(l||u)&&(i.disconnect(),o(T(void 0)))},200),i=new MutationObserver(l=>{n.push(...l),r()}),s=document.querySelector(e);if(!s)return x("Element not found");i.observe(s,{childList:!0,subtree:!0})})};var Zt={key:"claude",configuration:{options:{autoplayNewest:async(e,t)=>{let o=Ke(e,t),n=Xt(e,t);if(o&&n){let r=performance.now();await new Promise(async i=>{for(;!se(e,t);)if(await L(300),performance.now()-r>5e3){i(!1);break}i(!0)})}return o&&n&&se(e,t)},granularSettings:{supportedFeatures:["listenToAnswer"],getFeatureForElement:()=>"listenToAnswer"}},component:jt,elementUpdateProvider:async function*(e){await b(e.selectors.main);do yield Qe(e);while(await Jt(e.selectors.main,e))},getElementToEmbed:e=>e,queueableContentFn:async(e,t)=>({getContent:async o=>{let n=!e.isConnected;if(se(e,t)||o.index!==0||n){await w(async()=>{let s=je(be(e,t).map(l=>l.textContent).join(`
`));return!!Vt(e,t)&&s.length<o.index+2&&se(e,t)});let r=be(e,t).flatMap(s=>je(s.textContent??"").map(u=>({elem:s,sentence:u}))),i=r.length-1===o.index&&!se(e,t)||r.slice(o.index,o.index+1).length===0||!e.isConnected;return{content:r.slice(o.index,o.index+1),chunksBefore:o.index,chunksAfter:i?0:Math.max(1,r.length-o.index-1)}}return{content:be(e,t),chunksBefore:0,chunksAfter:0}},converter:o=>{if("sentence"in o){let n=o.elem.textContent?.indexOf(o.sentence)??0;return{text:o.sentence,ref:new ze.ObjectRef({ref:o.elem,highlightInfo:{startOffset:n,scrollElement:Ye(t)}})}}return{text:P(o),ref:new ze.ObjectRef({ref:o,highlightInfo:{startOffset:0,scrollElement:Ye(t)}})}},options:{autoplay:!0,sideEffects:!0},metadata:{source:"Claude"}})}};c();a();var Je=C(I());c();a();var Rn={darkTheme:{buttonColor:"#CBD4E0",iconBackground:"#212121",hoverBackgroundColor:"transparent",activeBackgroundColor:"#393937"},lightTheme:{buttonColor:"#909090",iconBackground:"#FFFFFF",hoverBackgroundColor:"transparent",activeBackgroundColor:"#f8f8f7"}},qn=e=>S`
  flex-direction: column;
  gap: 0px;
  margin-left: -42px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  position: absolute;
  ${e?"":"margin-top: 42px;"}

  button {
    opacity: 1;
  }
`,Hn=(e,t)=>{if(!e)return!1;let o=t.selectors.reasoningToggleSelector;return!!e.querySelector(o)},On=(e,t)=>{for(;e&&!e.matches(t);)e=e.parentElement;return e},eo=e=>{let t=e.remoteConfig.selectors.postSelector,o=e.wrapper,n=On(o,t),r=Hn(n,e.remoteConfig),i=qn(r);return preactH(E,{overrideStyles:i,styleSets:Rn,...e})};c();a();var to=C($()),oo=C(Y());var ge=(e,t)=>{let o=e.querySelector(t.selectors.postContentSelector);return o?B({startingNode:o,ignoreCache:!0,getAllTextBlocksInitialThreshold:15,minimumTotalCharThresholdForGaussianHeuristic:4,shouldFindHeadings:!0}):[]},K=function(e){return Array.from(document.querySelectorAll(e.selectors.postSelector)).filter(o=>o.querySelector(e.selectors.postContentSelector)!==null)},no=function(e){let t=document.querySelector(e.selectors.generationSelector||".dd7e4fda");if(!t)return 1;let o=t.textContent?.split("/")[0]?.match(/\d+/);return o?parseInt(o[0],10):1},Ve=e=>{let t=document.querySelector(e.selectors.main),o=(n,r,i,s)=>{if(s===0)return null;if(getComputedStyle(n)[r]===i)return n;for(let l of Array.from(n.children)){let u=o(l,r,i,s-1);if(u)return u}return null};return o(t,"overflowY","auto",4)||o(t,"overflowY","scroll",4)},Xe=e=>oo.default.sentences(e,{preserve_whitespace:!0,newline_boundaries:!0}),ve=(e,t)=>K(t).pop()?.isSameNode(e)??!1;var Nn=e=>{let t=K(e).pop();return t?t.querySelectorAll(e.selectors.iconSelector).length===0:!1},Dn=e=>{let t=K(e).pop();if(!t)return!1;let o=t.querySelector(e.selectors.reasoningSelector),n=t.querySelector(e.selectors.isStillGeneratingSelector);return o!==null&&n!==null},ro=(e,t)=>Dn(t)&&ve(e,t),z=(e,t)=>Nn(t)&&ve(e,t),so=function(e,t){return new Promise(o=>{let n=K(t).length,r=[],i=(0,to.throttle)(()=>{let m=K(t).length>n,p=r.some(f=>{let y=f.type==="characterData",g=f.target.parentElement?.closest(t.selectors.postContentSelector);return y&&g}),d=r.some(f=>f.target.parentElement===document.querySelector(e));r.length=0,(m||p||d)&&(s.disconnect(),o(T(void 0)))},200),s=new MutationObserver(u=>{r.push(...u),i()}),l=document.querySelector(e);if(!l)return o(x("Element not found"));s.observe(l,{childList:!0,subtree:!0,attributes:!0,characterData:!0})})};var io={key:"deepseek",configuration:{options:{autoplayNewest:async(e,t)=>{let o=ve(e,t);if(o){let n=performance.now();await new Promise(async r=>{for(;!z(e,t);)if(await L(300),performance.now()-n>5e3){r(!1);break}r(!0)})}return o&&z(e,t)},granularSettings:{supportedFeatures:["listenToAnswer"],getFeatureForElement:()=>"listenToAnswer"},prependElement:!0},component:eo,elementUpdateProvider:async function*(e){await U(e.selectors.main);let t=0,o=1;for(;;){let n=K(e),r=no(e);(n.length>t||r>o)&&(o=r,t=n.length,yield n);let i=await so(e.selectors.main,e);if("error"in i){console.error("Error waiting for more elements:",i.error);break}}},getElementToEmbed:(e,t)=>e.querySelector(t.selectors.postContentSelector)??e,queueableContentFn:async(e,t)=>{let o=!1;return{getContent:async n=>{if(await w(async()=>ge(e,t).length<1&&!z(e,t)&&!ro(e,t)),z(e,t)&&(o=!0),!o)return{content:ge(e,t),chunksBefore:0,chunksAfter:0};await w(async()=>{let s=Xe(ge(e,t).map(m=>m.textContent).join(`
`)),l=[".","!","?",":",";"];return s.filter(m=>{let p=m.slice(-1);return l.includes(p)}).length<n.index+2&&z(e,t)},500);let r=ge(e,t).flatMap(s=>Xe(s.textContent??"").map(u=>({elem:s,sentence:u}))),i=r.length-1===n.index&&!z(e,t);return{content:r.slice(n.index,n.index+1),chunksBefore:n.index,chunksAfter:i?0:Math.max(1,r.length-n.index-1)}},converter:n=>{if("sentence"in n){let r=n.elem.textContent?.indexOf(n.sentence)??0;return{text:n.sentence,ref:new Je.ObjectRef({ref:n.elem,highlightInfo:{startOffset:r,scrollElement:Ve(t)}})}}return{text:P(n),ref:new Je.ObjectRef({ref:n,highlightInfo:{startOffset:0,scrollElement:Ve(t)}})}},options:{autoplay:!0,sideEffects:!0},metadata:{source:"DeepSeek"}}}}};c();a();c();a();var uo=C(Z());c();a();function lo(e){let t=e.selectors,o=!!document.querySelector(`${t.feedContainer}`),n=!!document.querySelector(`${t.complementary}`),r=!!document.querySelector(t.isComposePageSelector);return o||n||r?[...r?Array.from(document.querySelectorAll(t.isComposePageSelector)).map(s=>{let l=s.parentElement?.parentElement?.parentElement?.parentElement;return l?.childElementCount&&l?.childElementCount>=3?l:null}):[],...o?Array.from(document.querySelectorAll(t.feedContainer)):[],...n?Array.from(document.querySelectorAll(t.singlePopupSelector)).map(s=>s.parentElement?.parentElement?.parentElement?.nextElementSibling?.querySelector(t.div)):[],...o||n?Array.from(document.querySelectorAll(t.commentsSelector)).map(s=>s):[]].filter(Boolean):[]}function Be(e,t){return e.closest(t.ul)?.closest(t?.commentParent)?.querySelector(t.commentContent)??e.closest(t.feedContainer)?.parentElement?.parentElement?.querySelector(t.feedContent)??e.closest(t.groupFeedParent)?.parentElement?.previousElementSibling?.querySelector(t.groupFeedContent)??e.closest(t.groupFeedParent)?.parentElement?.previousElementSibling?.previousElementSibling?.querySelector(t.friendTimelineContent)??e.closest(t.complementary)?.querySelector(t.complementaryContent)??e.closest(t.dialog)?.querySelector(t.editor)}c();a();var ao=C(I()),we=e=>Array.from(document.querySelectorAll(e)),Wn=function(e,t){return e instanceof HTMLElement?e.matches(t):!1},q=function(e,t){return new Promise(o=>{let n=new MutationObserver(i=>{i.some(l=>Array.from(l.addedNodes).find(u=>Wn(u,t)))&&(n.disconnect(),o(T(void 0)))}),r=document.querySelector(e);if(!r)return x("Element not found");n.observe(r,{childList:!0,subtree:!0})})},ie=function(e){let t=H.getBundleState().cursor?.getParentElement()?.ref?.value?.ref;return t&&e&&e.contains(t)},co=async function(e){let t=H.getBundleState().currentContent;if(t&&e){let o=await Pt(t),n=o[0]?P(o[0]):"",r=P(e);return n===r}return!1},ke=async(e,t)=>({getContent:await N(async()=>({content:e.filter(o=>!!o),chunksAfter:0,chunksBefore:0})),options:{sideEffects:!1,autoplay:!0},converter:o=>({text:P(o),ref:new ao.ObjectRef({ref:o})}),metadata:{source:t}});c();a();var le=e=>{let{text:t,color:o,showText:n}=e;return n?preactH(he,{fixedWidthNumbers:!0,color:o,style:{display:"flex",alignItems:"center",fontWeight:"600",cursor:"pointer",fontFamily:"system-ui"}},preactH("span",{style:{lineHeight:"7px",fontSize:"14px"}},t)):preactH(Fragment,null)};var Un=S`
  width: 90px;
  height: 32px;
  border-radius: 4px;
  margin-right: 0px;
`,Gn=S`
  margin-right: 0px;
  gap: 0px;
`,$n={buttonColor:"rgba(101, 103, 107, 1)",iconBackground:"#FFFFFF",hoverBackgroundColor:"rgba(242, 242, 242, 1)",activeBackgroundColor:"#CED1FF"},Qn={buttonColor:"rgba(176, 179, 184, 1)",iconBackground:"#242526",hoverBackgroundColor:"rgba(58, 59, 60, 1)",activeBackgroundColor:"#556478"};function mo({backgroundElement:e=document.body,notificationAnchor:t,queueableContent:o,remoteConfig:n,wrapper:r}){let i=n.selectors,{activeElement:s}=oe(),l=(0,uo.useMemo)(()=>{let h=Be(r,i);return h?ie(h):!1},[s]),{playInbox:u,isPlaying:m,isLoading:p,isLoadingFailed:d}=_({queueableContent:o,wrapper:r,isActiveElement:l}),f=!!(r.closest(i.dialog)?.querySelector(i.editor)&&!r.closest(i.parentPlayerContainerInPopup)),y=r.closest(i.ul)?.closest(i?.commentParent)?.querySelector(i.commentContent),{isDarkBackground:g}=te(e);return y||f?preactH(E,{backgroundElement:e,isDarkMode:g,notificationAnchor:t,overrideStyles:y?Gn:{},queueableContent:o,wrapper:r}):preactH(G,{styleThemes:g?Qn:$n,customStyles:Un,onClick:u,...t?{[k]:!0}:{}},preactH(D,{isLoading:p,isLoadingFailed:d,isPlaying:m,onClick:h=>{h.stopPropagation(),u()}}),preactH(le,{text:"Listen",color:g?"rgba(176, 179, 184, 1)":"rgba(101, 103, 107, 1)",showText:!p&&!m}))}var po={key:"facebook",configuration:{elementUpdateProvider:async function*(e){await b(e.selectors.main);do yield lo(e);while(await q(e.selectors.waitForSelector,e.selectors.mutationSelector))},getElementToEmbed(e,t){let o=t.selectors;if(!!(e.matches(`${o.feedContainer}`)||e.matches(o.groupFeedParent))){let s=e?.parentElement?.parentElement?.querySelector(o.parentPlayerContainer);return s?s.querySelector(o.playerContainer)??e.closest(o.parentPlayerContainerInPopup)?.querySelector(o.playerContainer)??e:e}return e},component:mo,queueableContentFn:async(e,t)=>{let o=t.selectors,n=[Be(e,o)];return n[0]&&ie(n[0])?H.getBundleState().currentContent:ke(n,"Facebook")},options:{prependElement:!0,granularSettings:{supportedFeatures:["listenToPost"],getFeatureForElement:()=>"listenToPost"}}}};c();a();var nt=C(I());c();a();var Yn={darkTheme:{buttonColor:"#A2A096",iconBackground:"#212121",hoverBackgroundColor:"transparent",activeBackgroundColor:"#393937"},lightTheme:{buttonColor:"#7D7D7D",iconBackground:"#FFFFFF",hoverBackgroundColor:"transparent",activeBackgroundColor:"#f8f8f7"}},jn=S`
  flex-direction: column;
  gap: 0px;
  top: 50px;
  margin-left: -22px;
  width: 24px;
  height: 24px;
  border-radius: 50%;
  position: absolute;
  pointer-events: all;
  isolation: isolate;
  z-index: 1;

  button {
    opacity: 1;
  }
`,fo=e=>preactH(E,{onClick:()=>{document.body.querySelectorAll(`[${ye}]`).forEach(n=>{n.removeAttribute(ye)})},overrideStyles:jn,styleSets:Yn,...e});c();a();var go=C($()),yo=C(Y());var Co=(e,t)=>{let o=e.querySelector(t.selectors.postContentSelector);return o||null},Fe=(e,t)=>{let o=e.querySelector(t.selectors.postContentSelector);return o?B({startingNode:o,ignoreCache:!0,getAllTextBlocksInitialThreshold:15,minimumTotalCharThresholdForGaussianHeuristic:4,shouldFindHeadings:!1}):[]},Ze=function(e){return Array.from(document.querySelectorAll(e.selectors.postSelector))},et=e=>{let t=document.querySelector(e.selectors.main),o=(n,r,i,s)=>{if(s===0)return null;if(getComputedStyle(n)[r]===i)return n;for(let l of Array.from(n.children)){let u=o(l,r,i,s-1);if(u)return u}return null};return o(t,"overflowY","auto",4)||o(t,"overflowY","scroll",4)},tt=e=>yo.default.sentences(e,{preserve_whitespace:!0,newline_boundaries:!0}),ot=(e,t)=>Ze(t).pop()?.isSameNode(e)??!1,So=(e,t)=>e.querySelector(t.selectors.postContentSelector)!==null,Kn=e=>{let t=document.querySelectorAll(e.selectors.postContentSelector),o=t[t.length-1];return document.querySelectorAll(e.selectors.isStillGeneratingSelector).length>0||o?.querySelector(".animating")!==null},ae=(e,t)=>Kn(t)&&ot(e,t),ho=function(e,t){return new Promise(o=>{let n=[],r=(0,go.throttle)(()=>{let l=n.some(m=>Array.from(m.addedNodes).find(d=>d instanceof HTMLElement&&d.querySelector(t.selectors.postSelector))!==void 0),u=n.some(m=>m.target.parentElement===document.querySelector(e));n.length=0,(l||u)&&(i.disconnect(),o(T(void 0)))},200),i=new MutationObserver(l=>{n.push(...l),r()}),s=document.querySelector(e);if(!s)return x("Element not found");i.observe(s,{childList:!0,subtree:!0})})};var ye="data-speechify-streamed",Po={key:"gemini",configuration:{options:{autoplayNewest:async(e,t)=>{let o=ot(e,t),n=So(e,t);if(o&&n){let r=performance.now();await new Promise(async i=>{for(;!ae(e,t);)if(await L(300),performance.now()-r>5e3){i(!1);break}i(!0)})}return o&&n&&ae(e,t)},granularSettings:{supportedFeatures:["listenToAnswer"],getFeatureForElement:()=>"listenToAnswer"}},component:fo,elementUpdateProvider:async function*(e){await b(e.selectors.main);do yield Ze(e);while(await ho(e.selectors.main,e))},getElementToEmbed:(e,t)=>e.querySelector(t.selectors.playerContainerSelector)||e,queueableContentFn:async(e,t)=>({getContent:async o=>{let n=e.getAttribute(ye)==="true";if(ae(e,t)||o.index!==0||n){e.setAttribute(ye,"true"),await w(async()=>{let s=tt(Fe(e,t).map(l=>l.textContent).join(`
`));return!!Co(e,t)&&s.length<o.index+2&&ae(e,t)});let r=Fe(e,t).flatMap(s=>tt(s.textContent??"").map(u=>({elem:s,sentence:u}))),i=r.length-1===o.index&&!ae(e,t)||r.slice(o.index,o.index+1).length===0;return{content:r.slice(o.index,o.index+1),chunksBefore:o.index,chunksAfter:i?0:Math.max(1,r.length-o.index-1)}}return{content:Fe(e,t),chunksBefore:0,chunksAfter:0}},converter:o=>{if("sentence"in o){let n=o.elem.textContent?.indexOf(o.sentence)??0;return{text:o.sentence,ref:new nt.ObjectRef({ref:o.elem,highlightInfo:{startOffset:n,scrollElement:et(t)}})}}return{text:P(o),ref:new nt.ObjectRef({ref:o,highlightInfo:{startOffset:0,scrollElement:et(t)}})}},options:{autoplay:!0,sideEffects:!0},metadata:{source:"Gemini"}})}};c();a();var lt=C(I());c();a();var zn={darkTheme:{buttonColor:"#B4B4B4",iconBackground:"#212121",hoverBackgroundColor:"#2f2f2f",activeBackgroundColor:"#2f2f2f"},lightTheme:{buttonColor:"#7D7D7D",iconBackground:"#FFFFFF",hoverBackgroundColor:"#f9f9f9",activeBackgroundColor:"#f9f9f9"}},Vn=S`
  top: 4px;
  position: absolute;
  left: -24px;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 30px;
  height: 30px;
  border-radius: 0.5rem;

  button {
    border-width: 1px !important;
  }
`,Eo=e=>preactH(E,{overrideStyles:Vn,styleSets:zn,...e});c();a();var To=C($()),xo=C(Y());var bo=(e,t)=>{let o=e.querySelector(t.selectors.postContentSelector);return o||null},Ae=(e,t)=>{let o;if(e.isConnected)o=e;else{let u=function(m,p){let d=m.toLowerCase().split(/\s+/),f=p.toLowerCase().split(/\s+/),y=new Set(d),g=new Set(f),h=new Set([...y].filter(A=>g.has(A))),v=new Set([...y,...g]).size;return h.size/v>=.7};var i=u;let s=e.textContent?.trim();if(!s)return[];o=Array.from(document.querySelectorAll(t.selectors.postSelector)).find(m=>{let p=m.textContent?.trim();return p&&u(p,s)})||null}if(!o)return[];let n=o.querySelector(t.selectors.postContentSelector);return n?B({startingNode:n,ignoreCache:!0,getAllTextBlocksInitialThreshold:15,minimumTotalCharThresholdForGaussianHeuristic:4,shouldFindHeadings:!1}).filter(s=>{let l=s.tagName?.toLowerCase()==="div",u=s.classList?.contains("flex")&&s.classList?.contains("text-sm");return!l&&!u}):[]},rt=function(e){return Array.from(document.querySelectorAll(e.selectors.postSelector))},vo=e=>{let t=document.querySelector(e.selectors.main),o=(n,r,i,s)=>{if(s===0)return null;if(getComputedStyle(n)[r]===i)return n;for(let l of Array.from(n.children)){let u=o(l,r,i,s-1);if(u)return u}return null};return o(t,"overflowY","auto",4)||o(t,"overflowY","scroll",4)},st=e=>xo.default.sentences(e,{preserve_whitespace:!0,newline_boundaries:!0}),it=(e,t)=>rt(t).pop()?.isSameNode(e)??!1,Bo=(e,t)=>e.querySelector(t.selectors.postContentSelector)!==null,Xn=e=>document.querySelectorAll(e.selectors.isStillGeneratingSelector).length>0,V=(e,t)=>Xn(t)&&it(e,t),wo=function(e,t){return new Promise(o=>{let n=[],r=(0,To.throttle)(()=>{let l=n.some(m=>Array.from(m.addedNodes).find(d=>d instanceof HTMLElement&&d.querySelector(t.selectors.postSelector))!==void 0),u=n.some(m=>m.target.parentElement===document.querySelector(e));n.length=0,(l||u)&&(i.disconnect(),o(T(void 0)))},200),i=new MutationObserver(l=>{n.push(...l),r()}),s=document.querySelector(e);if(!s)return x("Element not found");i.observe(s,{childList:!0,subtree:!0})})};var ko={key:"grok",configuration:{options:{autoplayNewest:async(e,t)=>{let o=it(e,t),n=Bo(e,t);if(o&&n){let r=performance.now();await new Promise(async i=>{for(;!V(e,t);)if(await L(300),performance.now()-r>5e3){i(!1);break}i(!0)})}return o&&n&&V(e,t)},granularSettings:{supportedFeatures:["listenToAnswer"],getFeatureForElement:()=>"listenToAnswer"}},component:Eo,elementUpdateProvider:async function*(e){await b(e.selectors.main);do yield rt(e);while(await wo(e.selectors.main,e))},getElementToEmbed:e=>e,queueableContentFn:async(e,t)=>({getContent:async o=>{let n=!e.isConnected;if(V(e,t)||o.index!==0||n){await w(async()=>{let s=st(Ae(e,t).map(l=>l.textContent).join(`
`));return!!bo(e,t)&&s.length<o.index+2&&V(e,t)});let r=Ae(e,t).flatMap(s=>st(s.textContent??"").map(u=>({elem:s,sentence:u}))),i=r.length-1===o.index&&!V(e,t)||r.slice(o.index,o.index+1).length===0||!e.isConnected;return{content:r.slice(o.index,o.index+1),chunksBefore:o.index,chunksAfter:i?0:Math.max(1,r.length-o.index-1)}}return{content:Ae(e,t),chunksBefore:0,chunksAfter:0}},converter:o=>{let r=V(e,t)?void 0:vo(t);if("sentence"in o){let i=o.elem.textContent?.indexOf(o.sentence)??0;return{text:o.sentence,ref:new lt.ObjectRef({ref:o.elem,highlightInfo:{startOffset:i,scrollElement:r}})}}return{text:P(o),ref:new lt.ObjectRef({ref:o,highlightInfo:{startOffset:0,scrollElement:r}})}},options:{autoplay:!0,sideEffects:!0},metadata:{source:"Grok"}})}};c();a();var at=C(I());c();a();var Jn={darkTheme:{buttonColor:"#B4B4B4",iconBackground:"#212121",hoverBackgroundColor:"#2f2f2f",activeBackgroundColor:"#2f2f2f"},lightTheme:{buttonColor:"#7D7D7D",iconBackground:"#FFFFFF",hoverBackgroundColor:"#f9f9f9",activeBackgroundColor:"#f9f9f9"}},Zn=S`
  top: 4px;
  position: absolute;
  left: -20px;
  display: flex;
  justify-content: center;
  align-items: center;
  width: 30px;
  height: 30px;
  border-radius: 0.5rem;

  button {
    border-width: 1px !important;
  }
`,Fo=e=>preactH(E,{overrideStyles:Zn,styleSets:Jn,...e});c();a();var Ao=C($()),er=C(Y());var Io=(e,t)=>{let o=e.querySelector(t.selectors.postContentSelector);return o?B({startingNode:o,ignoreCache:!0,getAllTextBlocksInitialThreshold:15,minimumTotalCharThresholdForGaussianHeuristic:4,shouldFindHeadings:!1}):[]},Lo=function(e){return Array.from(document.querySelectorAll(e.selectors.postSelector))},Mo=e=>{let t=document.querySelector(e.selectors.main),o=(n,r,i,s)=>{if(s===0)return null;if(getComputedStyle(n)[r]===i)return n;for(let l of Array.from(n.children)){let u=o(l,r,i,s-1);if(u)return u}return null};return o(t,"overflowY","auto",4)||o(t,"overflowY","scroll",4)};var Ro=function(e,t){return new Promise(o=>{let n=[],r=(0,Ao.throttle)(()=>{let l=n.some(m=>Array.from(m.addedNodes).find(d=>d instanceof HTMLElement&&d.querySelector(t.selectors.postSelector))!==void 0),u=n.some(m=>m.target.parentElement===document.querySelector(e));n.length=0,(l||u)&&(i.disconnect(),o(T(void 0)))},200),i=new MutationObserver(l=>{n.push(...l),r()}),s=document.querySelector(e);if(!s)return x("Element not found");i.observe(s,{childList:!0,subtree:!0})})};var qo={key:"grokx",configuration:{options:{autoplayNewest:async()=>!1,granularSettings:{supportedFeatures:["listenToAnswer"],getFeatureForElement:()=>"listenToAnswer"}},component:Fo,elementUpdateProvider:async function*(e){await b(e.selectors.main);do yield Lo(e);while(await Ro(e.selectors.main,e))},getElementToEmbed:e=>e,queueableContentFn:async(e,t)=>({getContent:async()=>({content:Io(e,t),chunksBefore:0,chunksAfter:0}),converter:o=>{let n=Mo(t);if("sentence"in o){let i=o.elem.textContent?.indexOf(o.sentence)??0;return{text:o.sentence,ref:new at.ObjectRef({ref:o.elem,highlightInfo:{startOffset:i,scrollElement:n}})}}let r=(o instanceof Node?o.parentElement?.parentElement?.parentElement?.parentElement:o)??o;return{text:P(o),ref:new at.ObjectRef({ref:r,highlightInfo:{startOffset:0,scrollElement:n}})}},options:{autoplay:!0,sideEffects:!0},metadata:{source:"GrokX"}})}};c();a();var _o=C(I());c();a();var Do=C(Z());c();a();var Ho=e=>{let t=!!document.querySelector(e.articleContainer);return{articleContainer:t?e.articleContainer:e.articleContainerUnlogged,socialIcons:t?e.socialIcons:e.socialIconsUnlogged,articleTextSelector:t?e.articleTextSelector:e.articleTextSelectorUnlogged,articleInlineElement:t?e.articleInlineElement:e.articleInlineElementUnlogged}};async function Oo({selectors:e}){return(()=>{if(!!(document.querySelector(e.editorContainer)&&document.querySelector(e.composePage)))return Array.from(document.querySelectorAll(e.composePage));if(!!document.querySelector(e.detailModal))return[...Array.from(document.querySelectorAll(e.detailModalContainer)).map(l=>l?.querySelector(e.socialIcons))];let r=!!document.querySelector(`${e.articleContainer} ${e.socialIcons}`),i=!!document.querySelector(`${e.articleContainerUnlogged} ${e.socialIconsUnlogged}`);if(r||i){let l=Ho(e);return[...Array.from(document.querySelectorAll(l.articleContainer)).map(u=>u?.querySelector(l.socialIcons)),...Array.from(document.querySelectorAll(e.commentPlayerContainer))]}return[]})().filter(Boolean)}var Ie=(e,t)=>{let o=Ho(t);return document.querySelector(t.detailModal)?e.closest(t.detailModalContainer)?.querySelector(t.detailModalText):e.closest(t.commentParent)?.querySelector(t.commentContent)??e.closest(o.articleContainer)?.querySelector(o.articleTextSelector)?.querySelector(o.articleInlineElement)??document.querySelector(t.editorContainer)};var tr=S`
  display: flex;
  flex-direction: column;
  align-items: center;
  margin-top: -8px;
  width: 53px;

  > button {
    width: 16px;
    height: 16px;
  }
`,No=S`
  height: 48px;
  width: 100%;
  border-radius: 4px;

  > button {
    width: 18px;
    height: 18px;
  }
`,or=S`
  margin-right: 4px;

  > button {
    height: 18.5px;
    width: 18.5px;

    > svg {
      height: 18.5px;
      width: 18.5px;
    }
  }
`,nr={buttonColor:"rgba(0, 0, 0, 0.75)",iconBackground:"#FFFFFF",hoverBackgroundColor:"rgba(235, 235, 235, 1)",activeBackgroundColor:"#CED1FF"},rr={buttonColor:"rgba(255, 255, 255, 0.9)",iconBackground:"#1B1F23",hoverBackgroundColor:"rgba(71, 74, 77, 1)",activeBackgroundColor:"#556478"};function Wo({notificationAnchor:e,queueableContent:t,wrapper:o,backgroundElement:n=document.body,remoteConfig:r}){let{isDarkBackground:i}=te(n),s=!!(document.querySelector(r.selectors.editorContainer)&&document.querySelector(r.selectors.composePage)),l=!!o.closest(r.selectors.commentPlayerContainer),u=!!document.querySelector(r.selectors.detailModal),{activeElement:m}=oe(),p=(0,Do.useMemo)(()=>{let h=Ie(o,r.selectors);return h?!!ie(h):!1},[m,o]),{playInbox:d,isPlaying:f,isLoading:y,isLoadingFailed:g}=_({queueableContent:t,wrapper:o,isActiveElement:p});return s||l?preactH(E,{backgroundElement:n,isActiveElement:p,isDarkMode:i,notificationAnchor:e,overrideStyles:l?or:null,queueableContent:t,wrapper:o}):preactH(G,{styleThemes:i?rr:nr,customStyles:u?[No,tr]:No,onClick:d,...e?{[k]:!0}:{}},preactH(D,{isLoading:y,isLoadingFailed:g,isPlaying:f,onClick:h=>{h.stopPropagation(),d()}}),preactH(le,{text:"Listen",color:i?"rgba(255, 255, 255, 0.9)":"rgba(0, 0, 0, 0.75)",showText:!y&&!f}))}var Uo={key:"linkedin",configuration:{elementUpdateProvider:async function*(e){await b(e.selectors.main);do await new Promise(t=>setTimeout(t,100)),yield Oo(e);while(await q(e.selectors.main,e.selectors.mutationSelector))},getElementToEmbed(e){return e},component:Wo,queueableContentFn:async(e,t)=>({getContent:await N(async()=>{let o=t.selectors;return{content:[Ie(e,o)].filter(r=>!!r),chunksAfter:0,chunksBefore:0}}),options:{sideEffects:!1,autoplay:!0},converter:o=>({text:P(o),ref:new _o.ObjectRef({ref:o})}),metadata:{source:"Linkedin"}}),options:{prependElement:!0,granularSettings:{supportedFeatures:["listenToPost","listenWhenTyping"],getFeatureForElement:(e,t)=>e.closest(t.selectors.composePage)?"listenWhenTyping":"listenToPost"}}}};c();a();var zo=C(I());c();a();var X=C(Z());var Go={buttonColor:"#454746",iconBackground:M.bgPrimInvBW,hoverBackgroundColor:"#F2F2F2",activeBackgroundColor:"#E4E4E4"},$o={buttonColor:M.icnTxtPrim,iconBackground:"#1B1F23",hoverBackgroundColor:"rgba(71, 74, 77, 1)",activeBackgroundColor:"#606367"},Qo=de(Se)`
  position: relative;
  flex-direction: row;
  align-items: center;
  overflow: hidden;
  cursor: pointer;
  justify-content: center;
  gap: 6px;
  margin: 8px 0 0 42px;
  padding: 4px 6px;
  border-radius: 6px;

  &:hover {
    background-color: ${({styleThemes:e})=>e.hoverBackgroundColor};

    > button {
      ${({styleThemes:e})=>e.hoverButtonColor?`border: 1.8px solid ${e.hoverButtonColor}`:""};
      color: ${({styleThemes:e})=>e.hoverButtonColor};
    }
  }

  > button {
    background: none;
    border: 1.8px solid ${({styleThemes:e})=>e.buttonColor};
    color: ${({styleThemes:e})=>e.buttonColor};
  }

  &:active {
    background-color: ${({styleThemes:e})=>e.activeBackgroundColor};
  }
`;Qo.defaultProps={xAlign:!0,yAlign:!0};function Yo({notificationAnchor:e,queueableContent:t,wrapper:o}){let[n,r]=(0,X.useState)(null),{state:i,pause:s,play:l,isActive:u,queueAndPlayContent:m}=ht(n),p=Te(document.querySelector("#mainApp")),d=u&&i==="playing",f=u&&i==="buffering",y=i==="errored";(0,X.useEffect)(()=>Ct(()=>{ee.pause()}),[]),(0,X.useEffect)(()=>{r(t)},[o]);let g=(0,X.useCallback)(async h=>{if(h&&h.stopPropagation(),!u)return m();if(!f){if(d)return s();if((window.getSelection()??"").toString().length>0||!d)return l();Array.from(document.querySelectorAll(".speechify-inbox-player")).forEach(v=>v.classList.remove("speechify-inbox-player")),Array.from(document.querySelectorAll(`.${Ce}`)).forEach(v=>v.classList.remove(Ce)),o.classList.add(Ce)}},[o,d,f,n,u]);return preactH(Qo,{onClick:g,styleThemes:p?$o:Go,...e?{[k]:!0}:{}},preactH(D,{isLoading:f,isLoadingFailed:y,isPlaying:d,iconSize:"20px",onClick:g}),preactH(he,{color:p?$o.buttonColor:Go.buttonColor,fontSize:"14px",letterSpacing:"0.2px",medium:!0},d?"Pause":"Listen"))}c();a();function jo(e){return document.querySelectorAll(e.conversationContentHost).length>1}function Ko(e){return document.querySelectorAll(e.conversationContentDocument)}function ct(e){return document.querySelectorAll(e).length>0}var Vo={key:"outlook",configuration:{component:Yo,elementUpdateProvider:async function*(e){let t=e.selectors;await b(t.componentContainerSelector);do{let o=we(t.componentContainerSelector);yield ct(t.composeButtonSelector)?o.slice(0,1):o}while(await q(t.main,t.toWatchElements))},getElementToEmbed:(e,t)=>ct(t.selectors.composeButtonSelector)?e.parentElement:e,queueableContentFn:async(e,t)=>({getContent:await N(async()=>{let o=t.selectors;return{content:(jo(o)?Array.from(Ko(o)):Array.from(e.closest(o.contentParent)?.querySelectorAll(o.messageSelector)??[])).flatMap(i=>B({startingNode:i,shouldFindHeadings:!1,getAllTextBlocksInitialThreshold:1,ignoreCache:!0})),chunksAfter:0,chunksBefore:0}}),converter:o=>({text:P(o),ref:new zo.ObjectRef({ref:o})}),options:{autoplay:!0,sideEffects:!1},metadata:{source:"Outlook"}}),options:{prependElement:!1,styles(){return{display:"inline-block"}},granularSettings:{supportedFeatures:["listenInInbox"],getFeatureForElement:()=>"listenInInbox"}}}};c();a();var pt=C(I());c();a();var sr={darkTheme:{buttonColor:"#A2A096",iconBackground:"#212121",hoverBackgroundColor:"transparent",activeBackgroundColor:"#393937"},lightTheme:{buttonColor:"#7D7D7D",iconBackground:"#FFFFFF",hoverBackgroundColor:"transparent",activeBackgroundColor:"#f8f8f7"}},ir=S`
  border-radius: 50%;
  flex-direction: column;
  gap: 0px;
  height: 24px;
  left: 0;
  margin-left: -42px;
  position: absolute;
  top: 16px;
  width: 24px;

  button {
    opacity: 1;
  }
`,Xo=e=>preactH(E,{overrideStyles:ir,styleSets:sr,...e});c();a();var Jo=C($()),lr=C(Y());var Zo=(e,t)=>{let o=e.querySelector(t.selectors.postContentSelector);return o?B({startingNode:o,ignoreCache:!0,getAllTextBlocksInitialThreshold:15,minimumTotalCharThresholdForGaussianHeuristic:4,shouldFindHeadings:!0}):[]},ut=function(e){return Array.from(document.querySelectorAll(e.selectors.postSelector))},mt=e=>{let t=document.querySelector(e.selectors.main),o=(n,r,i,s)=>{if(s===0)return null;if(getComputedStyle(n)[r]===i)return n;for(let l of Array.from(n.children)){let u=o(l,r,i,s-1);if(u)return u}return null};return o(t,"overflowY","auto",4)||o(t,"overflowY","scroll",4)};var dt=(e,t)=>ut(t).pop()?.isSameNode(e)??!1;var ar=e=>document.querySelectorAll(e.selectors.isStillGeneratingSelector).length>0,Le=(e,t)=>ar(t)&&dt(e,t),en=function(e,t){return new Promise(o=>{let n=[],r=(0,Jo.throttle)(()=>{let l=n.some(m=>Array.from(m.addedNodes).find(d=>d instanceof HTMLElement&&d.querySelector(t.selectors.postSelector))!==void 0),u=n.some(m=>m.target.parentElement===document.querySelector(e));n.length=0,(l||u)&&(i.disconnect(),o(T(void 0)))},200),i=new MutationObserver(l=>{n.push(...l),r()}),s=document.querySelector(e);if(!s)return x("Element not found");i.observe(s,{childList:!0,subtree:!0})})};var tn={key:"perplexity",configuration:{options:{autoplayNewest:async(e,t)=>{let o=dt(e,t);if(o){let n=performance.now();await new Promise(async r=>{for(;!Le(e,t);)if(await L(300),performance.now()-n>5e3){r(!1);break}r(!0)})}return o&&Le(e,t)},granularSettings:{supportedFeatures:["listenToAnswer"],getFeatureForElement:()=>"listenToAnswer"}},component:Xo,elementUpdateProvider:async function*(e){await U(e.selectors.main);do yield ut(e);while(await en(e.selectors.main,e))},getElementToEmbed:e=>e,queueableContentFn:async(e,t)=>({getContent:async()=>(await w(async()=>Le(e,t)),{content:Zo(e,t),chunksBefore:0,chunksAfter:0}),converter:o=>{if("sentence"in o){let n=o.elem.textContent?.indexOf(o.sentence)??0;return{text:o.sentence,ref:new pt.ObjectRef({ref:o.elem,highlightInfo:{startOffset:n,scrollElement:mt(t)}})}}return{text:P(o),ref:new pt.ObjectRef({ref:o,highlightInfo:{startOffset:0,scrollElement:mt(t)}})}},options:{autoplay:!0,sideEffects:!0},metadata:{source:"Perplexity"}})}};c();a();var ln=C(I());c();a();var on={buttonColor:"#000000",iconBackground:"#FFFFFF",hoverBackgroundColor:"none",activeBackgroundColor:"none"},nn={buttonColor:"#FFFFFF",iconBackground:"#000000",hoverBackgroundColor:"none",activeBackgroundColor:"none"},Me=S`
  &:hover {
    opacity: 0.75;
  }

  &:active {
    opacity: 0.7;
  }
`,cr=S`
  ${Me}
  margin-top: 4px;
  margin-left: 10px;
`,ur=S`
  ${Me}
`,mr=S`
  ${Me}
  margin-left: 10px;
`,dr=S`
  ${Me}
  margin-top: 4px;
  margin-left: 8px;
`;function rn({backgroundElement:e=document.body,notificationAnchor:t,queueableContent:o,remoteConfig:n,wrapper:r}){let{playInbox:i,isPlaying:s,isLoading:l,isLoadingFailed:u}=_({queueableContent:o,wrapper:r}),m=!!r.closest(n.selectors.composeCommentSelector),p=n.selectors.isTextAddedToComposeCommentBox,d=r?.closest(n.selectors.commentSelector),f=!!r?.closest(n.selectors.composePostSelector),y=r.closest(n.selectors.composeCommentSelector);y&&(y.querySelector(p)?r.style.display="flex":r.style.display="none");let g=Te(e),h=document.documentElement.classList.contains("theme-dark")||g;return d?preactH(E,{queueableContent:o,wrapper:r,backgroundElement:e,isDarkMode:h,notificationAnchor:t,styleSets:{lightTheme:{...on,hoverBackgroundColor:"none",activeBackgroundColor:"none"},darkTheme:{...nn,hoverBackgroundColor:"none",activeBackgroundColor:"none"}},overrideStyles:dr}):preactH(G,{onClick:i,styleThemes:h?nn:on,customStyles:f?ur:m?mr:cr,"data-notification-trigger":"ai-button",...t?{[k]:!0}:{}},preactH(D,{isLoading:l,isPlaying:s,isLoadingFailed:u}),f&&preactH(le,{text:s?"Pause":"Listen",color:h?"#FFF":"#000",showText:!l}))}c();a();function sn(e){let t=!!(e.feedPageSelector&&document.querySelector(e.feedPageSelector)),o=!!(e.postContainerSelector&&document.querySelector(e.postContainerSelector)),n=!!(e.composePostSelector&&document.querySelector(e.composePostSelector));return!o&&!t&&!n?[]:[...t&&e.feedPageSelector?Array.from(document.querySelectorAll(e.feedPageSelector)):[],...o&&e.postContainerSelector?Array.from(document.querySelectorAll(e.postContainerSelector)):[],...o&&e.commentSelector?Array.from(document.querySelectorAll(e.commentSelector)):[],...o&&e.composeCommentPlayerPosition?Array.from(document.querySelectorAll(e.composeCommentPlayerPosition)):[],...n&&e.composePostSelector?Array.from(document.querySelectorAll(e.composePostSelector)):[]].filter(Boolean)}var an={key:"reddit",configuration:{elementUpdateProvider:async function*(e){await b(e.selectors.main);do yield sn(e.selectors);while(await q(e.selectors.main,e.selectors.mutationSelector))},getElementToEmbed:(e,t)=>{let o=e?.tagName===t.selectors.commentTag,n=e?.tagName===t.selectors.postTag,r=e?.tagName===t.selectors.composeCommentTag,i=e?.tagName===t.selectors.composePostTag;return o?e.querySelector(t.selectors.commentChildSelector)||e.querySelector(t.selectors.commentChildSelectorFallback):r?e.querySelector(t.selectors.composeCommentChildSelector):n?e.querySelector(t.selectors.postChildSelector)||e.querySelector(t.selectors.postChildSelectorFallback):i?e.querySelector(t.selectors.composePostChildSelector)?.parentElement??null:e},queueableContentFn:async(e,t)=>({getContent:await N(async()=>({content:Array.from(e?.closest(t.selectors.postContainerSelector)?.querySelectorAll(t.selectors.postContentSelector)??e?.closest(t.selectors.feedPostsSelector)?.querySelectorAll(t.selectors.postContentSelector)??e?.closest(t.selectors.composeCommentSelector)?.querySelectorAll(t.selectors.composeCommentContentSelector)??e?.closest(t.selectors.composePostSelector)?.querySelectorAll(t.selectors.isTextAddedToComposePostBox)??[e?.closest(t.selectors.commentSelector)?.querySelector(t.selectors.commentContentSelector)]).filter(n=>!!n),chunksAfter:0,chunksBefore:0})),converter:o=>({text:P(o),ref:new ln.ObjectRef({ref:o})}),options:{sideEffects:!1,autoplay:!0},metadata:{source:"Reddit"}}),options:{prependElement:!1,styles:()=>({marginRight:"auto"}),granularSettings:{supportedFeatures:["listenToPost"],getFeatureForElement:()=>"listenToPost"}},component:rn}};c();a();c();a();var pr={buttonColor:"rgb(83, 100, 113)",iconBackground:"white",hoverButtonColor:"#4759F7",hoverBackgroundColor:"#f1f4f9",activeBackgroundColor:"#f1f4f9"},fr={buttonColor:"rgb(113, 118, 123)",iconBackground:"white",hoverButtonColor:"#4759F7",hoverBackgroundColor:"rgba(0, 0, 0, 0.1)",activeBackgroundColor:"rgba(0, 0, 0, 0.1)"},gr={padding:"10px",borderRadius:"50%",marginTop:"-1px"},cn=e=>preactH(E,{...e,overrideStyles:gr,styleSets:{darkTheme:fr,lightTheme:pr}});c();a();function un(e){let t=document.querySelector(e.selectors.tweetContainer),o=document.querySelector(e.selectors.tweet)?.parentElement?.querySelector(e.selectors.tweetParent),n=document.querySelector(e.selectors.editorContent),r=document.querySelector(e.selectors.article);return t||o||n||r?[...t?Array.from(document.querySelectorAll(e.selectors.tweetContainer)):[],...r?Array.from(document.querySelectorAll(e.selectors.articleContainer)):[],...n?Array.from(document.querySelectorAll(e.selectors.toolBarSelector)):[],...o?[...Array.from(document.querySelectorAll(e.selectors.tweet))].map(s=>s?.parentElement?.querySelector(e.selectors.tweetParent)):[]].filter(Boolean):[]}function mn(e){return new Promise(t=>{let o=new MutationObserver(r=>{r.some(s=>Array.from(s.addedNodes).find(l=>l instanceof HTMLElement?l.querySelector(e.selectors.toolBarSelector):!1))&&(o.disconnect(),t(T(void 0)))}),n=document.querySelector(e.selectors.contentParent);if(!n)return x("Element not found");o.observe(n,{childList:!0,subtree:!0})})}var dn={key:"x",configuration:{elementUpdateProvider:async function*(e){let t=window.location.pathname,o=new MutationObserver(()=>{let r=window.location.pathname;t!==r&&(t=r,xe())}),n=document.querySelector("title");n&&o.observe(n,{subtree:!0,characterData:!0,childList:!0});try{await U(e.selectors.mainArea);do await St(e.selectors.loadingTimeline),yield un(e);while(await Promise.race([q(e.selectors.mountArea,e.selectors.mainArea),mn(e)]))}finally{o.disconnect()}},getElementToEmbed(e,t){let o=document.querySelector(t.selectors.article),n=e.getAttribute(t.selectors.toolBarAttribute)===t.selectors.toolBar;return o||n?e.childNodes[0]:e.id!==""?e:null},component:cn,queueableContentFn:async(e,t)=>{let n=document.querySelector(t.selectors.article)?Array.from(e.closest(t.selectors.tweet)?.querySelector(t.selectors.articleContent)?.querySelectorAll(t.selectors.articleContentElements)||[]):[(e.closest(t.selectors.tweet)??e.closest(t.selectors.tweet2))?.parentElement?.querySelector(t.selectors.contentParent)??document.querySelector(t.selectors.editorContent)];return await co(n[0])?H.getBundleState().currentContent:ke(n,"Twitter")},options:{prependElement:!0,granularSettings:{supportedFeatures:["listenToTweet"],getFeatureForElement:()=>"listenToTweet"}}}};c();a();var fn=C(I());c();a();var yr={buttonColor:"rgba(15,15,15,0.7)",iconBackground:"white",hoverButtonColor:"rgba(15,15,15,0.7)",hoverBackgroundColor:"rgba(0,0,0,0.1)",activeBackgroundColor:"rgba(0,0,0,0.2)"},Cr={buttonColor:"rgba(255,255,255,0.9)",iconBackground:"rgba(15,15,15,0.7)",hoverButtonColor:"rgba(255,255,255,0.9)",hoverBackgroundColor:"rgba(255,255,255,0.1)",activeBackgroundColor:"rgba(255,255,255,0.2)"},Sr={padding:"8px",borderRadius:"50%",marginRight:0,circle:{strokeWidth:"1px"}},pn=e=>preactH(E,{...e,backgroundElement:document.querySelector("ytd-app")??document.body,overrideStyles:Sr,styleSets:{darkTheme:Cr,lightTheme:yr}});var gn={key:"youtube",configuration:{elementUpdateProvider:async function*(e){await b(e.selectors.mainArea);do yield we(e.selectors.posts);while(await q(e.selectors.mainArea,e.selectors.posts))},getElementToEmbed:(e,t)=>e.querySelector(t.selectors.mountArea),component:pn,queueableContentFn:async(e,t)=>({getContent:await N(async()=>({content:Array.from(e.querySelectorAll(t.selectors.postBodies)),chunksAfter:0,chunksBefore:0})),converter:o=>{let n=fe(t),r=n?.querySelector(t.selectors.mainArea)?n:null;return{text:P(o),ref:new fn.ObjectRef({ref:o,highlightInfo:{startOffset:0,scrollElement:r??void 0}})}},options:{autoplay:!0,sideEffects:!1},metadata:{source:"Youtube"}}),options:{prependElement:!0,granularSettings:{supportedFeatures:["listenToComment"],getFeatureForElement:()=>"listenToComment"}}}};var hr=[Yt,Zt,io,po,Po,ko,qo,Uo,Vo,tn,an,dn,gn];async function Pr(e){let t=hr.filter(n=>n.key===e.configurationKey);if(t.length===0)return;yt();let o=new AbortController;try{Promise.all(t.map(r=>Er(r,e,o.signal))).then(r=>{r?.forEach(i=>{if(ue(i)){let s=i.error,u={context:{errorMessage:s instanceof Error?s.message:JSON.stringify(s,null,2)}};Oe(new Error(`Failed to mount configuration:${JSON.stringify(s,null,2)} `),u)}})})}catch(n){Oe(new Error(`Unexpected error in init: ${n instanceof Error?n.message:String(n)}`))}return await kr(),()=>{o.abort(),br()}}var Er=async(e,t,o)=>{let{elementUpdateProvider:n,component:r,queueableContentFn:i,getElementToEmbed:s,options:l}=e.configuration,u=n(t);for await(let m of u){if(o.aborted)break;if(!m||m.length===0)continue;let p=!0,d=m.map(async g=>{let h=s(g,t),v=(t.playButtons??{})[e.key];if(!h)return T(!0);if(l?.granularSettings){let ce=l.granularSettings.getFeatureForElement(g,t);if(v&&v[ce]===!1)return T(!0)}let O=l?.styles?l.styles(g,t):null,A=Tr(h,!!l?.prependElement,O,p);if(ue(A))return A;let ft=r??We,W=await i(g,t),J=Fr(A.value.container,()=>preactH(ft,{notificationAnchor:p,queueableContent:W,remoteConfig:t,wrapper:A.value.shadowContainer}));return ue(J)?J:(l?.autoplayNewest&&vr(e.key,W,()=>l.autoplayNewest?.(g,t)),p=!1,T(!0))}),y=(await Promise.all(d)).filter(ue);if(y.length>0)return y[0]}return T(!0)},yn=(e,t,o=null,n)=>{let r=e.querySelector(`div[${Ee}]`)??document.createElement("div");return r.setAttribute(Ee,"true"),r.style.alignSelf="center",n&&r.setAttribute(k,"true"),o&&Object.assign(r.style,o),t?e.prepend(r):e.appendChild(r),{shadowRoot:r.shadowRoot??r.attachShadow({mode:"open"}),shadowContainer:r}},Tr=He((e,t,o=null,n)=>{xr(e);let{shadowRoot:r,shadowContainer:i}=yn(e,t??!1,o??null,n),s=document.createElement("div");return s.role="speechify-post-player",r.appendChild(s),{container:s,shadowContainer:i}}),xr=(e,t)=>{let{shadowRoot:o}=yn(e,t??!1);if(!o)return;let n=o.querySelector('div[role="speechify-post-player"]');n&&(Re(null,n),o.removeChild(n))},br=()=>{document.querySelectorAll(`div[${Ee}]`).forEach(t=>{t.remove()})},vr=async(e,t,o)=>{if(!(o?await o():!1))return;let r=gt.playButtons.get(wt(e),e,"autoplayResponses");if(r!==!1){if(t.options=t.options??{autoplay:!1,sideEffects:!1},r===!0){t.options.autoplay=!0,Q(t,!0);return}r===void 0&&(await me("introduce-ai-autoplay",{animate:!1},"pill-player"),t.options.autoplay=!1,Q(t,!0))}},Br={aichat:"AICHAT",facebook:"FACEBOOK",gmail:"GMAIL",linkedin:"LINKEDIN",outlook:"OUTLOOK",reddit:"REDDIT",youtube:"YOUTUBE",x:"X"},wr=()=>{let e=null;return Ft()?e="facebook":At()?e="gmail":kt()?e="linkedin":qt()?e="outlook":It()?e="reddit":Lt()?e="youtube":Mt()?e="x":Rt()&&(e="aichat"),e},kr=async()=>{let e=wr();if(!e)return;let t=Br[e],o=await xt("SHOULD_SHOW_PLAY_BUTTON_HINT");if(o.includes(t)===!0){Pe("individual-post-button-hint");return}await Ht({allowPointerActions:!0,component:!0,duration:0,id:"individual-post-button-hint",priority:101,showOnMobile:!1,timeSensitive:!0,render:()=>preactH(Ot,null)}),await bt("SHOULD_SHOW_PLAY_BUTTON_HINT",[...o,t]),Ne("extension_play_button_hint_shown",{platform:e})},Fr=He((e,t)=>{Re(preactH(De,{root:e},preactH(t,null)),e)});export{Pr as default};
//# sourceMappingURL=init-F27DTRWA.js.map
