import{a as l}from"./chunk-VYK2SFTV.js";import{b as p,bb as u}from"./chunk-6VFX2JNU.js";import{m}from"./chunk-35EEQS33.js";import{i as x}from"./chunk-BGIN6QNH.js";import{d as b,h as a,o as s}from"./chunk-NUN3A7RC.js";s();a();s();a();var h=async r=>{try{return p("/ocr/ocr-image",{content:r})}catch(e){console.error(e)}},y=h;var g=b(x());s();a();var d=async r=>{let{fullTextAnnotation:e}=r[0];if(!e)return[];let[t]=e.pages.map(o=>o.blocks),n=t.map(o=>o.paragraphs).flat();return O(n)},O=r=>r.map(e=>{let t=e.words.map(n=>{let o=n.symbols.reduce((c,i)=>c+i.text+(i.property?.detectedBreak?" ":""),"");return{type:"word",text:o,vertices:n.boundingBox.vertices}});return{type:"paragraph",vertices:e.boundingBox.vertices,children:t,text:t.reduce((n,o)=>n+o.text,"")}});var v=m((r,e)=>e.then(r)),E=(r,e,t)=>({x:r.x/window.devicePixelRatio+t-2,y:r.y/window.devicePixelRatio+e-2}),f=(r,e,t)=>r.map(n=>E(n,e,t)),A=(r,e)=>async t=>t.map(n=>({...n,vertices:f(n.vertices,r,e),children:(n.children??[]).map(o=>({...o,vertices:f(o.vertices,r,e)}))}));async function P(r,e=0,t=0){return v([async()=>r,y,d,A(e,t)])()}async function I(r,e=0,t=0,n="Screenshot",o){return{getContent:await u(async()=>{let c=await P(r,e,t);return o?.(),{content:c,chunksBefore:0,chunksAfter:0}}),converter:c=>({text:l(c),ref:new g.ObjectRef({ref:c})}),options:{autoplay:!0,sideEffects:!1},metadata:{source:n}}}export{P as a,I as b};
//# sourceMappingURL=chunk-XP57BQDH.js.map
