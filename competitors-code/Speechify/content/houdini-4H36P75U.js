import{h as k,o as S}from"./chunk-NUN3A7RC.js";S();k();function f(t,i){return typeof t.get(i)!="string"?t.get(i)[0]:t.get(i)}function p(t,[i,l,o,r,n],h,[e,s,a,C,d,H]){i/=e,l/=s,o/=e,r/=s,i+=d,l+=H;let u=[a,C];if(n/=Math.min(e,s),o<2*n&&(n=o/2),r<2*n&&(n=r/2),t.beginPath(),h){let[c,g,m,b]=h,$=new Path2D;$.rect(c/e,g/s,m/e,b/s),t.clip($)}return n>=0&&(t.moveTo(i+n,l),t.arcTo(i+o,l,i+o,l+r,n),t.arcTo(i+o,l+r,i,l+r,n),t.arcTo(i,l+r,i,l,n),t.arcTo(i,l,i+o,l,n),t.closePath()),t}function T(t){t=String(t);let i=t.indexOf("#")===0,l=t.indexOf("rgb")===0,o=t.indexOf("oklch")===0,r,n,h;if(i){let e=t.substr(1).match(t.length===7?/(\S{2})/g:/(\S{1})/g);e&&(r=parseInt(e[0],16),n=parseInt(e[1],16),h=parseInt(e[2],16))}if(l){let e=t.match(/(\d+)/g);e&&(r=e[0],n=e[1],h=e[2])}if(o){let e=t.match(/oklch\(([\d.]+)\s+[\d.]+\s+[\d.]+\)/);if(e){let s=parseFloat(e[1]);return Math.round(s*255)}}if(typeof r<"u")return(r*299+n*587+h*114)/1e3}function W(t,{elemColor:i,elemMatrix:l,wordPositions:o,wordClipPositions:r,sentencePositions:n,sentenceColor:h,wordColor:e}){if(!h)throw new Error("Sentence color is not provided.");if(!e)throw new Error("Word color is not provided.");let s=T(i)>=160,a=o?new Array(o.length/4).fill(0).map((c,g)=>o.slice(g*4,g*4+4)):[],C=r?new Array(r.length/4).fill(0).map((c,g)=>r.slice(g*4,g*4+4)):[],d=new Array(n.length/4).fill(0).map((c,g)=>n.slice(g*4,g*4+4));t.fillStyle=s?h.dark:h.light;let H=[1,1,0,0,0,0],u=l.split(",").map(Number);u=u.concat(H.slice(u.length));for(let c in d){let g=d[c];t.save(),p(t,[...g,6],g,u).fill(),t.restore()}t.fillStyle=s?e.dark:e.light;for(let c in a){let g=a[c],m=C[c];t.save(),p(t,[...g,6],m,u).fill(),t.restore()}}var D=t=>class{static get inputProperties(){return[`--${t}HighlightWordInfo`,`--${t}HighlightWordClipInfo`,`--${t}HighlightSentenceInfo`,`--${t}ElemColor`,`--${t}ElemMatrix`,`--${t}SentenceHighlightColorDark`,`--${t}SentenceHighlightColorLight`,`--${t}WordHighlightColorDark`,`--${t}WordHighlightColorLight`]}paint(i,l,o){let r=f(o,`--${t}ElemColor`),n=f(o,`--${t}ElemMatrix`),h=f(o,`--${t}HighlightWordInfo`)?.split(",").map(Number),e=f(o,`--${t}HighlightWordClipInfo`)?.split(",").map(Number),s=f(o,`--${t}HighlightSentenceInfo`).split(",").map(Number),a=f(o,`--${t}SentenceHighlightColorDark`),C=f(o,`--${t}SentenceHighlightColorLight`),d=f(o,`--${t}WordHighlightColorDark`),H=f(o,`--${t}WordHighlightColorLight`);W(i,{elemColor:r,elemMatrix:n,wordPositions:h,wordClipPositions:e,sentencePositions:s,sentenceColor:{dark:a,light:C},wordColor:{dark:d,light:H}})}};if("registerPaint"in globalThis){let t=["speechifyReadingNow","speechifySalience","speechifyClickToPlay","speechifyPlaybackHighlighter","summarizeHighlighterDark","summarizeHighlighterLight","summarizeSentenceMedium"];for(let i of t)globalThis.registerPaint(i,D(i))}export{T as brightnessByColor,W as paint};
//# sourceMappingURL=houdini-4H36P75U.js.map
