(()=>{const e=new function(){let n=this;function o(){const e={"Content-Type":"application/json"};return new Promise((n=>{chrome.cognitoUser?chrome.cognitoUser.getSession((function(o,t){t&&(e.Authorization=t.idToken.jwtToken),n(e)})):n(e)})).catch((n=>Promise.resolve(e)))}n.getClonedVoices=function(e,t,i){if(!readingBar.settings.loggedIn)return n.clonedVoices=[],i([]);if(n.clonedVoices.length>0)return i(n.clonedVoices);return o().then((e=>fetch(n.endpoint+"/user-voices",{method:"GET",headers:e}))).then((e=>e.json())).then((e=>{if(n.isClonedVoicesLoaded=!0,"voices"in e)return n.clonedVoices=e.voices,i(e.voices);{let e=[{speakerId:"841a95b5-930b-4a59-b371-b7c00ae1af76",locale:"en-US",sharing:"none",creatorCognitoId:"a5fd139e-4eb6-44c7-ad90-aa55aa7d2a0e",isExpired:!1,lastAccessedTimestamp:"1719446400",gender:"male",voiceName:"ben new",createdTimestamp:"1718151281",createdDateTime:"2024-06-12",voiceId:"c0ebbfdb285011ef8a3f3972435a64c7"},{speakerId:"5eceaf4a-3b9d-4c2f-b3b9-8ad8df52baa2",locale:"en-US",sharing:"none",creatorCognitoId:"a5fd139e-4eb6-44c7-ad90-aa55aa7d2a0e",isExpired:!1,lastAccessedTimestamp:"1719532800",gender:"male",voiceName:"Ben Hu",createdTimestamp:"1718221311",createdDateTime:"2024-06-12",tags:["Adult"],voiceId:"cf704d4428f311efa15393551052d4db"},{sharing:"community",creatorCognitoId:"ed6dd590-5529-468b-b937-5d10d02829d8",createdTimestamp:"1719429747",createdDateTime:"2024-06-26",voiceId:"f3d4c4ab21e511ef8810c3749293a0fb",voiceName:"cody ",tags:["Adult","Calm","Confident","Excited","Professional","Balanced","Casual","Soothing"],description:"gaming video ",locale:"en-US",gender:"male",isExpired:!1,speakerId:"86744c80-8e1d-4c1c-b9b0-4563c4eb745d"},{sharing:"community",creatorCognitoId:"85a0552b-33fe-4dca-941e-1d5b0e1436ef",createdTimestamp:"1719516840",createdDateTime:"2024-06-27",voiceId:"7b5c96d01de411ef8ac28b91430a6707",voiceName:"Thomas",tags:["Mature","Confident","Professional","Soft","Formal","Warm"],description:"",locale:"en-US",gender:"male",isExpired:!1,speakerId:"910f7316-cba5-4bca-a222-57d45992cd15"},{sharing:"community",creatorCognitoId:"85a0552b-33fe-4dca-941e-1d5b0e1436ef",createdTimestamp:"1719530302",createdDateTime:"2024-06-27",voiceId:"ef8669381de611efa5d88b91430a6707",voiceName:"Nicole",tags:["Young","Sweet","Confident","Joyful","Excited","Professional","Playful"],description:"",locale:"en-US",gender:"female",isExpired:!1,speakerId:"39a19f33-8f6f-4df0-98ee-1058faed14a5"},{sharing:"community",creatorCognitoId:"85a0552b-33fe-4dca-941e-1d5b0e1436ef",createdTimestamp:"1719536780",createdDateTime:"2024-06-28",voiceId:"4b0bb6db1d5711efbeac2950c5dd6fa3",voiceName:"Abby",tags:["Young","Sweet","Soft","Soothing"],description:"",locale:"en-US",gender:"female",isExpired:!1,speakerId:"d12133e0-8f01-4552-81e4-1bd644087ca5"}];return n.clonedVoices=e,i(e)}})).catch((e=>(n.clonedVoices=[],i([]))))},n.getCommunityVoices=function(e,t,i){if(n.communityVoices.length>0&&!e.refresh)return i(n.communityVoices);return o().then((o=>{let t=new URL(n.endpoint+"/community-share");return e.refresh&&t.searchParams.append("refresh",e.refresh),fetch(t,{method:"GET",headers:o})})).then((e=>e.json())).then((e=>"communityVoices"in e&&e.communityVoices.length>0?(n.communityVoices=e.communityVoices,i(e.communityVoices)):i([]))).catch((e=>i([])))},n.installCommunityVoice=function(e,t,i){return o().then((o=>{const t=JSON.stringify({voiceId:e.voiceId});return fetch(n.endpoint+"/community-share",{method:"PUT",headers:o,body:t})})).then((e=>e.json())).then((e=>i(!0))).catch((e=>i(!1)))},n.getClonedVoice=function(e,t,i){let c=e.voice;return o().then((e=>{let o=new URL(n.endpoint+"/clone");return c.id&&o.searchParams.append("voiceId",c.id),fetch(o,{method:"GET",headers:e})})).then((e=>e.json())).then((e=>i("voice"in e?e.voice:null))).catch((e=>i(null)))},n.reActivateVoice=function(e,t,i){let c=e.voice;return o().then((e=>{const o=JSON.stringify({voiceId:c.id});return fetch(n.endpoint+"/reactivate",{method:"POST",headers:e,body:o})})).then((e=>e.json())).then((e=>{i(e)})).catch((e=>i({type:"error",error:e})))},n.isAsyncFunction=function(e){return!!n.asyncFunctions.includes(e)},n.asyncFunctions=["getClonedVoices","getClonedVoice","getCommunityVoices","installCommunityVoice","reActivateVoice"],n.isClonedVoicesLoaded=!1,n.clonedVoices=[],n.communityVoices=[],n.endpoint="https://iies50erj2.execute-api.us-east-1.amazonaws.com/prod",chrome.runtime.onMessage.addListener((function(n,o,t){if(n.fn in e)return e[n.fn](n,o,t),!0}))}})();